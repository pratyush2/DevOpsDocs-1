Thanks you massessge


https://answersafrica.com/70-best-thank-you-messages-your-boss-would-certainly-love.html
===============================================
shell scripting
==========================================
how to check ibm server warrenty

https://www.ibm.com/support/home/warranty-lookup
=======================================
PMR 37506,227,000
=========================================================================================
A Alfa
B Bravo
C Charlie
D Delta
E Echo
F Foxtrot
G Golf
H Hotel
I India
J Juliett
K Kilo
L Lima
M Mike
N November
O Oscar
P Papa
Q Quebec
R Romeo
S Sierra
T Tango
U Uniform
V Victor
W Whiskey
X X-ray
Y Yankee
Z Zulu

===========================================================================================
AIX BEST Practice

https://w3-connections.ibm.com/wikis/home?lang=en-us#!/wiki/Global%20Server%20Management%20Distributed%20SL/page/SBPE%20-%20AIX%20Current%20Best%20practices


========================================
http://securitytracker.com/id/1008266                 security tracker for Patch


======================================

startup & shutdown aix server script

http://www.unixmantra.com/2013/04/start-up-shutdown-aix.html          

http://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop        Ajay Sehgel

http://www.ibm.com/developerworks/aix/library/au-aix-autostartup-shutdown-scripts/      
=========================================

https://docs.amer.csc.com/alfresco/n/showDocDetails/workspace/SpacesStore/49eb0f30-fe18-4521-991c-b508cf81bd31   induction
 

IBM TECh LInk

https://techlink.aus.stglabs.ibm.com/psdb/systemp/searchPmr.do?accessed=true&isExport=false&searchStr=lsof+with+gpfs&expand=n&clearBiz=false&clearCat=false&bizUnits=aixos&hideharmful=on&sortKey=relevance&hitsPerPage=100&pmrno=&branch=&country=&queue=&center=&customerNo=&compidnum=&aparNumber=&release=&status=any&severity=any&priority=any&dateSelectType=lastUpdate&dateRangeStr=3000&modifiedDateFrom=&modifiedDateTo=&creDateFrom=&creDateTo=&action=Submit 

how to download

http://port.rchland.ibm.com/support/fixcentral/ac/options                  TL download link
===================================================
IBM tool for check pre-req

https://www14.software.ibm.com/webapp/set2/flrt/report 

-------------------------------------------------------------
AIX & System P Community
http://www.torontoaix.com/hacmp-powerha-how-to-faqs/quick_setup_hacmp     

http://aix4admins.blogspot.in/            AIX for System Administrators

http://www.ibm.com/developerworks/aix/library/au-aix-system-migration-installation/index.html   OS Migration by using NIM: full description can be found at 
-------------------------------------------------------------
vlookup for checking diffrence of two sheet

=VLOOKUP(A5;Sheet1.A$2:A$838;1;0)

-------------------------------------------------------------
IN2100338       10.5.128.127

/ACTIVITY/akram/do_not_delete    for akram script

emergency CR  CR91171	
	
Please approved the CR85183 in tool behalf  Lokesh Budhalakoti, as he is not able to see this cr in his bin. 	
	

CR93325     SR4201130   SHC NOV	 SR4187193	 SR4242224  for reschdule


CR100351    for JFM INFRATEL   SR4604427

CR95591    nov for linux  SR4303794
	
SR3829756 SR3834463   FOR CR85183  TO CHANGE MANGEMENT	
	
CR16187      SHC   CR	
	
A1399835	

CR101073    for SHC JFM  



SR4623533   CR101073  for JFM AIERTEL Deveation 

SR4834006   CR105994    SR4844044(reschdule) for sun server Some parameter

CR106530         for SSH devetion of AIrtel server    AMJ  
	
*********************  BH  ***********************************************************************
/software/pk/bh/reportsBH	
/nmon/MEF/DATA   MEF

 gzip -d perf53.tar.Z   
gunzip onesydhnbu30.04.21.2016.output.tar.gz  

gunzip hmcScanner-0.11.0.zip.gz 
------------------------------------------------
su - oradb

sqlplus "/ as sysdba"

select status from v$instance;	

-----------------------------------------------------

for starting of proxy server

squid -N -d 1 -D
>filename
start squid
netstat -aAn |grep -w 3128
-------------------------------------------------------------	

wscansw process taking more CPU	
	
Hi Team	
	
As conveyed in various forums, new version of TAD4D (FP02) in installed in approx 800 servers to mitigate the high CPU usage of wscansw process. Please keep 	
track of any high CPU incident in which wscansw process is the mail culprit. Please take artifact of wscansw process taking more CPU with IP address of the 	
server and then kill that process. 	
_________________________________________________________	
Some times there are issue in getting snap.pax.Z file to desktop or any small file which need to be shared for analysis the issue 	
	
For e.g Snap -gc file of any server	
just copy the file from server to montool and run below command from montool	
	
sudo uuencode full_path_of_the_file_on_montool  full_path_of_the_file_on_montool | mailx -vs "subject line" mailid@in.ibm.com	
sudo uuencode /tmp/dfgh /tmp/dfgh | mailx -vs "10.14.7.40  " akraali1@in.ibm.com


download the packeges

http://www.perzl.org/aix/index.php?n=Main.Sharutils


---------------------------------------

Extracting the snap package

The pax command is used to extract files from the snap package.

    To view the contents of a snap package, type:

    # zcat snap.pax.Z | pax -v


    To extract the entire contents of a package, type:

     # zcat snap.pax.Z | pax -r


    To extract just the dump, general, and kernel subdirectories, type:

     #uncompress snap.pax.Z
     #zcat snap.pax.Z | pax -r ./dump ./general ./kernel
	
_______________________________________________________________	
 vi issueuser not able to vi

ls -ld /var/tmp/

root@SBLRFTADB02:/tmp]$ su unmgr007

$ bash
bash-3.2$ vi 543
bash-3.2$

solutaion:
chmod 1777 /var/tmp

__________________________________________________
    TL	

/ACTIVITY/SAND/SAND/aix_71_tl_00_1.iso       AIX 7.1 bas file       

loopmount -i aix_71_tl_00_1.iso -o "-V cdrfs -o ro" -m /var/opt/BESClient/aixmount d


/ACTIVITY/AIX6.1 	
/nmon/menu_output/AIX61_TL6_SP06	
/nmon/menu_output/AIX61_TL6_SP06	
/software/AIX61_TL07_SP04	
/nmon/NIM_PREP_MIGR/AIX_61_TL8_SP02

/ACTIVITY/SAND/SAND/AIX61_TL09_SP02   

/nmon/menu_output/AIX61_TL09_SP03         TL9	
/ACTIVITY/AIX61_TL09_SP04       TL9
/ACTIVITY/SAND/SAND/nim71
/ACTIVITY/SAND/SAND/nimnew71

	
missing file set for TL*	
/software/missing_AIX61_TL8	


/nmon/NIM_PREP_MIGR/GPFS3.4.26_new    for gpfs version
	

/ACTIVITY/shobhit/do_not_delete for snap gc
	
/home/smon/shekhar/lssecfix

hmc ip location
/home/amit/script/audit2013/hmcip	
-------------------------------------------------------------	
Net Backup	
/software/NetBackup_7.1_AIX64.tar	


/usr/openv/netbackup/bin/bpcd -standalone	to start the backup services



how to check backup running or not
[root@CNDACLBIDBDP03:/tmp]$ /usr/openv/netbackup/bin/bpps -a 
NB Processes
------------
    root 19628114        1  17 16:53:43      -  0:54 /usr/openv/netbackup/bin/nbsl
    root 29167642        1   0 16:53:41      -  0:01 /usr/openv/netbackup/bin/nbrmms
    root 29982852        1   0 16:53:37      -  0:00 /usr/openv/netbackup/bin/bpcompatd
    root 30027936        1   0 16:53:46      -  0:00 /usr/openv/netbackup/bin/nbsvcmon
    root 26562830        1   0 16:38:11      -  0:00 /usr/openv/netbackup/bin/bpcd -standalone -port 13782
    root 26718470        1   0 16:53:46      -  0:00 /usr/openv/netbackup/bin/nbcssc -a NetBackup
    root 23110400        1   0 16:53:28      -  0:00 /usr/openv/netbackup/bin/vnetd -standalone


MM Processes
------------
    root 24092904        1   0 16:53:36      -  0:00 vmd
    root 26005566        1   0 16:53:36      -  0:00 /usr/openv/volmgr/bin/ltid
    root 28516464 26005566   0 16:53:42      -  0:00 avrd
    root 29044798 26005566   0 16:53:40      -  0:00 tldd
[root@CNDACLBIDBDP03:/tmp]$ 




/usr/openv/netbackup/bin/bp.kill_all      kill the all backup process
-------------------------------------------------------------
	
ITM AGENT	
POWER 7 ITM agent fileset locaion 	
10.14.41.104:/software/itminstall/Gauarv/6.2.2-TIV-ITM_TMV-Agents-FP0004	
/software/itminstall/ITM6.2AIXAgent64Bit	
/software/itminstall/ITM6.2AIXAgent32Bit	
/software/itminstall/linux/lz_062100000_lpp266   for linux power series	
/nmon/menu_output/linux-projects/	
/software/itminstall/Gauarv/ux_062100000_aix526	
	
10.14.101.157      ITM server IP	
	
	
HACMP FILE set	
/nmon/menu_output/bosfile	
/nmon/menu_output/HA6fx 	
/nmon/menu_output/HA6 	
/software/PowerHA6.1SP12 
	
AIX patch location	
	
nmon/menu_output/Sep_Aix_patch_2013	
	
GPFS file set location	
/ACTIVITY/GPFS-34.0.8	
Please install GPFS with latest release (3.4.0.23) for any new configuration as well for any upgrades. Location of the GPFS release on montool server is mentioned below :
/nmon/NIM_PREP_MIGR/GPFS3.4.26_new       for gpfs version
Location : /software/GPFS3.4_withFixPack	
Release Dir : GPFS_FIX3.4.0.23	
	
	
	
	
HMC IP loaction	
10.14.41.104:/tmp/HMC_uniq	
	
BES	
/nmon/menu_output/aix_script/BES	
/nmon/menu_output/aix_script/BES/actionsite.afxm	
/nmon/menu_output/aix_script/BES/besclient.config	
/nmon/menu_output/aix_script/EP_Scripts_138.sh	
	
rsct	
Enter the IP File Name	
/nmon/ipfile/montool	
Enter the Command to be executed	
ls -lrt /software/rsct_full_amit	
	
/nmon/menu_output/aix_script/lssecfix	
/nmon/menu_output/aix_script/EP_Scripts_138.sh	
	
AIX patch location	
	
/nmon/menu_output/April_Aix_patch_2012/	
/nmon/menu_output/july-Aix-Patch2012	
/nmon/menu_output/August_Aix_Patch_2012	
/nmon/menu_output/September__Aix_Patch_2012	
/nmon/menu_output/November_Aix_Patch_2012	
/nmon/menu_output/December_Aix_Patch_2012	
/nmon/menu_output/September__Aix_Patch_2012/libodm_fix.tar	
/nmon/menu_output/September__Aix_Patch_2012/sendmail1_fix.tar	
/software/Feb_Aix_patch_2012--Invetory Scout	
/nmon/menu_output/August_Aix_Patch_2012--Openssl 1802 	
	
asm fix	
cd /nmon/gm/lssecpatch      for all lssecfix issue	
Path of this efix is (/software/ASM-efix) on montool	
	

----------------------------------------------------
Montool unix site is up and running again
10.14.41.104:3999
______________________________________________________________
reboot script	
Reboot_script	
/home/smon/Output/reboot_config_log   for Current	
/monitor/Outputs/RebootScriptMonthly/2012/December   for monthly


-----------------------------------------------------------------

System-Created File Systems in AIX
The six standard file systems in AIX Versions 5 and higher are /, /home, /usr, /proc, /tmp, and /var. Each of these file systems is always associated with a logical volume name:

Logical VolumeFile System or Description
------------------------------------------------------
hd1 /home    (users' home dir)   
hd2 /usr     (operating system commands, libraries and application programs)
hd3 /tmp     (temporary space for all users)
hd4 /        (critical files for system operations, programs that complete the boot process)
hd5 <boot logical volume>
hd6 <primary paging space>
hd8 <primary JFS or JFS2 log>
hd9var        /var     (variable spool and log files)
hd10opt       /opt     (freeware programs)
/proc         /proc    (pseudo fs kept in memory to support threads)

=====================================

In a JFS, the superblock is the first addressable block (and a backup at the thirty-first addressable block) on a file system. It is 4096 bytes in size. The superblock is very important because a file system cannot be mounted if the superblock is corrupted. This is why there is a secondary or backup superblock at block 31. The superblock contains the following: size of the filesystem, number of datablocks in the fs, state of the fs...

# dd count=1 bs=4k skip=31 seek=1 if=/dev/hd4 of=/dev/hd4     <--this will restore the superblock from block #31
# fsck -p <fs>        <--this will copy also the superblock from #31
==============================================================	

What command to show free major numbers?	
Ans	lvlstmajor
ls -ld /dev/rootvg    show the major and minir number of rootvg	
=============================================================
	
lsvg -o | grep -v rootvg | lsvg -li     show all lv of varryon vg except rootvg	
lsvg -o | grep -v rootvg      show all varyonvg except rootvg	
df -gt | awk '{print$6}'      show all mount point 	
lsvg -o | awk '{print$1}'     show all varry on vg	
lsvg -o | grep -v rootvg | awk '{print$1}'        show all varry on vg except rootvg
mkvg -y datavg -s64  hdisk0 hdisk1     to create normal VG	
mkvg -y datavg -s64 -V99 hdisk4        to create normal vg 	
mkvg -B -y datavg -s 128 -f -n -V 101 hdisk6     to create Big VG with  forcefully and disable The auto varryon, major number 101	
mkvg -S -y testvg -s 1 -f hdisk3 hdisk4 hdisk5 hdisk6 hdisk7     to create Scable VG	
-s = pp size	
-v= major number	
-f= forcefully 	
-n= set the flag auto varryon no (disable the auto varryon)	
	
	
crfs -v jfs2 -g datavg01 -m /home/northod/Airtel/Drive_Z -a size=2048G -A yes -a log=INLINE -a Attribute=4096 it will create the lv and file system	
mount /home/northod/Airtel/Drive_Z

mklv -y' WebSpherelv' -t'jfs2' -c'2' rootvg 40 hdisk0 hdisk4*create second copy websherelv on hdisk0 and hdisk4	
	
	
	
INLINE FILE SYSTEM WITH STRIPPING 3 DISK IN DEPT	
mkvg -y datavg -s 256 vpath1 vpath2 vpath3	
mklv -y data50_lv -t jfs2 -S 128K datavg  100 vpath1 vpath2 vpath3	
crfs -v jfs2 -d data50_lv -m /data50 -a log=INLINE	
chown -R dba:database /data50	
chfs -A yes /crmdb	
mount /data50	
	
	
INLINE FILE SYSTEM WITH STRIPPING 4 DISK IN DEPT	
mklv -y oradata152_N -t jfs2 -S 128K -C 4 VG_13_NEW 1080 hdisk1941 hdisk1932 hdisk1933 hdisk1942	
crfs -v jfs2 -d oradata152_N -m /oradata152 -a log=INLINE	
mount /oradata152	
chown -R oradb:dba /oradata152	
	
CREATE THE LV FROM MENU MONTOOL CREATE THE IP FILE AND RUN COMMAND FROM BULD COMMAND	
sudo mklv -y open_lv -t jfs2 rootvg 10	
sudo crfs -v jfs2 -d  open_lv -m /usr/openv -A yes	
sudo chown -R cyadmbkp:staff /usr/openv	
sudo mount /usr/openv	
	
CREATE THE LOG LV	
mklv -y loglv00 -t jfslog rootvg 1 hdiks1       create the log lv	
	
	
CREATE THE RAW LV	
mklv -y c05_bid08 -t raw -S128K VG_C05_HV1 20 vpath0 vpath1 vpath18 vpath19	
	
chown orabau:dba ra_media45_ab	
chown orabau:dba ra_media47_ab	
	
	
	
CREATE THE MIRROR THE LV	
mklv -t jfs2 -y webspherelv rootvg 80 hdisk2	
crfs -v jfs2 -d /dev/webspherelv -m /WebSphere -A yes	
mklvcopy webspherelv 2 hdisk3	
syncvg -v rootvg

mklv-y newpaging-t paging rootvg 10 hdisk0create paging space 
	
Rename mount point ********	
chfs -m /(New mount point) /(old mount point)	
chfs -m /newmoount /oldmount	
	
---------------------------------------	
rename the device
how to rename device

how to rename the hdisk	
rendev -l hdisk1 -n hdisk19	


rendev -l ent0 -n ent1       change the ent name
rendev -l en0 -n en1
rendev -l et0 -n et1


	
----------------------------------------	
lkdev -d hdisk10 -a       lock the disk	
lkdev -l hdisk10 -d       unlock the disk	
	
------------------------------------------------	
	
mklvcopy -k akramlv Numberofcopies hdiks2	
mklvcopy -k akramlv 2 hdisk7    create second copy of akram lv on hdisk7	
mklvcopy -k akram lv 3 hdisk7 & create third copy of akram lv on hdisk7	
rmlvcopy akramlv 3 hdisk7       remove the 3 copy of logical volume	
mirrorvg-c3 rootvg hdisk1 hdisk2         if you want 3 copy of rootvg then you  	
mirrorvg -S rootvg hdisk1       mirrorvg and syncvg in background	
	
	
syncvg-v rootvg       for syncvg  of Volume Group	
syncvg-p hdisk0 hdisk1for sync for PV to PV	
syncvg-l akramlv      synclv akramlv form hdisk0 to hdisk1	
	
exportvg testvg        export the volume group testvg,	
importvg -y testvg hdisk7        import volume group testvg	
importvg -V 99 -y testvg hdisk1  importvg with major number 	
	
	
	
How to migrate a LV from on PV to another?	
a)    migratepv <source disk> <destination disk>	
b)    migratepv-l <LV Name> <source disk> <destination disk>	
Ex:	
a)    Migrate data on hdisk5 to hdisk6	
#migratepv hdisk5 to hdisk6	
b)    Migrate the PPs of datalv from hdisk10 to hdisk20.	
#migratepv -l datalv hdisk10 hdisk20 ---> this will move the PPs of datalv from hdisk10 to hdisk20	
	
migratepv hdisk0 hdisk1         migrate data fromhdisk0 to hdisk1	
migratepv hdisk0(sourse disk)  hdisk1(distination disk) hdisk2   migrate data from hdisk0 to hdisk1 and hdisk2	
migratepv   -l akramlv hdisk0 hdisk1migrate Logical volume (akramlv) of hdisk0 to hdisk1  	
migratelp lv00/1 hdisk1 migrate first logical partitions of logical volume   lv00 to hdisk1	
migratelp hd2/3/2 hdisk5move second mirror copy of the third LP of LV hd2 to hdisk5   	
migratelp testlv/25/3 hdisk7/100to move third mirror copy of the 25th logic partitions of LV  	

migratepv -l lv_tanium hdisk2 hdisk3	
	
	
logform /dev/loglv01   clear the log lv( format the loglv)	
lsvg -l rootvg         show all lv of rootvg	
bootinfo -B hdisk1 or ipl_varyon-i        to find bootable device of the system	
chdev -l hdisk0-a pv=yes        Create the PVID 	
chdev-l hdisk0-a pv=clear      Clear the PVID	
lspv   or lsdev-Cc disk         list all PV on the system it shows PV name, pvid, volume group, state of pv	
lspv-l hdisk0         list all LV of Hisk0 its show lv name,  LPs, PPs,  Distribution and  Mount point 	
lspv-p hisk0      Display the allocation PPs to Logical volume.It shows pv name, pvid, pv state, stale part ion, pp size, total PPs, free PPs, used pp,  Free distribution, used distribution, vg, vgid, allocatable, LV, vgda, hot spare, max request.	
lspv-M hsik0  | more  display the relation of each PP and Logical Partition, It shows the Layout of PV	
chpv -ay hdisk0        enable the allocation permission	
chpv -an   hdisk0      disable the allocation permission	
chpv -vr    hdisk0     make the disk unavailable.	
chpv-va hdisk0        Make disk is unavailable. 	
chpv-hy   hdisk0      make disk hot spare	
chpv -hn hdisk0        Disable the hot spare 	
lsattr -El hdisk4      Display the character the Hdisk4	

lsattr -R -l ent0 -a media_speed                   check the availbe attibute
lsattr -El hdisk3|grep -i size_in_mb       Display the size of disk	
bootinfo -s hdisk0     Display the size of disk 	
chvg-ay rootvg        Enable the Auto Varryon the VG	
chvg-an rootvg        Disable the Auto Varryon the Vg	
chvg-Qy rootvg        Enable the Quorum the 	
chvg-Qn rootvg        Disable the Quorum 	
chpv -hy hdisk2        Design Hdisk2 as hot spare  	
chvg -hy rootvg        data will be copy from a failing disk to one spare disk (hdisk2)	
chvg -hY rootvg        data will copy from a falling disk to the entire pool of spar disks,	
chvg-hn  hdisk0       Disable the hot spare policy	
chvg -t 16 testvg      Change the maximum number PP  per pv in VG (1016*16)	
chvg-P 2048 rootvg    Change the Maximum number of PP per VG      (1016*4096)	
chvg -v 4096 testvg    changing the maximum number of logical volumes	
chvg -u rootvg         unlocking the Volume group (rootvg)	
chvg-sy rootvg        set the auto synchronization of vg	
chvg -sn rootvg        disable the auto synchronization	
chvg   -G datavg       Change Volume group form Normal VG to Big VG	
lqueryvg -Atp hdisk0   find the VGDA from ODM	
rvgrecover   it will solve inconsistency of rootvg the problem	
extendvg datavg hdisk1 Extend the volume group	
extendvg-f datavg hdisk1        Extend the volume group forcefully 	
smitty extendvg	
reducevg rootvg hdisk0 Reduce the vg	
reducevg -d testvg hdisk7        forcefully deleted the hdisk7	
reducevg -f testvg hdisk7        forcefully deleted the hdisk7	
synclvodm -v myvg      sync the vg	
chvg -L 128 testvg     to change the LTG size of VG (test VG)	
chpv-c hdisk0         clear the boot image	
ANS. Logical volumes provide applications with the ability to access data as though it was stored contiguously. A logical volume consists of a sequence of one or more numbered logical partitions. E	
How will you create logical volume?	
mklv -y lv3 -t jfs2 -a im datavg 10 hdisk5  	
we use the mklv command to create, within volume grouptest1vg, a logical volume named lv3, of type jfs2, having 10 logical partitions, located on located on thehdisk5.	
	
mklv -y lv4 -t sysdump -a c -e x -c3 -L demo-label -x5 test1vg 2 hdisk5 hdisk6 hdisk7	
we use the mklv command to create, within volume group datavg, a logical volume named lv5, of type jfs2, having three logical partitions, each having two pinned copies on different disks, read/write operations on the two disks being done sequential, write-verify being enabled, and I/O operations	
being serialized.	
	
getlvcb -AT lv1        how to display the LVCB of a logical volume	
rmlv lv7     prompts for user confirmation and then deletes lv7.	
rmlv -p hdisk7 lv1     delete partitions of lv1 located on hdisk7..	
lslv         display the all active file system	
lslv lv1     display details about a specific logical volumeit display the lv name,lvid,vgstate,type,max LPs, copies,LPs,stale PPs, Inter-policy,Intra-policy,mount point,mirror write consistency(MWC),vg name,pp size,lvste etc,	
lslv -l lv1  show the PV on where this logical volume on located,	
lslv -m lv1  show the logical partition and their corresponding  Physical partitions & it show the mirror copy of lv1	
lslv -n hdisk6 testlv  Display the VGDA of Logical volume.	
getlvcb -AT lv1        display the LVCB of a logical volume	
extendlv -a ie -ex akramlv 3 hdisk5 hdisk6   extend logical volume akram with three logical partitions	
extendlv lv05 3       extend the size lv05 with 3 PP	
extendlv lv05 10M     extend the size of lv05 with 10 MB	
cplv -v dumpvg -y lv8 lv1       copy logical volume lv1 to the dumpvg volume group under the  name of lv8:	
chlv -x 1000 -d pr akramlv      Changing maximum  Logical partition  1000 of the akram lv and SCHED POLICY: parallel/round robin	
chlv-d pr akramlv    Change the Schedule POLICY: parallel/round robin        	
chlv-x 100 akramlv   change the maximum LP of logical volume of akramlv	
splitlvcopy -y newlv akramlv 2   splits the akramlv under the new name newlv	
chlv -u 8 akramlv     upper bound
	
If single LV ODM fails?	
Then I will use the command	
synclvodm-l lvname vgname       If single LV ODM fails?	
	
	
How to list file system information?	
lsfs         list all FS in the /etc/file system entry	
lsfs /akramfsdisplay /akramfs detail	
lsfs   -a    list all file system (default)	
lsfs -q      it show the lv size, fs size, block size, sparse files: yes, inline   log: no, inline log    Size, EAformat:, Quota, DMAPI,, VIX of all file system	
lsfs-v jfs  List jfs all file system 	
lsfs-l      specify the output in the list format	
lsfs  -c     specify the output in the column format	
chfs   -m /akramfs    /newmnt        o     change the mount point of akramfs to newmtnt	
	
How will you create new LVCB ?	
lrecreatelvcb	
	
_____________________________________________________________________________________	
How to remove fileset from odm


1. Backup the odm
    # /usr/lib/instl/saveodms
2. Remove from /usr/lib/objrepos
    # export ODMDIR=/usr/lib/objrepos
    # odmget -q name=<fileset_name> lpp  -> take note of the     "lppid#"
    # odmdelete -q name=<fileset_name> -o lpp
    # odmdelete -q lpp_name=<fileset_name> -o product
    # odmdelete -q lpp_id= <lppid# from above> -o history
    # odmdelete -q lpp_id= <lppid# from above> -o inventory

3. Remove from /etc/objrepos
    # export ODMDIR=/etc/objrepos
    # odmget -q name=<fileset_name> lpp  -> take note of the "lppid#"
    # odmdelete -q name=<fileset_name> -o lpp
    # odmdelete -q lpp_name=<fileset_name> -o product
    # odmdelete -q lpp_id= <lppid# from above> -o history
    # odmdelete -q lpp_id= <lppid# from above> -o inventory
4. Run lppchk -v to confirm the filesets are no longer an issue. 
	
*******************************HA Dril*******************************************************	
Please find the HACMP fail over testing steps:	
	
Take Reboot script to save the current configuration :	AIX Tream
	
Shutdown active Node1 (IP : ) using HMC and take relevant artifact :AIX Team
Release to DB2 after doing the OS sanity check of HA failover and after taking relevant artifacts  : AIX Team	
Test DB is working from Passive Node (IP ) and take the relevant artifacts : DB2 team	
Down the DB and confirm to AIX team for fall back to active node : DB2 Team.	
Start cluster on Active node (IP ) for resources fall back to active node :	AIX Team
check the reboot script and release to App / Db team. : AIX Team	
	
	
Shutdown active Node2 (IP : ) using HMC and take relevant artifact :AIX Team
Release to DB2 after doing the OS sanity check of HA failover and after taking relevant artifacts  : AIX Team	
Test DB is working from Passive Node (IP ) and take the relevant artifacts : DB2 team	
Down the DB and confirm to AIX team for fall back to active node : DB2 Team.	
Start cluster on Active node (IP ) for resources fall back to active node :	AIX Team
check the reboot script and release to App / Db team. : AIX Team	
----------------------------------------------------------------------------------------------------	
Command to put dummy load

give more that 30 time so it will give dummy load on the server

dd if=/dev/random of=/dev/null &

==============================================================

ping test


for i in `cat`
> do ping -c 2 $i
> done
172.30.150.32
172.30.150.325
172.30.150.324


then ctrl D


PING 172.30.150.32: (172.30.150.32): 56 data bytes

--- 172.30.150.32 ping statistics ---
2 packets transmitted, 0 packets received, 100% packet loss
PING 172.30.150.35: (172.30.150.35): 56 data bytes

--- 172.30.150.35 ping statistics ---
2 packets transmitted, 0 packets received, 100% packet loss
PING 172.30.150.34: (172.30.150.34): 56 data bytes

--- 172.30.150.34 ping statistics ---
2 packets transmitted, 0 packets received, 100% packet loss
$ 
-------------------main HACMP-------------------------------------
Solution1

last time follow below issue it fixed we dont need to reboot as well

export CAA_FORCE_ENABLED=1   ; 
clusterconf -fu 
clusterconf -p
clusterconf -r hdiskpower9


==============================================
Solution 2
caa vg issue

Prevention Plan :- 

01) make sure there is good connectivity to repository disk ie. hdiskpower6
lquerypv -h /dev/hdiskpower6 80 10 < make sure it returns pvid
(looks good since vg is in active state, but please verify)

02 ) caavg needs to re create on same node6

rmdev -dl cluster0
reboot
clusterconf -r hdiskpower6

this should recreate caavg and will make cthags active , please verify
then
03) start the cluster

Please revert for further clarifications.

=================================================================
HACMP 7.1
	
startsrc -g cthags
lssrc -g caa
================================


reset the password form ha node
[root@CNDAiB2BDBDP01:/usr/es/sbin/cluster/utilities]$ ./clpasswd -g  unmgr007
Changing password for "unmgr007"
unmgr007's New password:
3004-657 Terminating from signal
=======================================================================


Cluster verification check and alert script

Author: Mohankumar Gandhi,  Client: Kaiser Permanente,   Ver: 1.1,  Recent update: 24th Jul 17

Update:
Whenever we are working with the cluster verification incidents (Eg: Cluster verification ran with the error or Cluster verification did not run today). 
1. Check the time-stamp of the /var/hacmp/clverify/clverify.log file, 
2. Check any recent activity that stopped or restarted "clcomd", if it is then manually run "/usr/es/sbin/cluster/utilities/clupdatetimers".
Above command will re-initiate the “Automatic cluster verification” to it's default schedule of 00:00 hrs.
Note: It is a software bug and APAR is avaiable to fix this issue, http://www-01.ibm.com/support/docview.wss?uid=isg1IV75036 
12:22:13 PM: vsodavar@in.ibm.com - Vinod K Sodavaram/India/IBM: nzapap103 :#HCF --- cluster verification issue 
nzapap114 :#HCF --- cluster verification issue
nzapap124 :#HCF --- cluster verification issue 
nzapap158 :#HCF --- cluster verification issue 
nzapap160 :#HCF --- cluster verification issue 
==========================================================================

-------------------------------------------------------------
diskhb
heartbeating

1. on one node set receiving::
/usr/sbin/rsct/bin/dhb_read -p hdisk10 -r

2. on the other node set transmit:
/usr/sbin/rsct/bin/dhb_read -p hdisk12 -t
 
dhb_read -p rvpath0 -r <--Note: That the device name is raw device as designated with the "r" proceeding the device name.
---------------------------------------------------------------

add the vg on HACMP  HA 6.1

how to add one vg on cluster
1- all lun should be share on both node & create normal vg on node 1
2- export the vg one node and impor the vg on node2 on same majore & auto vary on should be disable for vg and import agin on node1
3- add the vg on RG1 on node 1 and node2
4- smitty hacmp -> Extended Configuration -> Extended Verification and Synchronization . 
After the successfully Synchronization cluster is ready to start. 
================================================================================
clextend

Add the vg in cluster
on active node u need to go to the below path
cd /usr/es/sbin/cluster/cspoc

/usr/es/sbin/cluster/cspoc/cli_extendvg <vg_name> <disk_name> 

/usr/es/sbin/cluster/cspoc/cli_chfs -a size=+300G /epic/sdshd08
/usr/es/sbin/cluster/cspoc/cli_chfs -a size=+300G /epic/sdshd16

extedn the file system size
ksh -x /usr/es/sbin/cluster/cspoc/cli_chfs -a size=+xMB /FSNAME

====================================================================

How to show and change the cluster log director
#smit hacmp>System Management (C-SPOC)>HACMP Logs>Change/Show a Cluster Log Directory
  or 
HACMP services:

Status of the RSCT subsystems used by HACMP:
Subsystem         Group  PIDStatus
 topsvcstopsvcs   inoperative
 grpsvcsgrpsvcs   inoperative
 grpglsmgrpsvcs   inoperative
 emsvcs emsvcs    inoperative
 emaixosemsvcs    inoperative
 ctrmc  rsct   7995562      active

Status of the HACMP subsystems:
Subsystem         Group  PIDStatus
 clcomdES         clcomdES         9437200      active
 clstrmgrES       cluster6094914      active

Status of the optional HACMP subsystems:
Subsystem         Group  PIDStatus
 clinfoES         cluster   inoperative
----------------------------------------------------------
2- 

./clshowres     it show the Complete resource group configuraiton	
./clshowres  -g  RG1      it will show the RG1 informaion	
./cllsgrp       it show the all RG name	
./clRGinfo      it show the RG status	
./get_local_nodename      it show the Local node name	
./cltopinfo     it will show the toplogy information ( show the Boot ip and stand IP)	
./clnodename    it will show the all node of cluster 	
./cllsserv      it will show the app server name  and start/stop script path	
./clconfig      show the cluster ODM	
./clgetif       show the interface name IP, Netmask, of node	
./cllsdiks -g RG1         show the PVID of shared Hard disk	
odmget HACMPlogs
	
     	
	
./cllscf	  To list clustur topology information
./cllsclstr	 To list the name and security level of the cluster
./cllsnode	 To list the info about the cluster nodes
./cllsnode -i node1 To list info about node1	
./cllsdisk -g shrg To list the PVID of the shared hard disk for resource group shrg	
./cllsnw	 To list all cluster networks
./cllsnw -n ether1 To list the details of network ether1	
./cllsif	 To list the details by network adapter
./cllsif -n node1_service To list the details of network adapter node1_service
./cllsvg	 To list the shared vgs which can be accessed by all nodes
./cllsvg -g sh1         To list the shared vgs in resource group sh1	
./cllslv        To list the shared lvs 
./cllslv -g sh1       To list the shared lvs in the resource group sh1
./cllsdisk -g sh1       	         To list the PVID of disks in  the resource group sh1
./cllsfs	 To list the shared  file systems 
./cllsfs -g sh1         To list the shared file systems in the resource group sh1	
./cllsnim	  Show info about all network modules
	
logs	
/tmp/hacmp.outDetailed event script output logged in 7 day rolling 
	
history	
/var/adm/cluster.log	High level view of cluster events (No clean up on this file)
/usr/sbin/cluster/history/cluster.mmdd	    Day by day view of cluster events. (one file / day of month)
/tmp/cm.logClstrmgr messages
/tmp/cspoc.logOutput from C-SPOC commands (similar to smit.log)
/tmp/emuhacmp.out	Output from event emulation
rdist  -b -f  /etc/disfile1	  To distribute the files in disfile1 to all nodes in disfile1 in 
	
tail -f300	/var/hacmp/log/hacmp.out
binary mode	
clstart -m -s -b -i -l  To start cluster daemons (m-clstrmgr, s-clsmuxpd,b-broadcast message, -i-clinfo, -l cllockd)
clstop -f -N  To force shutdown cluster immediately without releasing	
	
 resources	
clstop -g -N  To do graceful shutdown immediately with no takeover	
clstop -gr -N  To do graceful shutdown immediately with takeover	
cldare  -t	To sync the cluster toplogy
cldare -t -f  To do the mock sync of topology	
cldare -r	To sync the cluster resources
cldare -r -f  To do the mock sync of resources	
clverify	cluster verification utility
cllsnim -n ether Show info about ether network module	
cllsparam -n node1  To list the runtime parameters for the node node1
cllsserv	 To list all the application servers
claddclstr -i 3 -n dcm  To add a cluster definition with name dcm and id 3
claddnode   To add an adapter	
claddnim  To add network interface module	
claddgrp -g sh1 -r cascading -n n1 n2	 To create resource group sh1 with nodes n1,n2 in cascade
claddserv -s ser1 -b /usr/start -e /usr/stop	Creates an application server ser1 with startscript as   
  /usr/start  and stop script as /usr/stop	
clchclstr -i 2 -n dcmds  To change cluster definitions name to dcmds and id to 2
clchclstr -s enhanced  To change the clustur security to enhanced
clchnode         	 To change the adapter parameters	
clchgrp	  To change the resource group name or node relationship
clchparam         To change the run time parameters (like verbose logging)	
clchserv	      To change the name of app. server or change the start/end scripts
clrmclstr	         To remove the cluster definition
clrmgrp -g sh1  To delete the resource group sh1 and related resources	
clrmnim	ether To remove the network interface module ether
clrmnode -n node1    To remove the node node1
clrmnode -a node1_svc  To remove the adapter named node1_svc
clrmres -g sh1   To remove all resources from resource group sh1	
clrmserv  app1  To remove the application server app1	
clrmserv ALL  To remove all applicaion servers	
clgetactivenodes -n node1To list the nodes with active cluster manager processes from cluster  
   manager on node node1	
clgetaddr node1  returns a pingable address from node node1	
clgetgrp -g sh1  To list the info about resource group sh1	
clgetgrp -g sh1 -f nodes    To list the participating nodes in the resource group sh1
clgetif	To list interface name/interface device name/netmask associated with
	  a specified ip label / ip address of a specific node
clgetip sh1  To get the ip label associated to the resource group	
clgetnet 193.9.200.2  255.255.255.0	       To list the network for ip 193.9.200.2, netmask 255.255.255.0
clgetvg -l nodelv        To list the VG of LV nodelv	
cllistlogs	        To list the logs
clnodename -a node5 To add node5 to the cluster
clnodename -o node5 -n node3	         To change the cluster node name node5 to node3
clshowres  Lists resources defined for all resource group	
clfindres	To find the resource group within a cluster
xclconfig   X utility for cluster configuration	
xhacmpm    X utility for hacmp management	
xclstat	  X utility for cluster status




HACMP	
	
lssrc -s clcomdES 	
lssrc -ls clstrmgrES	
	
smitty bffcreate	
	
	
/home/hacmp/ha_monitors/notify.failover.out   for hacmp failover alert	
	
HACMP file set	
	
/nmon/menu_output/bosfile 	
/nmon/menu_output/HA6fx 	
/nmon/menu_output/HA6 	
manisku4@in.ibm.com - Manish Kumar39/India/IBM: /nmon/menu_output/HA6fx 	
/nmon/menu_output/HA6  	
	
1:21:27 PM: akramali@in.ibm.com - Akram Ali/India/Contr/IBM: both we need to copy	
1:21:32 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: /nmon/menu_output/HA6   installp exclude nfs and hativoli 	
1:21:44 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: smit update_all /nmon/menu_output/HA6fx 	
1:21:53 PM: akramali@in.ibm.com - Akram Ali/India/Contr/IBM: ok	
1:22:07 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: /nmon/menu_output/bosfile 	
1:22:13 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: base file set os 	
1:22:16 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: bos.clvm	
1:22:20 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: bos.data	
1:22:31 PM: manisku4@in.ibm.com - Manish Kumar39/India/IBM: bos.adt install from this 
===================================================================
ha 7.1 issue

IBM given below task after the cluster come in stabl state
ACTION TAKEN: with the last data I could see that clRGinfo is not 
working with clrsh because it is not on the $PATH. To prove this, just
observe that AIX date command works. I reviewed the data I have since
beginning of Dec/2015 and noticed a pattern that cl_rc.cluster is 
exiting with "RC: 130" on node 318. (I have noticed that before, but not
the pattern that repeats over and over). So the focus right now will be
debugging C-SPOC (yes, cl_rc.exit is a C-SPOC). So please go to node 318
and follow this:
.
#script /tmp/70665,101,616_script_`hostname`_v0_cspoc_rccluster.out
#date
#clrsh riomelh216 date
#clrsh riomelh216 /usr/es/sbin/cluster/utilities/clRGinfo
#clrsh riomelh318 date
#clrsh riomelh318 /usr/es/sbin/cluster/utilities/clRGinfo
#export VERBOSE_LOGGING=high                                           
#_DEBUG=9 _SPOC_FORCE=Y /usr/es/sbin/cluster/cspoc/fix_args nop cl_rc.cluster -N -cspoc-n "riomelh318" -A -b                                            
#lssrc -ls clstrmgrES
#errpt -a
#ps -ef
#exit
- upload the file /tmp/70665,101,616_script_`hostname`_v0_cspoc_rccluster.out

Isac R Silva
PowerHA DSS - Level 2
Austin - USA


#script /tmp/70665,101,616_script_`hostname`_v0_cspoc_rccluster.out
#date
#clrsh riomelh216 date
#clrsh riomelh216 /usr/es/sbin/cluster/utilities/clRGinfo
#clrsh riomelh318 date
#clrsh riomelh318 /usr/es/sbin/cluster/utilities/clRGinfo
#export VERBOSE_LOGGING=high                                           
#_DEBUG=9 _SPOC_FORCE=Y /usr/es/sbin/cluster/cspoc/fix_args nop cl_rc.cluster -N -cspoc-n "riomelh318" -A -b                                            
#lssrc -ls clstrmgrES
#errpt -a
#ps -ef
#exit
- upload the file /tmp/70665,101,616_script_`hostname`_v0_cspoc_rccluster.out
==================================================================================
AIX Log


/var/adm/authlog	Contains the messages generated by the authorization system, including the sshd, login and su commands. Eg: Cipher errors.	Can be see it by using tail or cat command (cat /var/adm/authlog)	SSH, FTP authentication issues.
/var/adm/daemon.debug	Contains messages generated by system daemons, such as ftpd and the telnetd daemons	Can be see it by using tail or cat command	System daemon related issues.
/var/adm/semlog	Contains all the facility details (Eg: Kernal, User process, System daemon, authorization, syslog, printer)	Contains most of the information to troubleshoot.	Kernel, user process, system daemon, user authentication related issues.
/var/adm/wtmp		"logs can be converted by a text file below command & can be readable for trouble shooting 
#/usr/sbin/acct/fwtmp < /tmp/wtmp.1 > wtmp1.file"
/var/log/servername.osbackup.log	Contains the status of OS Backup.	Eg: cat /var/log/ktazd216.osbackup.log (grep the words FAIL, SUCCESS, SCP)	Weekly OS backup related
/var/adm/ras/altinst_rootvg.log	Contains the details of the alternate disk installation of rootvg	Eg: cat /var/adm/ras/altinst_rootvg.log	Alternate disk OS installation.
/var/adm/ras/alt_disk_inst.log	Contains the information about the weekly alt_disk backup.	Eg: cat /var/adm/ras/alt_disk_inst.log	Weekly alternate disk backup related
/var/adm/cron/log	Contains the information about the cronjob execution status.	Eg: cat /var/adm/cron/log	Cron job related issues.
/audit/trail	In KP “audit” is used in bin mode data, it is written in binary format and is generally considered the preferred way if you want to collect and keep the audit event records over a long period.	"Eg: /usr/sbin/auditpr -v < /audit/trail | pg
(Available from AIX 6.1)"	Server audit related information.
/var/adm/ras/diag_log	Contains information about the system's diagnostics report.	"Displays previous diagnostic results.   
To view the short version of the diagnostic event log: /usr/lpp/diagnostics/bin/diagrpt -r
To list all previous diagnostic result files since 27th OCT 2017: /usr/lpp/diagnostics/bin/diagrpt -s 102717"	"Check the status of the device's diagnostic report (Sample output),
ID     DATE/TIME            T RESOURCE_NAME    DESCRIPTION
DA00   Thu Feb 02 01:36:20  N fcs1             No Trouble Found
DC00   Thu Feb 02 01:36:20  I diag             Diagnostic Session was started
DA00   Mon Jan 23 22:26:29  N fscsi1           No Trouble Found
DA00   Mon Jan 23 22:26:29  N fscsi0           No Trouble Found"
/smit.log	Contains all users smitty activity logs	Eg.  cat /smit.log	
/var/adm/wtmp	It is a small database, which logs all logins, rlogins and telnet sessions and used to read by the command last.	"To display all the recorded logins and logoffs by user root or from the console terminal, type:
# last root console

To display the time between reboots of the system, type:
# last reboot

To display all the users still logged in at 10.30 am on April 15th, enter:
# last -t 04151030
"	"Old logs can be converted as a text file by  below command & can be readable for trouble shooting, 
# /usr/sbin/acct/fwtmp < /tmp/wtmp.1 > wtmp1.file"
/var/adm/ras/emgr.log	APAR / EFIX related logs	# cat /var/adm/ras/emgr.log	Efix/APAR installation status.
/var/adm/ras/nimsh.log 	can be used for NIM server connectivity troubleshooting	# cat /var/adm/ras/nimsh.log 	Issue during NIM server and Client communication.
/var/adm/sulog	su user logs	# cat /var/adm/sulog  	“su” login tracker.
/var/adm/ras/bootlog	This file records the LED codes displayed on the front of the machine	alog -t boot -o | more	Server boot time related messages, Server hung while boot.
/var/adm/ras/bosinst	These messages were generated when the system was installed	alog -t bosinst -o | more	During server installation
/var/adm/ras/nim	Network Install Manager messages 	alog -t nim -o | more	NIM based installation messages
/var/adm/ras/console	Messages sent to a virtual console device	alog -t console -o | more	Check the historical information of the console reported.
/var/adm/ras/cfglog	Output of the plug-and-play cfgmgr utility 	alog -t cfglog -o | more	
/var/adm/ras/lvmcfg	The status of the lvmo utility. This manages logical-volume performance.	alog -t lvmcfg -o | more	LVM related issues.
/var/adm/ras/dumpsymp	Information about system dumps created.	alog -t dumpsymp -o | more	To check the status of recent sysdump.
/var/hacmp/log/hacmp.out	Contains the messages of the RG move operation 	Search for “EVENT FAILED” messages. These messages indicate that a failure has occurred. Then, starting from the failure message, read back through the log file to determine exactly what went wrong.	Cluster events like, Node Up/Down, Network Up/Down, Resources and Resource Group status
/var/hacmp/log/cl_event_summaries.txt	Contains the consolidated messages of the RG move operation (HACMP Event Summary)	Search for “Event” messages. These messages indicates the list of the Events along with the Start time and End time.	
/var/hacmp/adm/cluster.log	Contains the details of the events that have occurred	"cat /usr/es/adm/cluster.log |grep ' EVENT ' |more

From these log entries you can see what events have completed and failed, generally you will look out for 'config_too_log', EVENT FAIL or events that have not completed. As all events that have a START should also follow in the log at some point with a COMPLETED, else this indicates a problem too. Once you have picked any problem you might have you can use these as a key to look further into this log."	
/var/hacmp/clverify	Contains the success/failure status of the cluster verification	Check the timestamp of the file, If it is not with 00:00 hrs last night then cluster verification is not happening. We should get an incident for this since it was covered under monitoring script.	When we received “Cluster Verification” failed incident.
/var/ha/log/topsvcs.##.###.clustername log	To check the Heartbeat network status.	This log file is obsolete from HA 7.1	During any network issue between the cluster nodes.
/var/hacmp/log/clstrmgr.debug	"Contains general “Cluster Manager” failures. 
Status of the Application Monitor existence."	cat /var/hacmp/log/clstrmgr.debug	Clstrmgr (Cluster Manager) service related issue.
/var/hacmp/log/cspoc.log	Contains information about the activities along with it's status which are performed through CSPOC (Covering both smitty and CLI)	cat /var/hacmp/log/cspoc.log |egrep -p "FAIL|ERROR"|more	When CSPOC operation failed.
/var/adm/ras/syslog.caa	To check the status of the repository disk	cat /var/adm/ras/syslog.caa  (Available from AIX 7.1)	Cluster aware AIX related messages


===========================================================================
pvid issue on ha
PVID issue on cluster
Hi buddies,

I had a very unknown issue while configuring HA7.2  on nzapie14/15 . I had a successfully created a Caavg while I sync with repository and after completing complete cluster configuration I re-ran sync then I got a PVID miss match  between odm HACMPsircol  and PVID on disk . I followed bellow steps to resolve it .Thought to share this with all of you so that you can share with your team members .

Please follow below steps While configuring HA7.2 cluster if you face any issue with repository disk pvid.
reference link https://www.ibm.com/developerworks/community/forums/html/topic?id=57c87b06-5f9f-4942-a3e6-a0ec91948201

run below command to see what is updated in ODM 
# odmget HACMPsircol                                         

HACMPsircol:
        name = "oppr_scal_HA72GA_sircol"
        id = 0
        uuid = "0"
        ip_address = ""
        repository = "00c32e050e79060f"
        backup_repository = "00c32e050e90926d"
root@nzapie15 / > 
# 

first compare the PVID of backup repository disks and backup_repository = "" o/p from "odmget HACMPsircol"

If any difference  run below commands by changing desired values .

perl -e 'print pack("H*","00c32e050e90926d");' > /tmp/pvid   ->> backup_repository = "00c32e050e90926d"

chdev -l hdiskpower18 -a pv=clear

cat /tmp/pvid | dd of=/dev/hdiskpower18 bs=1 seek=128 ->  backup repository disk

rmdev -dl hdiskpower18

cfgmgr

verify the PVID of backup repository disks on both nodes and odmget HACMPsircol(primary node) -> if you confirm match then go with next steps 

smit hacmp -> problem determination tools ->  Replace the Primary Repository Disk -> change the repo disk to backup 

now you see caavg move to backup repository disk and you will also observe pvid change in "odmget HACMPsircol" for backup_repository(current pvid of backup repository disks).


Please let me know if you guys have a better approach ..also excuse me if any mistakes as this is my first email with tech notes.

____________________________________________________________	
	
lsvg | xargs -I {} varyonvg {} >>>>>>>>>>>>>>>>.this command for vary on the all VG	
	
lsvg -o|grep -v rootvg|lsvg -li|grep -i closed        show the all closed filesystem	
	
________________________________________________________	
ep script	
./EP_Scripts_138.sh -c 2	
____________________________________________________________	
How to set command history if bash installd	
	
set -o vi	
	
	
	
********************dump*********************************	
When a system dump occurs, all of the kernel segment that resides in real memory is dumped (the kernel segment is segment 0). 	
Memory resident user data (such as u-blocks) are also dumped.	
How to enable sysdump true	
sysdumpdev -K  	
mklv -y lg_dumplv -t sysdump rootvg 2 	
	
EXAMPLE 2	
----------	
	
1- first check sysdumplv 	
   # lsvg -l rootvg	
2- check free pp	
   #lsvg rootvg | grep i FREE	
# extendlv lv_dumplv 4         increase 4 pp in lv_dumplv	
     or	
#extendlv lv_dumplv 10M        increased  10 MB  of lv_dumplv 	
	
	
How you check default-paging space?	
# sysdumpdev-l	
 How you change default dump device	
# sysdumpdev-Pp  /dev/akrampaging 	
#extendlv lg_dumplv 4  (extendlv lvname incremnet_in_ PP'S)


sysdumpdev -z      it show the current dump size
sysdumpddv -e      it show the estimated dump size


sysdumpdev -L  Check the dump staus  

# sysdumpdev -L


Device name:         /dev/hd7
Major device number: 10
Minor device number: 11
Size:                7680 bytes
Uncompressed Size:   10230232 bytes
Date/Time:           Fri Dec  9 10:27:43 2016
Dump status:         -3
dump crashed or did not start
root@nzapps10 / >
#
$
Connection to nzapps10 closed.
$

----------------------------------------------------------------------

[sas@g2404auplcap007 ~]$ DISPLAY=3.241.162.143:0.0

[sas@g2404auplcap007 ~]$ export DISPLAY

[sas@g2404auplcap007 ~]$ /usr/bin/xclock

Error: Can't open display: 3.241.162.143:0.0

 



-----------------------errpt-----------------------------------

error log
Solution:
1. Stop errdaemon
# /usr/lib/errstop
2. Remove /var/adm/ras/errlog
#  ls -l  /var/adm/ras/errlog
-rw-rw-r--   1 root     system  0 Mar 09 13:40 /var/adm/ras/errlog
# rm /var/adm/ras/errlog
3. Restart errdaemon
# /usr/lib/errdemon
4. Now errpt is normal.
	
	================================
	
	 The actual file in which error entries are stored is configurable; the default is /var/adm/ras/errlog. That file is in a binary format and so should never be truncated or zeroed out manually. The errlog file is a circular log, storing as many entries as can fit within its defined size. A memory buffer is set by the errdemon process, and newly arrived entries are put into the buffer before they are written to the log to minimize the possibility of a lost entry. The name and size of the error log file and the size of the memory buffer may be viewed with the errdemon command:


     [aixhost:root:/] # /usr/lib/errdemon -l 
     Error Log Attributes 
     -------------------------------------------- 
     Log File                 /var/adm/ras/errlog 
     Log Size                 1048576 bytes 
     Memory Buffer Size       8192 bytes

The parameters displayed may be changed by running the errdemon command with other flags, documented in the errdemon man page. The default sizes and values have always been sufficient on our systems, so I've never had reason to change them.

Due to use of a circular log file, it is not necessary (or even possible) to rotate the error log. Without intervention, errors will remain in the log indefinitely, or until the log fills up with new entries. As shipped, however, the crontab for the root user contains two entries that are executed daily, removing hardware errors that are older than 90 days, and all other errors that are older than 30 days.

     0 11  *  *  * /usr/bin/errclear -d S,O 30
     0 12  *  *  * /usr/bin/errclear -d H 90
=================================
		
	
***********Pagin space**********************************	
   Paging space:	
What is paging space?	
Ans:   The system use real memory as work space and keep all inactive data and program on a disk. The area of disk that contain this data is called system paging space. When the amount of free of real memory in system low then inactive data and program are moved from real memory to paging space to release real memory for other activities.	
	
 monitoring command of paging space.	
  1-vmsta    2-topas    3-vmo-a 	
	
lsps-a (list all paging space)	
lsps   -s         ( list the summary of total active page space)	
lsps  -ac         ( is show ps name, pv name, size, used, active etc)	
mkps -ans 20 rootvg hdisk1   for creating the paging lv	      Akram working
mklv -y newpaging -t paging rootvg 10 hdisk0       Or	
Smitty mkps 	
rmlvcopy pagging00 1 hdiks   remove second copy from hdisk1	
	
How will you create paging space?	
mkps -s 10 rootvg hdisk0      Or	
	
	
How you increase and decreased the paging space?	
chps -s 2 akrampgaing      ( add 2 PP in akrampgaing)	
chps -d 2 akrampgaing      (reduce 2 pp in akrampgaing) 	
chps -ay akrampgaing       (Auto start at startup time)	
chps -an akrampgaing        (disable Auto start at startup time     	
 Or 	
smitty chps	
How will you activate (disable & enable) and deactivate the paging space?	
swapon-a activate all paging space	
swapon   /dev/akrampgaing    activate the paging space	
swapoff   /dev/akrampgaing   Disable the paging space	
	
How you check default-paging space?	
sysdumpdev-l	
How you change default dump device	
sysdumpdev-Pp  /dev/akrampaging 	
	
	
How you recreate default paging space on AIX 5.3.0 and above	
------------------------------------------------------------	
	
First I will check my paging space is mirrored or not by running the	
# lslv -m hd6	
PV1 PV2	
hdisk0 hdisk1	
If it is mirrored, then we will need to break the mirror by running the	
#rmlvcopy hd6 1 hdisk1	
#lslv -m hd6 (Now it should only show one copy)	
PV1	
hdisk0	
After it create new paging space by running the	
   # mkps -s 10 -a rootvg 	
  or	
      #mklv-y paging00-t paging rootvg 10 hdisk2	
 after it check the paging  space by running 	
#lsps-a	
 Activate the temporary paging space:	
swapon /dev/akrampaging 	
after activate the paging space change entry in /sbin/rc.boot	
   Swapon  /dev/hd6	
To 	
    Swapon  /dev/akrampaging 	
 save the file	
 After it check the default paging space by the	
#sysdumpdev -l 	
 If the primary  device is hd6 change it to some other paging space by running the  command	
#sysdumpdev -Pp /dev/akrampaging 	
Then deactivate the hd6 by running the 	
#swapoff /dev/hd6	
After it delete the hd6 by running the 	
#rmps hd6 	
After it create the hd6 as desired space by running the command	
#mklv -y hd6 -t paging rootvg 10 hdisk0	
 After creation Activate paging space, hd6:	
swapon /dev/hd6	
chps -a y hd6 	
Open the file /sbin/rc.boot for editing.	
   swapon /dev/akrampaging	
 To	
    Swapon /dev/hd6	
After it check all paging space by running	
#lsps -a 	
Deactivate and remove temporary paging space:	
#swapoff /dev/akrampaging	
#rmps akram/paging	
If you broke the mirror to hd6 in Step 1, then replace the mirrored copy.	
For example:	
#mklvcopy hd6 2 hdisk1	
#lslv -m hd6	
PV1 PV2	
hdisk0 hdisk1 	
	
	
	
How you move the hd6 (paging space) to another disk	
#migratepv -l hd6 hdisk0 hdisk1	
*************passwordless*********************************	
ssh without passwordless	
Go to the user path( for root /, for smon /home/smon).	
mkdir .ssh	
touch authorized_keys	
ssh-keygen -t rsa( it will create id_rsa.pub file.)	
cat id_rsa.pub	
vi authorized_keys (paste the content in this file, we have to do this activity for all  servers so that in all servers having same authorized_keys file. )	
chuser rlogin=true root	
cd /etc/ssh	
vi sshd_config (PermitRootLogin yes)	
ps -ef|grep sshd	
# kill -9 <PID>	
# refresh or stop and start services # refreshsrc-s sshd
# 

password less issue

if any issue come after it check owenership of the below file
ls -al /.ssh
cd /.ssh
ls -al 
all file shuold be under root:system

it will fix
chmod 700 /.ssh
chmod 644 /.ssh/authorized_keys

	
stopsrc -s openssh;startsrc -s openssh
	
su - unmgr007	
mkdir .ssh	
cd .ssh	
root@CNDBWRLTAPZT03 ~]# chmod 700 /home/unmgr007/	
[root@CNDBWRLTAPZT03 ~]# chmod 700 /home/unmgr007/.ssh/	
[root@CNDBWRLTAPZT03 ~]# chmod 700 /home/unmgr007/.ssh/authorized_keys 
or 
chmod 600 /home/unmgr007/.ssh/authorized_keys 	
or 
chmod 644 /home/unmgr007/.ssh/authorized_keys
[root@CNDBWRLTAPZT03 ~]#	
ssh-keygen -t rsa	
ls -ltr	
cat id_rsa.pub	
touch authorized_keys	
copy the id_rsa.pub content into  authorized_keys	

password less from montool
 	
if [ `lsuser unmgr007|wc -l` -eq "1" ]; then if [ `cat /home/unmgr007/.ssh/authorized_keys|grep -w unmgr007@montool|wc -l` -eq "1" ]; then cat /etc/sudoers|grep -w "User_Alias ADMIN"|grep -w "unmgr007"; else mkdir /home/unmgr007/.ssh; echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA69ONsbQM6Wb/+8CgRxPonp9SRCCYxSQVmLfZdL8AcvglDtxdSGkvvWDOft4LY7xMqn2/jH7yPVOtQF6svKKFzU3CEDoazfSWpvNuur/ztikf2ZLf1HCI9+qerfcLv2Wx37gNKP2qKAMQ77opzGCcob94NHMF9e9vLnI2wwwySVE1rdefZVX9NVQ/I9DLDojjnAbvuLpGyt3L54aVlVL1NpTAjhXdSOhqZN2xZIw+iJ3LZ79wwn+QoW3LnedOmnZWLzaXzu0YsrL8Hg2i02msfO/8iRR452D9Khee2XznHmk+v46Ks/BVZvLOTd29zhHZxkSumB3RLHCUNF4C7Lq41Q== unmgr007@montool">>/home/unmgr007/.ssh/authorized_keys; chown -R unmgr007:staff /home/unmgr007; cat /etc/sudoers|grep -w "User_Alias ADMIN"|grep -w "unmgr007"; fi; else mkuser unmgr007; mkdir /home/unmgr007/.ssh; echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA69ONsbQM6Wb/+8CgRxPonp9SRCCYxSQVmLfZdL8AcvglDtxdSGkvvWDOft4LY7xMqn2/jH7yPVOtQF6svKKFzU3CEDoazfSWpvNuur/ztikf2ZLf1HCI9+qerfcLv2Wx37gNKP2qKAMQ77opzGCcob94NHMF9e9vLnI2wwwySVE1rdefZVX9NVQ/I9DLDojjnAbvuLpGyt3L54aVlVL1NpTAjhXdSOhqZN2xZIw+iJ3LZ79wwn+QoW3LnedOmnZWLzaXzu0YsrL8Hg2i02msfO/8iRR452D9Khee2XznHmk+v46Ks/BVZvLOTd29zhHZxkSumB3RLHCUNF4C7Lq41Q== unmgr007@montool">>/home/unmgr007/.ssh/authorized_keys; chown -R unmgr007:staff /home/unmgr007; cat /etc/sudoers|grep -w "User_Alias ADMIN"|grep -w "unmgr007"; fi	
	
chmod 755 /home/unmgr007	
chmod 755 /home/unmgr007/.ssh
chmod 755 /home/unmgr007/.ssh/authorized_keys 	
******	
	
---------------------------------------------------------------	
linux	
	
su - unmgr007	
mkdir .ssh	
	
echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA69ONsbQM6Wb/+8CgRxPonp9SRCCYxSQVmLfZdL8AcvglDtxdSGkvvWDOft4LY7xMqn2/jH7yPVOtQF6svKKFzU3CEDoazfSWpvNuur/ztikf2ZLf1HCI9+qerfcLv2Wx37gNKP2qKAMQ77opzGCcob94NHMF9e9vLnI2wwwySVE1rdefZVX9NVQ/I9DLDojjnAbvuLpGyt3L54aVlVL1NpTAjhXdSOhqZN2xZIw+iJ3LZ79wwn+QoW3LnedOmnZWLzaXzu0YsrL8Hg2i02msfO/8iRR452D9Khee2XznHmk+v46Ks/BVZvLOTd29zhHZxkSumB3RLHCUNF4C7Lq41Q== unmgr007@montool">>/home/unmgr007/.ssh/authorized_keys	
echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvQHucEjRuAVrw57bWDvBfnAZVBBKuOWltGU4rXw9nvZsTyfzkfJ/438j+feyZdwS0BsB20hT5I/7WJfKnmF7wi4+YJGL6gHg7zqOYbyxAa/cIhIbbTqg2co2qMqxcka43H+6vRKriO4bZg7ibCkCkm3TgwCP4q5NQYjzKDChyV59cu/vrsdXK8wsiDw+0noSB6hf95EEKkAPkdiCzXJCDFSl9o6W7vLTvKoImKhnY+bW0Pa75PRyq4EhpKoY2UrPMS+u3bhCn9R0Yk4D3CPpsMba4C3S2wpi6tJ4oQJ6KU3f0zzRugFp7xAT6IGVMHu3scOnj843u1fjfHjEN2po+w== unmgr007@cndadctlapzm01.airtel.in">>/home/unmgr007/.ssh/authorized_keys	
	
chmod 700 /home/unmgr007/.ssh/authorized_keys	
chmod 700 /home/unmgr007/.ssh	
chmod 700 /home/unmgr007	

************************unzip******************************
	
Unzip 	
 gzip -d perf53.tar.Z

----------------------cdrom-------------
how to mount cd
mount cd rom
# lsdev -l cd0     to check the cd rom    availabe or not
cd0 Available 08-08-00 SATA DVD-RAM Drive
# 

crfs -v cdrfs -p ro -d cd0 -m /mnt -A no
mount -v cdrfs -r /dev/cd0 /mnt 

mount -v udfs /dev/cd0 

loopmount -i aix_71_tl_00_1.iso -o "-V cdrfs -o ro" -m /var/opt/BESClient/aixmount       loop mount iso base iamge
--------------------------------------------------------------
rsh issue
# rsh czabnm1 date
Permission denied.
root@czabnm1 / >

# vi .rhosts
root@czabnm1 / >
#  rsh czabnm1 date
Mon Feb 11 21:49:27 PST 2019
root@czabnm1 / >
# rsh czapie31 date
Mon Feb 11 21:49:38 PST 2019
root@czabnm1 / >
# cat .rhosts
+
root@czabnm1 / >



=========================================
rsh issue

3. change the permission for below files to 4555
4. /usr/sbin/rshd
5. /usr/bin/rlogin
6. /usr/bin/rsh
7. /usr/bin/rcp
8. Rshd,rlogin   should be  enabled in  inetd.conf for remote login

shell stream tcp6 nowait root /usr/sbin/rshd rshd
#kshell stream tcp nowait root /usr/sbin/krshd krshd
login stream tcp6 nowait root /usr/sbin/rlogind rlogind


9. Run refresh -s inetd
10. Create .rhosts file in  / and add the nim server name in it.

permission 644 for .rhosts


rhost client side


szabnm3.ssdc.kp.org root
szabnm1.ssdc.kp.org root


rhost nim server  side

szapap79 root

hosts entry nim server side

# cat /etc/hosts | grep -i szapap79
172.30.196.119  szapap79.ssdc.kp.org szapap79
root@

clinet side
# cat /etc/hosts | grep -i szabnm1
172.30.192.65 szabnm1.ssdc.kp.org   szabnm1
root@szapap79 / >


niminit -a name=izaqwb4 -a master=czabnm3 -a connect=shell

how to create niminfo from client side, need to run this command from client
niminit -a name=izaqwb4 -a master=czabnm3 -a connect=nimsh
===================================================================

foglight

/apps/foglight/Quest_Software/Foglight_Agent/bin/fglam --stop
/apps/foglight/Quest_Software/Foglight_Agent/bin/fglam/fglam --start


/apps/ptadm/Quest_Software/Foglight_Agent_Manager/bin/fglam --stop
/apps/ptadm/Quest_Software/Foglight_Agent_Manager/bin/fglam --start
======================================================================



1- login on nim & clinet
2- uncommnet shell & login from /etc/inetd.conf
3- refresh -s inetd
4- create .rhost
cd /
vi .rhosts
+
save the the file
5- rsh nim date & rsh clinetlpar date
6- lspv | grep -i free disk
7- check the rootvg lv name, it should be maximum 11 characher
8- check the blv & bld should be bos_hd
9- put the /etc/hosts entry on client & nim server side
10 - define the clent machine on nim
smit nim
11- check the cat /etc/niminfo file on lpar

cat /etc/niminfo
if details is not correct then recreate the niminfo by below command

if using the shell protocol then run below command
niminit -a name=izaqwb4 -a master=szabnm3 -a connect=shell

if using the nimsh protocal then use below command
how to create niminfo from client side, need to run this command from client
niminit -a name=izaqwb4 -a master=czabnm3 -a connect=nimsh

10 run the nimadm command it will upgrade 

nimadm -c nzapie62 -l lpp_AIX_72TL1SP4_v1-s spot_AIX_72TL1SP4_v1 -j cachevg -d hdisk178 -BY



Log location:

/var/adm/ras/alt_mig/szapie15_alt_mig.log

=======================================================================

To migrate the mksysb, from 5.3 to 6.1:

First create mksyskb resource of old os 5.3

nimadm -T osbkp_220_O(name of mksysb) -O /software/MIGRATION/osbkp_220_61 (New Image) -s SOPT_AIX6100-TL08_SP02 -l AIX61_TL8_SP2_lpp -j nimadmvg -Y -N osbkp_220_N (New Resource)

nohup /usr/sbin/nimadm -T 231_53 -O /software/MIGRATION/231_61 -s SOPT_AIX6100-TL08_SP02 -l AIX61_TL8_SP2_lpp -j nimadmvg -Y -N 231_61>10.92.1.231.nohup.out &


nohup /usr/sbin/nimadm -T 91_132_5_3 -O /var/opt/BESClient/91_132_61 -s SOPT_AIX6100-TL08_SP01 -l AIX61_TL8_SP1_lpp -j rootvg -VDY -N 91_132_61>10.14.91.132.nohup.out &     akram

nohup /usr/sbin/nimadm -T CNDAAGRCAPZP02_61 -O /var/opt/BESClient/CNDAAGRCAPZP02_61n -s SOPT_AIX6100-TL08_SP01 -l AIX61_TL8_SP1_lpp -j rootvg -i CNDAAGRCAPZP02_image -YVD -N CNDAAGRCAPZP02_61n >10.5.128.227.nohup.out &       with image.data if any file system issue is there



nohup /usr/sbin/nimadm -T 214_53 -O /software/MIGRATION/214_61 -s SOPT_AIX6100-TL08_SP02 -l AIX61_TL8_SP2_lpp -j nimadmvg -Y -N 214_61>10.92.2.214.nohup.out &

nohup /usr/sbin/nimadm -T 226_53 -O /nim/226_61 -s SOPT_AIX6100-TL08_new -l AIX61_lpp_new -j nimadmvg -Y -N 226_61>10.92.1.226.nohup.out &
nohup /usr/sbin/nimadm -T 1092152_53 -O /software/MIGRATION/1092152_61 -s SOPT_AIX6100-TL08_SP02 -l AIX61_TL8_SP2_lpp -j nimadmvg -Y -N 1092152_61>10.92.1.52.nohup.out &
 
=========================================================================
nimadm issue
8. Common Issues and Troubleshooting :

Issue 1 (Error Code : 0505-205 ) : 

While executing nimadm command you might receive error stating “bos.alt_disk_install.rte” fileset level and NIM master’s level does not match.







Solution :

Check if any of the lppsource have 7.1.2.16 or respective version of bos.alt_disk_install.rte version of fileset available by using the below command

# lsnim –t lpp_source  To find available lppsource

# nim –Fo showres lppsource_name|grep –i bos.alt_disk_install.rte 
 To check if the respective fileset is available in lppsource

# nim -o cust -a filesets=bos.alt_disk_install.rte -a lpp_source=lpp_source spot_name
 To update fileset available in lppsource to the spot required for installation



Issue 2  (Error Code 0505-155,  0505-156 ) : 

While executing nimadm command you might receive an error stating /etc/niminfo of client does not match NIM master’s database .

Solution :

Client is configured with a different NIM Master server – login to client , remove /etc/niminfo and re-configure nim master for it.

# cp /etc/niminfo /etc/niminfi.bkp
# rm /etc/niminfo
# smitty niminit  Update mandatory fields to configure respective NIM server


Issue 3  (Error Code : 0042-001, 0042-001, 0042-175 ) : 

0042-001 nim: processing error encountered on "master":
0042-001 m_bos_inst: processing error encountered on "master":
0042-175 c_ch_nfsexp: An unexpected result was returned by the
       "/usr/sbin/exportfs" command:
        exportfs: 1831-186
/export/images/ not found in /etc/exports


Solution :

The problem is caused due to manual made entries in the /etc/exports file on the master and a NIM design change in AIX 6.1, so lets NIM make all required exports or set NFS Export Performance to no in order to get the old pre-AIX 6.1 NIM export behaviour.

"export NFS_EXPORT_PERFORMANCE=no" 

Issue 4  (Error Code : 0505-157) : 


Issue: 0505-157 nimadm: Error nfs mounting alt_inst filesystems
NFS fsinfo failed for server tlnim002.swna.wdpr.disney.com: error 7 (RPC: 1832-010 Authentication error)

Solution :

nfso -o nfs_use_reserved_ports=1


Issue 5  (Error Code : 0505-159) : 

0505-159 nimadm: WARNING, unexpected result from remote command to tlnim002.

Solution :

Verify for any extra default route entry in netstat -rn output at client machine. If anything, remove it with the following command

lsattr -El inet0 ---> look for extra added route.
chdev -l inet0 -a delroute="route value"   ----> to remove


Issue 6  (Error Code : 0505-177) : 

Executing nimadm phase 5.
+-----------------------------------------------------------------------
Saving system configuration files.
/usr/bin/lslpp: No such file or directory
0505-177 nimadm: An unrecoverable error has occurred during pre-install
processing.

Solution :
-----------------------------------
Set fsize = unlimited in nim client.

Issue 7  (Error Code : 0505-187) : 

Executing nimadm phase 1.
+-----------------------------------------------------------------------------+
Cloning altinst_rootvg on client, Phase 1.
Client alt_disk_install command: alt_disk_copy -M 6.1 -P1 -d "hdisk2"
/ALT_MIG_SPOT/sbin/alt_disk_copy[1364]: /ALT_MIG_SPOT/lpp/bos.alt_disk_install/bin/altlib:  not found
0505-187 nimadm: Error cloning altinst_rootvg on client.
Cleaning up alt_disk_migration on the NIM master.
Cleaning up alt_disk_migration on client npaxa229.
Client alt_disk_install command: alt_disk_install -M 6.1 -X
ksh: /ALT_MIG_SPOT/sbin/alt_disk_install: cannot execute
0505-192 nimadm: WARNING, cleanup may not have completed successfully.

Solution :

rsh to nim client works fine
exportfs --> lppsource was mounted manually
nim -Fo reset <client>
nim -o deallocate -a subclass=all <client>
mv /etc/exports /etc/exports_save
touch /etc/exports
chmod 644 /etc/exports
exportfs -ua
exportfs -va

NFS cleanup procedure
# stopsrc -g nfs
# stopsrc -s portmap
# cd /etc
# rm -rf rmtab xtab
# cd /var/statmon
# rm -rf sm sm.bak state
# startsrc -s portmap
# startsrc -g nfs

===> start nimadm again ==> now it works!
Issue 8  (Error Code : 0505-193) : 


Verifying alt_disk_migration eligibility.
0505-193 nimadm: The client, ocaan002, is TCB enabled.
You must either disable TCB, use disk-caching,
or perform a conventional migration.
Cleaning up alt_disk_migration on the NIM master.
0042-001 nim: processing error encountered on "master":
exportfs: 1831-189 tlnim002.swna.disney.com: unknown host


Solution :

Execute the below command in the NIM client:

odmget -q attribute=TCB_STATE PdAt |sed 's/tcb_enabled/tcb_disabled/'|odmchange -o PdAt -q attribute=TCB_STATE




Issue 9  (Error Code : 1831-008, 0505-196) : 


Environment:aix 5.3
Problem:0505-196 nimadmin

1831-008 giving up resource..a file access permission do not allow the specified action.
 mount: 1831-011 acess denied for nim
 server:/export/nim/lpp_source/lppsource_AIX53_6108
 0505-196: nimadm error mounting resource on client..cleaning up.


Solution :

refreshed NFS on the master:
# mv /etc/exports /etc/exports.old
# touch /etc/exports
# exportfs -ua
# stopsrc -g nfs
# cd /etc
# rm -rf xtab state sm sm.bak rmtab
# cd /var/statmon
# rm -rf state sm sm.bak
# startsrc -g nfs
# exportfs ==> nothing exported
# nim -Fo reset <client>
# nim -o deallocate -a subclass=all <client>

Issue 10

# tail -f300 izaqwb4.nohup.out
Initializing the NIM master.
Initializing NIM client izaqwb4.ivdc.kp.org.
root@czabnm3 /mksysbfs >
# tail -f300 izaqwb4.nohup.out
Initializing the NIM master.
Initializing NIM client izaqwb4.ivdc.kp.org.
nconn: connect() failed, errno is 79
izaqwb4.ivdc.kp.org: Connection refused
0505-159 nimadm: WARNING, unexpected result from remote command
to izaqwb4.ivdc.kp.org.
0505-153 nimadm: Unable to execute remote client commands.
Cleaning up alt_disk_migration on the NIM master.

Solution:

1-Change the protocal from shell to nimsh of the machines


2- create the niminfo on client by running this command on clinet

niminit -a name=izaqwb4 -a master=czabnm3 -a connect=nimsh



--------------------------------------------
lsnim -l 'network name'
the master primary interface is wrong..
.
also verify name resolution
must be all the same ie all shortname or all fully qualified name.
name resolution is OK

changed the network definition for master
.
# smitty nim_rmmac
removed the nim client we are trying to nimadm.
# rm /etc/niminfo   (still on master)
# nimconfig -r     rebuilt the /etc/niminfo file on the master.
Then, on the client, i had him run niminit to recreate the client:
# smitty niminit
OK

Excuted nimadm again and this time it worked without any error. 


 ====================================================================
 
 http://aix4admins.blogspot.in/2011/08/booting-from-nim-when-nim-client-is.html   HOW TO CONFIGURE NIM
--------------------------------------------------------------

During the mapping of disk in VIO Server, if getting following error

Cannot perform the requested function because the 
parent "hdisk57" of the specified device does not exist.

Steps to resolve:

rmdev -Rdl diskname
cfgmgr -v
Map again	
	
**************************************************************	
bosboot-ad hdisk0     create or update the boot record	
bootlist-o normal hdisk0 hdisk1 set the boot list
*****	**********************************************************	
Q	command to list supported processors
A	#pmlist-l
Processors supported (specify with -p)	
Err:510	
PowerPC604     	
PowerPC604e    	
RS64-II        	
POWER3         	
***************************************************************	
	
How to reboot verbose

	verbos reboot       

How to reboot server in verbos reboot
	
	
1. On GUI HMC Activate Logical Partition - Advanced popup window, click "Open Firmware OK Prompt" from the Boot Mode drop down list.
2. On ssh console session window, wait for the Open Firmware prompt "0>"
enter the command "boot -s verbose " at 0>prompt
it will boot the server and gives you the completed detail including the LED reference code.

http://www-01.ibm.com/support/docview.wss?uid=isg3T1019037 
sriramoh@in.ib...

################GIAMMA INTEGRATION ##################
tdiuser intigration	
	
chmod 754 /home/tdiuser/	
mkdir -p /home/tdiuser/.ssh	
chmod 754 /home/tdiuser/.ssh	
touch /home/tdiuser/.ssh/authorized_keys	
echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA3Z6SzoyjXnOoXnvFDATz/ENUXJcqOyumi1K4k53/WzCE8R5SvvA8Uyh8A/H4g/fGj6hG3ERW1Qwr+MZKp5XJT3zI27AYaTQbV01zo9WGNGDIfsxv5BHXia9FVg+Co37IKF/Cvoe9hKCvdczlzvlbkAWqCd09ZeSf0veF8daxHnEoKP+eRDPPtJSGhxAn1WR001Yq/tlbU38zem7PX7vsu4p3gG1EJDrj4A5jlq9YmAFg1UlIji7CTL1998MmVgz90CltvRLb/D4rPoydx/ACf0X5miJEkkFwjA4RvQrrufqhAsp6s9itjWilVOvAMz6nw444+a/h7d3yZ5RxORVnfw== tdiuser@CNDACENBAPZP17">/home/tdiuser/.ssh/authorized_keys	
	
chown -R tdiuser.staff /home/tdiuser 	
	

	
#################tad4d installation process#################	
	
sh  /home/amit/script/tad4d/tad4dnew1.sh	
	
or	
	
	
/home/amit/script/tad4d/TADAgentsIF08/aix)       file set path	
Unix:	
1. Download the agent binaries from the link - https://w3-connections.ibm.com/wikis/home?lang=en#!/wiki/TAD4D%20Engagement%20Packs/page/TAD4d%207.2.2%20Agents%20Installation%20Files . On this link, download the Required Agent binary as per OS by going to the "attachments" section. Copy this binary in "/tmp"	
2. De-compress\Extract the above binary if it is compressed	
	
	
3. Copy the following response file in "/etc" directory :  	
4. Create a directory in /tmp : "/tmp/certificates"	
5. Copy the following certificate file in the "/tmp/certificates/" Directory  :  	
	
	
6. Navigate to "/tmp" and run the following commands to install the agent as per OS:	
	 - AIX:
	  installp -acgX -d ILMT-TAD4D-agent-7.2.2.28-aix-ppc ILMT-TAD4D-agent   
	
	 - AIX WPAR:
	  installp -acgX -Or ILMT-TAD4D-agent
	
	 - Linux:
	  rpm -Uhv ILMT-TAD4D-agent-7.2.2.2-linux-<platform>.rpm
	
	 - HP-UX:
	  swinstall -s <ABSOLUTE_PATH_TO_INSTALLER_FILE>/ILMT-TAD4D-agent-7.2.2.2-hpux ILMT-TAD4D-agent:/<INSTALL_PATH>
	
	 - Solaris:
	  pkgadd -d ILMT-TAD4D-agent-7.2.2.2-solaris-<platform> ILMT-TAD4D-agent
	 
7. Set the priority of the TAD4d Agent as low:	
Navigate to "/opt/tivoli/cit/bin/" and run the following:	
/opt/tivoli/cit/bin/wscancfg -s hwscanner.changepriority low	
/opt/tivoli/cit/bin/wscancfg -s swscanner.changepriority low	
/opt/tivoli/cit/bin/wscancfg -s fscanner.changepriority low	
/opt/tivoli/cit/bin/wscancfg -s vpdscanner.changepriority low	
/opt/tivoli/cit/bin/wscancfg -s wscanuse.changepriority low	
/opt/tivoli/cit/bin/wscancfg -s wscannet.changepriority low	
	
8. Check if the agent is successfully connecting to the server and send the out put of the same back to me for verification in Server console:	
/opt/itlm/tlmagent -p	
	
	
	
/home/smon/mandeep/7.2.2-TIV-ILMT-TAD4D-FP0002-agent-linux-ppc	
/home/smon/mandeep/7.2.2-TIV-ILMT-TAD4D-FP0002-agent-linux-x86	
	
------------------------------------------------------------

tad4dagent installation:

/home/amit/script/tad4d]$ sh tad4dnew.sh

To check status details:

for i in `cat miga`; do y=`ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo /opt/itlm/tlmagent -p`; if [ "$y" = "CODAG010I The command has successfully executed." ]; then echo "$i:Agent Running"; else if [ `ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo /opt/itlm/tlmagent -p 2>/dev/null|wc -l` -eq "0" ]; then echo "$i:Agent Not Installed"; else echo "$i:Agent Not Running";fi;fi; done

Agent Installation: Manual
for i in `cat mig9a`; do echo $i; ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo date; if [ $? -eq 0 ];then ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo chfs -a size=+256M /tmp;scp -rp /home/amit/script/tad4d/stdas_scanner_aix/ $i:/tmp; ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo /tmp/stdas_scanner_aix/bin/stdas_scanner.sh ;else echo $i "is not accessible" >>/home/amit/script/tad4d/failed_ip;fi;done


y=`ssh -o BatchMode=yes -o ConnectTimeout=5 $i sudo ls -lrt /tmp/stdas_scanner_aix/logs|awk -F " " '{print $9}'`	
  	
***************************************************************	
How will you check the inode?	
istat    /etc/passwd   display information regarding a particular inode	
	
*******************************************************************************	
	
/nmon/menu_output/MKUSER_issue	
	

Issue :- After Migration mkuser command is not running
Resolution:-
1) Transfer the below Directory from the montool to the servers /tmp directory
File Loacation on Montool : - /nmon/menu_output/MKUSER_issue 
scp -r /nmon/menu_output/MKUSER_issue  <<serverIP>>:/tmp
2) On server do the below steps:
cd /tmp/MKUSER_issue
cp mkuser.sys /usr/lib/security/
cp mkuser.default /usr/lib/security/
chmod 750 /usr/lib/security/mkuser.sys
chmod 640 /usr/lib/security/mkuser.default
ln -s /usr/lib/security/mkuser.sys /etc/security/mkuser.sys
ln -s /usr/lib/security/mkuser.default /etc/security/mkuser.default
3) Very below link file shuld be created and mkuser command should Run
ls -ld /etc/security/mkuser.sys
lrwxrwxrwx    1 root     security         28 Jun 02 2010  /etc/security/mkuser.sys -> /usr/lib/security/mkuser.sys
ls -ld /etc/security/mkuser.default
lrwxrwxrwx    1 root     security         32 Jun 02 2010  /etc/security/mkuser.default -> /usr/lib/security/mkuser.default

______________________________________________________________	
RSCT (Reliable Scalable Cluster Technology)	
RISC (Reduced Instruction-Set Computer)	
	
---------------------------------------------------------------	
check lspv | head	
alt_disk_install -W hdisk2	
alt_disk_install -S hdisk3	
alt_disk_install -X altinst_rootvg   remove the altinst_rootvg

alt_disk_install -S -t hdisk3  sleep the & it will refresh boot image
	
if we need to tar or untar from old rootvg  then run the below command	
	
tar cf - .| ( cd /IBM/ITM;tar xpvf - )   ====>both tar untar run this command after waking up altvg


---------------------------------------------------------------
 genrate the code for root password 
 
reset the root password with below commonad and copy below code on /etc/security/passwd
[root@CNDASSFZAPWP20:/tmp]$ openssl passwd
Password: 
Verifying - Password: 
ELFCHqc9H28OE
	
**********************tar untar***********************	
	
tar cf - .| ( cd /osbkp/;tar xpvf - )   ====>both tar untar run this command after waking up altvg	
	
	
tar -cvf  software.tar /software	
tar -xvf software.rar     it will restore the software.tar file into /sotware directory 


--------------------------------------------------
tar cf - .| ( cd /oradata_n;tar xpvf - )   ====>both tar untar run this command after waking up altvg 

tar cvf - .
creates a tar archive of the current directory and sends the output to stdout

|
redirects the output to the following command

( )
opens a subshell in which

cd /root/; tar xvf -
is executed: changes to directory /root and unpacks the tar archive that is read from stdin  
	
**************Default memory setting in OS 6.1**********	
lru_file_repage = 0	
maxclient% = 90	
maxfree = 1088	
maxperm% = 90	
maxpin% = 80	
minfree = 960	
minperm% = 3	
strict_maxclient = 1	
strict_maxperm = 0	
************************RESTORE_BACKUP*************************	
restore -xvf osbkp.<HOSTNAME> ./image.data (Restore image.data from osbkp)
	
/usr/sbin/alt_disk_install -d '/software/osbkp.CNDAUNOCDBOP01' -P'all' -i '/software/image.data'   '-V'  hdisk1>> errors 2>&1 &	

:%s/search_string/replacement_string/g   (change valur in vi file)	
	
========================================================================


run remote

runremote

1- cd /home/akram/.ssh
vi config
then paste below content

host *
PreferredAuthentications publickey,password

2- vi .profile & paste below command

alias v='sshpass -p "Kaiser1!" ssh -t -o StrictHostKeyChecking=no -l padmin'
alias sp='sshpass -f /users/h416685a/akp scp -q -o StrictHostKeyChecking=no -rp'
alias s='sshpass -f /users/h416685a/akp ssh  -t -o StrictHostKeyChecking=no'

3- vi /users/h416685a/akp  & paste your password here

How to do run remote

create script like

vi fcs_new.sh

pbrun su -
df -gt 
lsdev -c adapter 

then creat server ip file


$ for i in `cat list`; do cat fcs_new.sh | v -q  $i;done >>/users/h416685a/akram_scripts/microcodestatus.log

Note: v for vio & s for server




	
________________________________________________________________	
	
nohup scp -pr 10.96.6.21:/osbkp/10.96.6.21_osbkp.SBLRSESEAPZP01 /osbackup3/SEMKSYSB &	
***********************************************************************************************	
ssh_exchange_indentification 	
	
There are some issues reported specially for DB2 server where ssh_exchange_indentification error is reported while taking the backup parallelly . Though ssh connection works fine when you check login to the server or take the backup sequentially . 	
	
This issue occurred because of the limited concurrent ssh connections . To change the concurrent ssh connections limitations follow the below given steps : 	
	
	
Take a backup of /etc/ssh/sshd_config file  	
Uncomment MaxStartups parameter and change it value to 200 in /etc/ssh/sshd_config file. 	
To make the value effective , restart the sshd . 	
	
stopsrc -s sshd ; startsrc -s sshd 	
---------------soft link & hard link------------------------------------------------ 
How do I create soft link / symbolic link?

For example create softlink for /webroot/home/httpd/test.com/index.php as /home/vivek/index.php, enter the following command:	

ln {source} {link}  or ln -s {target-filename} {symbolic-filename} 
Where,

  - source is an existing file.
  - link is the file to create (a hard link).
 
 ln -s /webroot/home/httpd/test.com/index.php /home/vivek/index.php


How to create the hard link

#ln -f /dev/rhdisk1 /dev/ipldevice

________________________________________________________________	
	
Note:	
If the hardware is 32-bit, then you can only have a 32-bit kernel. You cannot have a 64-bit kernel. If the hardware is 64-bit, then you can have either a 32 or 64-bit kernel.	
To switch between a 32-bit and 64-bit mode at the operating system level on AIX 5.3:	
	
When you install the operating system, go to Additional features and specify 64-bit mode. (The default is 32-bit mode.) To switch from 32-bit mode to 64-bit mode, use the following commands: 	
	
# ln -sf /usr/lib/boot/unix_64 /unix	
# ln -sf /usr/lib/boot/unix_64 /usr/lib/boot/unix	
# bosboot -ad /dev/ipldevice	
# shutdown -Fr	
# bootinfo -K The kernel is now in 64-bit mode.	
	
To switch from 64-bit mode to 32-bit mode, use the following commands:	
	
# ln -sf /usr/lib/boot/unix_mp /unix	
# ln -sf /usr/lib/boot/unix_mp /usr/lib/boot/unix	
# bosboot -ad /dev/ipldevice	
# shutdown -Fr	
# bootinfo -K The kernel is now in 32-bit mode.	

---------------memory command--------------------------
amepat
	
----------migration------------------------------------

nohup /usr/sbin/nimadm -j nimadmvg -c DSIRPREPAPZP09 -s SOPT_AIX6100-TL08_SP01 -l AIX61_TL8_SP1_lpp -d hdisk0 -e exclude_rootvg -VDY>10.116.1.123.nohup.out &

	
***************************************************************	
	
devices.sdd.52.rt
Steps for SDD to SDDPCM version upgrade	
	
Step 1: Remove SDD drivers 	
1) Unmount all the filesystems and varyoff all the volume group.	
2) Stop the sddsrv subsystem " stopsrc -s sddsrv ".	
3) Remove all the hdisk & vpath of storage from server using "rmdev -Rdl hdisk" command.	
4) Remove the SDD vpath devices using the  "rmdev -dl dpo -R " command .	
5) Remove the following fileset from server using "smit install_remove"	
   devices.sdd.53.rt	
   devices.fcp.disk.ibm.rte	
   ibm2105.rte(Remove the dependent fileset also)
	
Step2: SDDPCM package installation 	
1) Copy the sddpcm fileset on server from montool (path -- /ACTIVITY/SDDPCM61_DS8K on 10.14.41.103)	
2) Install the sddpcm fileset on server.	
3) Run cfgmgr –v.	
	
1.Check reboot script of the NIM client. While checking reboot script please check all the mount points of rootvg has same amount data as it was before migration. If some of the mount points are blank, then inform Application/DB team to restore the backup. 	
2.If reboot check is clean, release the server to Application /DB team.	
	
	
installp -ug devices.fcp.disk.ibm.mpio.rteremove the packages
	
To remove sddpcm from a server having only storage disks

vi /usr/lpp/devices.sddpcm.53/deinstl/devices.sddpcm.53.rte.pre_d 

enter exit 0 at the top of the file and then try to remove sdd 
	




-----------------------------------------------------------

The objective of this procedure is to upgrade the SDD drivers on SDDPCM drivers . Its multipathing software and the difference you will notice after upgrade on SDDPCM that all your "vpaths" will be converted into "hdisks" .

Note : If you are upgrading the SDDPCM on the HACMP cluster and disks in hacmp resouces are from SDD then you need ot synchonise the cluster after upgrade on SDDPCM as vpaths will be changed to hdisks.



Step 1 : Remove SDD drivers 

Stop all the applications running on the server . If its HACMP node , stop the HACMP cluster  
Unmount all the filesystems and varyoff all the volume group 
Stop the sddsrv subsystem " stopsrc -s sddsrv " .
Remove the SDD vpath devices using the  "rmdev -dl dpo -R " command . It  will remove all the vpaths device along with its paths e.i hdisks . 
Uninstall the SDD package 

Package name : devices.sdd.53.rte 

Ensure that all the SDD packages are uninstall from the server by using "lslpp -l |grep -i sdd ". 


Step 2 : Removing SDD Host Attachment from an AIX host system

Check the type of the storage , in most cases it DS8300 whose type  is 2107 . You can check it with lsdev -Cc disk . 
Remove hdisk devices using the following command 
	lsdev -C -t 2107* -F name | xargs -n1 rmdev -dl
Verify that the hdisk devices are successfully removed using the following command:
	lsdev -C -t 2107* -F name
Uninstall the SDD Host Attachment package and their dependent if any .
	ibm2105.rte 
	devices.fcp.disk.ibm.rte

Step3 : SDDPCM package installation 

SDDPCM package is available on montool server in /software/ directory . scp these files on the target server and install them all . 
You can verify your currently-installed version of SDDPCM by issuing  the following command:
	lslpp -l *sddpcm* 
	
--------------------------------------------------	
FOR MEF 	
for i in `cat ipfile`	
do	
scp iam_extract_global.ksh smon@$i:/tmp/	
ssh $i "/usr/bin/sudo chmod 750 /tmp/iam_extract_global.ksh"	
ssh $i cat /etc/sudoers > ./sudoers	
ssh $i nohup ksh -v /tmp/iam_extract_global.ksh -f ./sudoers &	
done	
------------------------------------------------------
Genrate mef

unmgr007@montool:/home/smon/akram/BH]$ cat generatemef.sh
rm -rf /nmon/MEF/DATA/*
for i in `cat /home/smon/akram/BH/IPFILE` 
do
scp /home/smon/akram/BH/iam_oracle_extract.ksh $i:/tmp/. 
ssh -o BatchMode=yes -o ConnectTimeout=5 -qf $i sudo /tmp/iam_oracle_extract.ksh 
done 
[unmgr007@montool:/home/smon/akram/BH]$
--------------------------------------------------------------------

chpath -l hdisk0 -p vscsi1 -s Enabled        enable the Path

chpath -l hdisk11 -p fscsi0 -s Enabled 
----

--------------------------------------------------------

CMM IP is 10.5.140.220
Old Password : Passw0rd@123
New Password : PASSW0RD@123
------------------------------------------------------

sar -d 1 10
--------------------------------------------------------

COPY THE MEF 

for i in `cat /home/smon/akram/BH/IPFILE`;do fl=`ssh $i ls -lrt /tmp|grep -i .mef3|grep -i Feb|tail -1|awk '{print $NF}'`; if [ `echo $fl|grep -i mef|wc -l` -ne "0" ];then ssh -o BatchMode=yes -o ConnectTimeout=5 -qf $i sudo chown unmgr007 /tmp/$fl; scp -rp $i:/tmp/"$fl" /home/smon/akram/BH/DATA/; fi; done  
     
	 
-------------------------csc main loop-------------------


for i in `cat /tmp/nimrio `
> do
> echo "======================="
> echo $i
> echo "======================="
> sudo ssh  $i prtconf -m
> done 



user creation on multipul servers

for i in `cat /tmp/nimrio `
do
echo "======================="
echo $i
echo "======================="
sudo ssh  $i "mkuser 'id=21432' 'pgrp=wccunix' 'groups=system,staff' 'shell=/usr/bin/ksh' 'gecos=Akram Ali, Unix System Admin' aali27"
done 


Password reset on multipule servers

for i in `cat /home/aali27/all_aix_server`; do echo $i; sudo ssh $i "echo 'aali27:K@gn@141'|chpasswd -c";done


==========================KP loop=======================================================

HST=`uname -n`
ROOTDSK=`lsvg -p rootvg|egrep -v "PV_NAME|rootvg:"|head -1|awk '{print $1}'`
TYPDSK=`lsdev -Cc disk|grep $ROOTDSK|awk '{print $4}'`
echo $HST,$ROOTDSK,$TYPDSK


/usr/local/scripts/chk_rp.ksh |egrep "Total|Pseudo|Path|powerpath0|disk/fcp|pseudo"|tail -6 > /tmp/rsrv.out
WRONG=`tail -1 /tmp/rsrv.out`
POWER=`sed -n '1p' /tmp/rsrv.out|awk '{print $3}'`
SYMM_VRAID=`sed -n '2p' /tmp/rsrv.out|awk '{print $3 $4}'`
PSEUDO=`sed -n '3p' /tmp/rsrv.out|awk '{print $4}'`
SERVER=`uname -n`
echo $SERVER $WRONG $POWER $SYMM_VRAID $PSEUDO


for i in `cat /tmp/fcsip`; do echo $i `ssh -q -o BatchMode=yes -o ConnectTimeout=5 $i lsmcode -A | grep -i fcs | head -1 `;done        collect the fcs firmware details


cat  /tmp/rp_remediate.ksh | grep -v "lsattr" | grep -i hdisk | awk '{print $4}'                  to grep the bad disk which need to remidiate reserve policy

no reserver


for i in `lsdev -c disk | egrep -v "SAS|SCSI"| awk '{print $1}'`; do echo $i; lsattr -El $i | grep -i reserve_policy;done| awk '{print $2}'


check the SEA status

lsdev -Cc adapter |grep -i shared|awk '{print $1}'|while read m;do echo $m `entstat -d $m |egrep "State|Bridge Mode|VID shared|High Availability Mode|Priority"`;done  


=================================================================
identify the limbo sea
limbo sea

oem_setup_env
HST=`uname -n`
limbo=`lsdev -Cc adapter |grep -i shared|awk '{print $1}'|while read m;do entstat -d $m | grep -w LIMBO;done`
echo RSLTt $HST $limbo

=================================================================
find command

find / -name BESClient Status



find / -name bos.pmapi.pmsvcs.7.1.4.31.bff

find / -name .fileTableLock


how to change the file permission

user permissio
change the permission of from id 217 to user tower

find /apps -user 217 -exec chown tower {} \; 


===============================================
rmdev -Rdl <hdiskpowerXX>

rmdev: 0514-516 Device configuration database lock service timed out.


fuser /etc/objrepos/config_lock
/etc/objrepos/config_lock:  15466568 16449626 20316396 21364886 23265418 23724286 29032682 30015688

 ps -A|grep 16449626

===============================================================

how to find the san booted rootvg disk

for i in `lsvg -p rootvg|grep -i hdisk|awk '{print $1}'`

do

VSCSI=`lspath -l $i|grep -i vscsi|wc -l`

FSCSI=`lspath -l $i|grep -i fscsi|wc -l`

SASDISK=`lspath -l $i|grep -i sas|wc -l`



if [ $VSCSI -ne "0" ]

then

echo "rootvg $i VSCSI-boot"

else

if [ $FSCSI -ne "0" ]

then

echo "rootvg $i SAN-Boot"

else

if [ $SASDISK -ne "0" ]

then

echo "rootvg $i SAS-Boot"

fi

fi

fi

done 
===================================================


how to free the disk from the client

how to find the lun id on client
[root@CNDALCRZAPZP08:/tmp]$ lspath -l hdisk6 -H -F "name path_id parent connection status"
name   path_id parent connection   status

hdisk0 0       vscsi0 810000000000 Enabled
hdisk0 1       vscsi1 810000000000 Enabled
[root@CNDALCRZAPZP08:/tmp]$ 

/usr/ios/cli/ioscli rmdev -dev hdisk8_OS                     unassign the lun from client




-----------------main loop-------------------------------
for i in `echo "hdisk1
hdisk2
hdisk3
hdisk4
hdisk5
hdisk6
hdisk7
hdisk8"`; do chdev -l $i -a reserve_policy=no_reserve -P;done

--------------------------------------------------

[root@CNDAB2BCAPZP03:/home/root]$ for i in `ls -ltr  | awk '{print $9}'`; do cat $i | grep -i chmod;done     read the all file of one dir

-------------------------------------------------------

for  i in `echo "hdisk103
hdisk104
hdisk142
hdisk143
hdisk147"`; do ls -ltr | grep -i $i| grep -i rhdisk;done



----------------------------------------------------------------
for i in `cat tip`; do echo $i `ssh -o BatchMode=yes -o ConnectTimeout=5 -qf $i cat /etc/login.defs |grep -w PASS_MIN_DAYS |tail -1`;done  check the detail

check user details

for i in `cat /home/aali27/all_aix_server`; do echo $i `sudo ssh -o BatchMode=yes -o ConnectTimeout=5 -qf $i cat /etc/passwd |grep -w aali27 `;done  

----------------------------------------------------------------

ssh 10.14.167.236 sudo  /tmp/NEW-GSD-check-RHEL5.sh >10.14.167.236   genrate shc on single server

how to start the service

for i in `cat /home/smon/reboot_script/*.txt|grep -i active|egrep -iv "hdisk|aio|VG|Volume|gateway|SIMPLEX"|awk '{print $1}'`; do echo $i; startsrc -s $i; done                                   for starting the service

------------------------reboot secript-------------
to start the  service on 
	
for i in `cat /home/smon/reboot_script/*.txt|grep -i active|egrep -iv "hdisk|aio|VG|Volume|gateway|SIMPLEX"|awk '{print $1}'`; do echo $i; startsrc -s $i; done   start the all services
----------------------------------------------------------
	
loop	
for i in `cat /nmon/ipfile/fgh`; do echo "done for $i"; ssh $i cat /proc/meminfo; |grep -i MemTotal ;done >>/tmp/meminfo31102013.txt
for i in `cat /nmon/ipfile/fgh`; do echo "done for $i"; ssh $i cat /proc/cpuinfo |grep -c processor ;done >>/tmp/coreinfo311013.txt 


Run the script form jump to client


for i in `cat /users/h416685a/akram_scripts/list`; do echo "done for $i"; ssh -o BatchMode=yes -o ConnectTimeout=5 -o StrictHostKeyChecking=no -o NumberOfPasswordPrompts=1  $i sh /tmp/EN16card.sh ;done >>/users/h416685a/akram_scripts/New_affcected-AIX_server.log.log 


--------------------------------------------------------	
unmount all the file system of the vg	
	
lsvg -l vg00 | awk '{print $7}' | grep -v LV | xargs -I {} mount {}  umount the file system	

lsvg -o  | grep -v rootvg | lsvg -li| grep -v LV |awk '{print $7}'|xargs -I {} umount -f {}           umount the all file exclude the rootvg

 lsvg -o | grep -v rootvg | xargs -I {} lsvg {} |egrep -i "AUTO ON"                                    verify the vg auto varyon status

lsvg -o |grep -v root |xargs -I {} lsvg -l {} | grep -v "MOUNT POINT"  | awk '{print $7}' | grep -v N/A |sort -r | xargs -I {} umount {}    unmount except rootvg
lsvg -o |grep -v root |xargs -I {} lsvg -l {} | grep -v "MOUNT POINT"  | awk '{print $7}' |  grep -v N/A| xargs -I {} mount {} 	     mount except rootvg
	
lspv | grep -v root | awk '{print $1}' | xargs -I {} rmdev -Rdl {}                      delete the disk	
for i in `lspv|awk -F " " '{print $1}'`; do pcmpath query essmap | grep -w $i; done      find the lun id of disk
lspv |grep None |awk '{print $1}' |xargs -t -I {} rmdev -Rdl {}                           delete all none disk
for i in `lsvg -o | grep -v rootvg`; do lspv | grep -i $i | head -1;done             find pvid of  disk which is associated with vg  
for i in `lsvg -o | grep -v root`; do ls -ltr /dev/$i;done                           find the major number of the vgs

lsvg -o | grep -v rootvg|lsvg -li | awk '{print $1}'                                 find the lv of vgs excluding of rootvg
lsvg -o | grep -v rootvg|lsvg -li | awk '{print $1}' | grep -v LV | grep -v VG       find the lv of Vgs exlcuding the rootvg   
lsvg -o | grep -v rootvg|lsvg -li | grep -v LV | grep -v VG|grep -w raw|wc -l         find the all raw lv of varyon vg

for i in `lsvg -o | grep -v rootvg|lsvg -li | grep -v LV | grep -v VG|grep -w raw|awk '{print $1}'`; do ls -lrt /dev|grep -w "r$i"; done

for i in `lsvg -o | grep -v rootvg|lsvg -li | grep -v LV | grep -v VG|grep -w raw|awk '{print $1}'`; do chown -R oradb:dba /dev/r$i; done     

for i in `ls -rtl|grep -i rhdisk|awk -F " " '{print $9}'`; do chown -R ora10g:dba /dev/$i; done         set the permission 


c[root@CNDBSFRPAPZP02:/tmp]$ cat /etc/passwd  | grep -i home| awk -F ":" '{print $1}'
guest
unmgr007
cyadmdu
cyadmbkp
tadmuser

===================================================================
remove any specfic the content 

iostat -a | grep -i fcs | awk '{print $1}' | xargs -I {} lscfg -vpl {} | grep -i network

iostat -a | grep -i fcs | awk '{print $1}' | xargs -I {} lscfg -vpl {} | grep -i network | tr -d "Network Address............."  

------------create home dir-------------------------------------	
for i in `logins |awk '{print $1}'`; do mkdir -p /home/$i; done create home dir of user
for i in `ls`; do chown $i $i; done    set owernish of home dir of user but frist we have to /home the run the  command
for i in `ls`; do echo $i; chown $i $i; done  set ownner ship of home dir of user but not changed the group



=======================================
user permission
change the permission of from id 217 to user tower

find /apps -user 217 -exec chown tower {} \; 
----------------------------------------------------------------	
for i in `ls -lrt|grep -i "May 29 15:46"|awk '{print $NF}'`; do rm -rf $i; done     delete home    	
	
for i in `cat 43215`;do echo $i ;ssh $i  ;done                                      automatic ssh to server	
	
for i in `cat /tmp/4`; do echo $i `ssh $i hostname` >>1232; done                    find the hostname of multipal server	
	
for i in `cat /tmp/4`; do echo $i `ssh $i oslevel -s ` >>1232; done                 find the oslevel os multipul server	
	
for i in `cat test_port `; do echo $i; telnet 10.92.1.33 $i; done                    check port open or not(migration)       	
	
ps -ef|grep -v root|grep -i am018789|awk '{print $2}'|xargs kill -9                   Kill all process in perticuller user	
	
ps -ef |grep -v root|grep -i wasadmin|awk '{print $2'|xargs kill -9                   kill all process of wasadmin	
	
for i in `cat ip`; do echo $i;ssh $i sudo echo "smon:asdf3@123" |chpasswd -c; done    change the password	
	
pcmpath query essmap |grep path0 |egrep '75CGPY1103D|75CGPY1103|75CGPY1104C'          find the lun and hdisk	
	
ls -l |egrep '14, 62|14, 63|14, 64'                               check the asm disk according the major and minor number	
	
for i in `cat /tmp/dv`; do cat /tmp/dv|grep -nw $i; scp -rp /nmon/scripts/rhel5gsd/NEW-GSD-check-RHEL5.sh unmgr007@$i:/tmp; done                                                                     copy the file               copy file	


for i in `cat /users/h416685a/akram_scripts/list`; do cat /users/h416685a/akram_scripts/list|grep -nw $i; scp -o ConnectTimeout=5 -o StrictHostKeyChecking=no -o NumberOfPasswordPrompts=1 /users/h416685a/akram_scripts/EN16card.sh root@$i:/tmp; done     Copy file
	
for i in `cat tp1`; do echo $i; ssh $i sudo useradd -c "744/I/01260F//Shashi_Mushini_OLM_ID_A1142604_db2_I" -m -d /home/airinst1 airinst1; done                                                  user creation	
	
for check memory and cpu	
	
for i in `cat /tmp/dmxip`; do cpu=`ssh $i sudo prtconf|grep -w "Number Of Processors:"`; memo=`ssh $i sudo prtconf -m`; fcs=`ssh $i sudo lsdev -Cc adapter | grep -i fcs |wc -l`; ent=`ssh $i sudo lsdev -Cc adapter | grep -i ent |wc -l`; disk=`ssh $i sudo lsdev -Cc disk | grep -i sas |wc -l`; sasadater=`ssh $i sudo lsdev -Cc adapter | grep -i sas|wc -l`;echo $i" "$cpu" "$memo "$fcs" "$ent" "$disk" "$sasadapter"; done >/tmp/ot1	

	
netstat -anA |grep -w 60000|awk '{print $1}'|xargs -I {} -i rmsock {} tcpcb         for killing tcpip socket on 60000 port 

lsof -i:<port> 
lsof -i:22                	
	
netstat -anA |grep -i close|awk '{print $1}'|xargs -I {} -i rmsock {} tcpcb         for killing the close_wait the conection	
 	
netstat -anA | grep -i FIN_WAIT | awk '{print $1}' |xargs -I {} -i rmsock {} tcpcb        for kill the  FIN_WAIT	
	
for i in `cat hmcuser`; do echo $i; ssh hscroot@$i rmhmcusr -u A1266115; done             remove the hmc user	
	
for i in `cat /tmp/hmcipjune`; do echo $i; ssh hscroot@$i lshmcusr ; done                 check the hmc user exist or not	
	
for i in `cat ipfile1`; do echo $i; ssh $i sudo lsvg -p rootvg; done   for checking pv of rootvg of multipule server from montool	
	
for i in `cat fcs`; do lsattr -El $i -a lg_term_dma; done                                 for checking the fcs value( lg_term_dma)	
	
for i in `cat magic`; do echo $i; ssh $i sudo chown -R wasadmin:staff /temp; done         change the ownership  	
	
for i in `cat mon`; do echo $i; ssh $i sudo chfs -a size=+256M /usr; done                 change the filesystem size   	
 	
for i in `cat mon`; do echo $i; ssh $i sudo df -gt; done                                  check the df -gt output	
	
for i in `cat mon`; do echo $i; ssh $i sudo sudo -V | head -1; done                       check the sudo version	
	
for i in `cat vg`; do echo $i; varyonvg $i; done  for vary on vg 	
	
for i in `cat mount`; do echo $i; mount $i; done  for mount 	
	
for i in `cat disk`; do echo $i: rmdev -Rdl $i; done        for deleting the disk	
 	
lsvg -o | awk '{print$1}'	
lsvg -o | grep -v rootvg | awk '{print$1}' 	
	
df -gt | awk '{print$6}'	
for i in `cat 1`; do echo $i; umount $i; done 	
lsvg -o | grep -v rootvg | awk '{print$1}' 	
	
	
lsvg -o | grep -v rootvg|lsvg -il |grep -Ev "MOUNT|:"  SHOW ALL MOUNTED MOUNT POINT DETAIL EXCEPT ROOTVG	




--------copy the directory from server to montool------------


for i in `cat /`; do ssh $i sudo mkdir /osbkp/$i; ssh $i sudo chmod 750 /osbkp/$i; ssh $i cp -rp /tmp/eyscan /osbkp/$i; ssh $i sudo tar -cvf /osbkp/$i.tar /osbkp/$i ; ssh $i sudo chmod 750 /osbkp/$i.tar; ssh $i sudo chown unmgr007:staff /osbkp/$i.tar; scp -pr $i:/osbkp/$i.tar .;done Sobhit(not recomonded)


for i in `cat /home/smon/premanshu/pre`; do echo $i; scp -rp $i:/tmp/eyscan /tmp/akram/$i; done   Ashok ( working)


-------------------------------------------------------
how to recover pvid
ecovering PVID 
The following series of commands demonstrates how to set the PVID of an AIX disk to a specific value like "0123456789abcdef":
Note:  Setting PVID like this should be avoided normally. It may cause unwanted consequences in your environment.
 
root@test:/tmp> DISK=hdisk2
root@test:/tmp> chdev -l $DISK -a pv=clear
hdisk2 changed

root@test:/tmp> lspv | grep hdisk2
hdisk2none  None

root@test:/tmp> perl -e 'print pack("H*","0123456789abcdef");' > /tmp/pvid

root@test:/tmp> # cat /tmp/pvid | dd of=/dev/$DISK bs=1 seek=128
8+0 records in.
8+0 records out.

root@test:/tmp> rmdev -dl $DISK
hdisk2 deleted

root@test:/tmp> cfgmgr

root@test:/tmp> lspv | grep $DISK
hdisk20123456789abcdefNone

root@test:/tmp> mkvg -fy testvg hdisk2
testvg

root@test:/tmp> crfs -v jfs2 -g testvg -m /testfs -a size=20G
File system created successfully.
20970676 kilobytes total disk space.
New File System size is 41943040

root@test:/tmp> mount /testfs

root@test:/tmp> lspv $DISK -l
hdisk2:
LV NAME     LPs     PPs     DISTRIBUTIONMOUNT POINT
fslv03      160     160     00..108..52..00..00   /testfs
loglv02     1       1       00..01..00..00..00    N/A
 
It works perfectly!
 
Regards,
--------------SHC----------------------------------
[akram@oc1158248570 SSH_IIM]$ pwd
/home/akram/Desktop/SSH_INFRATEL/SSH_INFRATEL/SSH_IIM
[akram@oc1158248570 SSH_IIM]$ grep ", No" *    it will grep only "NO"
akram@oc1158248570 SSH_IIM]$ grep ", No" * | cut -d "_" -f1        it will grep IP address which have "NO"

PubkeyAuthentication.sh

Replace entire line in multiple files  (line is starting with avg,99 and replaced with avg,100

for i in `ls`;do sed -i 's/^avg, 99.*/avg,       100/' $i; done


Replace a single word in multiple files ( Keyword ", No" is replaced with ", Yes" )

for file in $(grep -il ", No" *.txt.1); do sed -e "s/, No/, Yes/ig" $file > temp/$file.tmp; mv temp/$file.tmp $file; done


-------------------------------------------------------------
minage - maxage

for i in `cat ip1`
do
>/home/afmgr007/Q2/user.txt
ssh $i cat /etc/passwd |cut -d ":" -f1 >> /home/afmgr007/Q2/user.txt
for l in `cat /home/afmgr007/Q2/user.txt`
do
echo $i `ssh $i sudo lsuser -a minage maxage $l`
done
done


---------------BES clent----------------------------------------
bes Client 

for i in `cat /home/smon/akram/RSAAuthentication_new_IP`; do echo $i; ssh $i sudo /etc/rc.d/rc2.d/SBESClientd restart;done  loop bes client restart 



1.Please create a mount point name "/var/opt/BESClient" with 10 GB


2. Download agent and save on Location as following path:--

http://support.bigfix.com/bes/install/besnonwindowsarchive.html  to be download the client installable for the required architecture ( 32 bit / 64 bit )  etc 
with version BES 8.2.1175.0 Installers

/ACTIVITY/migration/BES

-rw-r--r--    1 unmgr007 staff       5962039 Nov 25 2011  BESAgent-8.2.1078.0-rhe5.x86_64.rpm
-rwxr-xr-x    1 unmgr007 staff       6123371 Nov 25 2011  BESAgent-8.2.1078.0-rhe4.i386.rpm
-rwxrwxr-x    1 unmgr007 staff      30149632 Apr 05 2012  BESAgent-8.2.1175.0.ppc64_aix61.pkg
-rwxrwxr-x    1 unmgr007 staff      22855680 Nov 01 16:51 BESAgent-8.2.1175.0.ppc_aix53.pkg

besconfig file and Action file located on following PATH:--

[unmgr007@montool:/ACTIVITY/migration/BES/BESCONFIG]$ ls -lrt
total 0
drwxr-xr-x    2 unmgr007 staff 256 Jun 06 12:30 north
drwxr-xr-x    2 unmgr007 staff 256 Jun 06 12:31 south
drwxr-xr-x    2 unmgr007 staff 256 Jun 06 12:31 east

3. Relay servers details:--
10.5.165.81
10.5.165.82
10.5.165.83
10.5.165.62
10.5.165.63
10.14.101.240	
10.135.40.116
10.135.40.45
10.56.40.17
10.56.40.26
10.56.40.27
10.96.40.148
10.96.40.53
10.116.41.33
10.116.41.25 

4.  Check port status:--

telnet relay serverIP 52314


5. Check The status of reporting on TEM server as following LOG with latest date and time.

EX:---
 [root@CNDBWRLTAPZT02 BESClient]# tail -f /var/opt/BESClient/__BESData/__Global/Logs/20121228.log 
   Unrestricted mode
   Configuring listener without wake-on-lan
   Registered with url 'http://CNDBTEMXAPZP01.india.airtel.itm:52314/cgi-bin/bfenterprise/clientregister.exe?RequestType=RegisterMe60&ClientVersion=8.2.1175.0&Body=1679419&SequenceNumber=20&MinRelayVersion=6.0.0.0&CanHandleMVPings=1&Root=http://CNDBTEMXAPZP01.india.airtel.itm%3a52314&AdapterInfo=00-50-56-8d-02-08_10.5.133.0%2f24_10.5.133.73_0&AdapterIpv6=00-50-56-8d-02-08%5efe80%3a%3a250%3a56ff%3afe8d%3a208%2f64_0'
   Registration Server version 8.2.1093.0 , Relay version 8.2.1093.0
   ShutdownListener
   SetupListener success: IPV4/6

AIX Installation Instructions

    1.Download the corresponding BES Client package file to the IBM AIX computer.
    2.Copy the BESAgent to the IBM AIX computer on path /var/opt/BESClient.
    3.Run the following command: installp –aX -d /var/opt/BESClient/BESAgent-8.2.1310.0.ppc_aix53.pkg BESClient     
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm and besclient.config to /var/opt/BESClient
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient  
    6.Run the following command: /etc/rc.d/rc2.d/SBESClientd start.





SUSE (32-bit) Installation Instructions

    1.Download the corresponding BigFix Client RPM file to the SUSE computer.
    2.Copy the BESAgent to the Linux computer on path /var/opt/BESClient.
    3.Install the RPM by running the command rpm -ivh <path to BigFix Client RPM>.
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm 
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    6.Start the BigFix Client by running the command: /etc/init.d/besclient start.

SUSE Linux Enterprise (64-bit) Installation Instructions

    1.Download the corresponding BigFix Client RPM file to the SUSE computer.
    2.Copy the BESAgent to the Linux computer on path /var/opt/BESClient.
    3.Install the RPM by running the command rpm -ivh <path to BigFix Client RPM>.
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm 
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    6.Start the BigFix Client by running the command: /etc/init.d/besclient start.

Red Hat Installation Instructions

    
    1.Download the corresponding BigFix Client RPM file to the Red Hat computer.
    2.Copy the BESAgent to the Linux computer on path /var/opt/BESClient.
    3.Install the RPM by running the command rpm -ivh <path to BigFix Client RPM>.
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm 
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    6.Start the BigFix Client by running the command: /etc/init.d/besclient start.



Solaris Installation Instructions

    1.Download the corresponding BigFix Client package file to the Solaris computer.
    2.Copy the BESAgent on path /var/opt/BESClient.
    3.Install the PKG by running the command pkgadd -d <path to BigFix Client package file>.
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    6.Start the BigFix Client by running the command: /etc/init.d/besclient start.
    

HP-UX PA-RISC Installation Instructions

    1.Download and copy the corresponding BES Client package file to the HP-UX computer (the computer must be PA-RISC system). The file name will be in the format "(BESAgent-   
    2.Copy the BESAgent on path /var/opt/BESClient.
    3.install the PKG by running the command /usr/sbin/swinstall -s HOSTNAME:/path/BESAgent_filename BESAgent
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm 
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    5.Start the BES Client by running the command /sbin/init.d/besclient start

HP-UX Itanium Installation Instructions

    1.Download and copy the corresponding BES Client package file (BESAgent-8.2.1310.0.pa_risc_hpux110.depot) to the HP-UX computer (must be Itanium system).
    2.Copy the BESAgent on path /var/opt/BESClient.
    3.install the PKG by running the command /usr/sbin/swinstall -x "allow_incompatible=true" -s HOSTNAME:path/BESAgent-8.2.1310.0.pa_risc_hpux110.depot BESAgent
    4.Copy the masthead file to /etc/opt/BESClient/actionsite.afxm
    5.Copy the besclient.config file as per HUB to /var/opt/BESClient 
    6.Start the BES Client by running the command /sbin/init.d/besclient start





----------------------------------------------------------------
cd /tmp/BESCONFIG/north
unalias cp actionsite.afxm /etc/opt/BESClient/actionsite.afxm
unaliascp actionsite.afxm /var/opt/BESClient/actionsite.afxm
unalias cp besclient.config /var/opt/BESClient/besclient.config
/etc/init.d/besclient stop
/etc/init.d/besclient start

 cat /var/opt/BESClient/besclient.config | more


cd /tmp/BESCONFIG/south
unalias cp actionsite.afxm /etc/opt/BESClient/actionsite.afxm
unaliascp actionsite.afxm /var/opt/BESClient/actionsite.afxm
unalias cp besclient.config /var/opt/BESClient/besclient.config
/etc/init.d/besclient stop
/etc/init.d/besclient start

 cat /var/opt/BESClient/besclient.config | more


cd /tmp/BESCONFIG/east
unalias cp actionsite.afxm /etc/opt/BESClient/actionsite.afxm
unaliascp actionsite.afxm /var/opt/BESClient/actionsite.afxm
unalias cp besclient.config /var/opt/BESClient/besclient.config
/etc/init.d/besclient stop
/etc/init.d/besclient start

 cat /var/opt/BESClient/besclient.config | more

cd /tmp/BESCONFIG/west
unalias cp actionsite.afxm /etc/opt/BESClient/actionsite.afxm
unaliascp actionsite.afxm /var/opt/BESClient/actionsite.afxm
unalias cp besclient.config /var/opt/BESClient/besclient.config
/etc/init.d/besclient stop
/etc/init.d/besclient start

 cat /var/opt/BESClient/besclient.config | more




-------------raw lv-----------------------------------
rawlv

raw lv creation on fx server

root@CNDAFXECDBOP03:/]$ cat /tmp/lv2
c02_misc_hv306
c02_cdr_data397
c02_cdr_data398
c02_cdr_data399
c02_cdr_data400
c02_cdr_data401

[root@CNDAFXECDBOP03:/]$ 

for i in `cat /tmp/lv2`; do mklv -t raw -S 128K -y $i CU27_SPLIT01 20 hdisk51 hdisk66 hdisk67 hdisk50; chown -R oradb:dba /dev/$i /dev/r$i; donewith strip 

for i in `cat lv_name`; do mklv -t raw -y $i VG_C02_HV20 20; chown -R oradb:dba /dev/$i; chown -R oradb:dba /dev/r$i; done

after creation also run

for i in `cat /tmp/lv2`;do chown -R oradb:dba /dev/r$i; done 


script of HA raw lv permission put below command in startup sciprt if raw lv changing after failover
for i in `lsvg -o  |lsvg -li |grep -i raw |awk '{print $1}'`; do chown -R oracle:oinstall /dev/r$i; done  
   
-------------------------------------------------------



 for i in `cat /tmp/d`; do echo $i; rpm -e $i --nodeps;done      uninstall the rpm path	
	
----------------------------------------------------------	
for deleting the all fix

echo "IV11743m06	
IV11743m06	
20867.61	
IV10226s06	
IV21379.61	
IV10197610	
IV22555m04	
IV22555m04	
IV01118s00	
85215.61	
IZ71071_04	
IZ68231_04	
IZ68194_04	
IZ70637_04	
IV21379	
IV13820m06
"|xargs -I {} emgr -rL {} 	
	
----------------------------------------------------

for i in `echo "75PL831133F
75PL8311340
75PL8311341
75PL8311483
75PL8311242

"`; do pcmpath query essmap|grep -w $i|grep -i path0; done	
	
	
how to delete the disk	
for i in `echo "vpath32 	
vpath33 	
vpath30 	
vpath31 	
vpath34 
vpath45 	
vpath40 	
vpath41 	
"`; do rmdev -Rdl $i|grep -i path0; done  

---------------------------------------------------- 
nologin
block system account
default id disable  

for i in daemon bin sys adm uucp guest nobody lpd lp invscout snapp ipsec nuucp pconsole sshd ftp webadmin esaadmin; do chuser rlogin=false $i;chuser login=false $i;chuser account_locked=true $i;done 
 ------------------------------------------------------------ 
open ssh installation  for openssh  kindly install openssh first 

 for i in `cat /tmp/5`; do echo $i;ssh $i sudo /usr/lib/instl/sm_inst installp_cmd -a -d '/tmp/May_Aix_patch_2013/OpenSSH_6.0.0.6102' -f '_update_all'  '-c' '-N' '-g' '-X'    '-Y' ; done  


Openssl patch installation 

for i in `cat 5`; do echo $i;ssh $i sudo /usr/lib/instl/sm_inst installp_cmd -a -d '/tmp/May_Aix_patch_2013/openssl-fips-12.9.8.2500' -f '_update_all'  '-c' '-N' '-g' '-X'    '-Y' ; done    for i in `cat 5`; do echo $i"; ssh $i sudo "ssh -V;lslpp -l |grep -i openssl"; done   it will show the openssl fileset	
---------------------------------------------------------	
	
for i in `cat /tmp/aud`; do ssh $i sudo mkdir /osbkp/$i; ssh $i sudo chmod 750 /osbkp/$i; ssh $i cp -rp /tmp/eyscan /osbkp/$i; ssh $i sudo tar -cvf /osbkp/$i.tar /osbkp/$i ; ssh $i sudo chmod 750 /osbkp/$i.tar; ssh $i sudo chown unmgr007:staff /osbkp/$i.tar; scp -pr $i:/tmp/$i.tar .;done

---------------------------------------------------------------
copy the multipal server file on montool server.	
	
copy the server file on montoool	
	
	
#!/bin/bash	
for i in `cat /tmp/audit`	
do	
ssh -q $i date > /nmon/audit_log_linux/$i.passwd.txt 	
ssh -q $i cat /etc/passwd >> /nmon/audit_log_linux/$i.passwd.txt	
ssh -q $i sudo cat /etc/shadow > /nmon/audit_log_linux/${i}_shadow.txt 	
done	
	
	
---------------------------------------------------------------	
manoj: lssecfix 


for i in `cat IPFILE1`; do sed -e 's/^/'$i'\*/g' $i.txt > $i.tmp; done

cat *.tmp >>lssecfixsuse10 


----------------------------------------------------------------

Hi Team,

Please run the latest lssecfix on all servers as per the ownership and clear all patches by Monday which is showing missing or we should have proper justification for missing patches.


Path for Latest LSSECFIX on servers
/tmp/LSSECFIX/etc/lssecfixes
or
/var/opt/BESClient/__BESData/CustomSite_CUSTOM_GTS_UNIX/LSSECFIX/etc/lssecfixes

if you do not found the LSSECFIX please copy from montool 

Path on montool
/home/smon/Manoj/LSSECFIX


------------------------------------------------

Please find the following resolution for "Incorrect mac received on packet "

# lsdev -C|grep pkcs
# installp -u security.pkcs11  (use for a fingerprint device)
# stopsrc -s sshd
# startsrc -s sshd
-----------------------------------------------
	
************For create raw lv in bulk ************************	
for i in VG_C14_HV2 VG_C14_HV7; do for j in `cat 1|grep -w $i|awk '{print $2}'`; do hdisk=`lsvg -p $i|sed 1,2d|awk '{print $1}'|tr "\n" " "`; mklv -t raw -y $j -S256K $i 20 $hdisk; done; done	

******Take details month and date wise***********************	
	
for i in `ls -ltr|grep -i biftool|egrep "Dec 07"|grep -v 2009|awk '{print $9}'`; do echo $i; cp -pr $i /tmp/biff_AJlog/; done	
	
************************************************************	
	
root@CNDABIFFDBDP06:/usr/lpp/mmfs/bin]$ ./mmlscluster  | grep 10. | awk '{print $3}' > /tmp/file	
[root@CNDABIFFDBDP06:/usr/lpp/mmfs/bin]$ ./mmlscluster  | grep 10. | awk '{print $3}'  	
10.14.81.75	
10.14.81.76	
10.14.81.79	
10.14.81.80	
10.14.81.81	
10.14.81.78	
10.14.81.77	
10.14.81.152	
10.14.81.153	




----------script for changing the line in file-----------------
file change 


1- This script will change the line /etc/ssh/sshd_config 
#PermitRootLogin yes       to  #PermitRootLogin  no

cat permit.sh
sudo cp -p /etc/ssh/sshd_config /etc/ssh/sshd_config.test_file && awk '$1=="\#PermitRootLogin" {$2="no"} {print}' /etc/ssh/sshd_config.test_file > /tmp/sshd_config
sudo chown -R root:system /tmp/sshd_config
sudo cp -pr  /tmp/sshd_config /etc/ssh/sshd_config
chmod 644 /etc/ssh/sshd_config 

2-  copy the script on all server

for i in `cat /home/smon/akram/IPLIST`; do cat /home/smon/akram/IPLIST|grep -nw $i; scp -rp /home/smon/akram/KeyRegenerationInterval.sh unmgr007@$i:/tmp; done 

3. then run the script on all server by below loops

for i in `cat /home/smon/akram/IPLIST`; do echo $i; ssh $i sh /tmp/KeyRegenerationInterval.sh;done



	
****************housekeeping***********************
find ./ -xdev -size +100000000c -exec ls -ltr {} \;      check the space of current dir, which are taking more than 100MB    Krish
find / -xdev -size +100000000c -exec ls -ltr {} \;       check the space of /                                                

	
find / -xdev -ls |awk '{print $7" "$11}'|sort -rn |head -15   >>>>>>>>>>>check root space	
	
	
find /var/spool/mqueue -type f -mtime +3 -exec rm -f {} \; -- AIX	       working
find /var/spool/clientmqueue -type f -mtime +2 -exec rm {} \; -- linux      working	

-------------------------------------------------------------
gzip -c preuser>preuser_190615.zip 
	
****************************reboot_script********************	
for checking old reboot sript	
unmgr007@montool:/monitor/Outputs/RebootScriptMonthly/2010/October]$ 	
	
manully run this comond if reboot scrpit is not running	
	
ifconfig -a	
netstat -nr	
lsvg	
lsvg -o	
lspv	
lspv | wc -l	
df -gt 	
df -gt | wc -l	
lssrc -a | grep -i active	
lssrc -a | grep -i active | wc -l	
lsfs 	
lsfs | wc -l	
mount	
mount |wc -l	
lsdev -Cc adapter	
lsdev -Cc adapter | wc -l	
*******************************crontab**************************

Give crontab access to user	
	
Login into theServer   through montool or putty	
	
Go into the following path /var/adm/cron by executing following command 	
Cd /var/adm/cron	
Open the cron.allow file by executing following command..	
Vi cron.allow	
Enter the user name & save the file ( Esc :wq!)	
	
Check the permission of /usr/bin/crontab by executing following command	
ls-l /usr/bin/crontab	
Command output	
-r-sr-sr-x	
Login into server through that user & execute following command ..	
Crontab-e 	
After that exit from file without save (Esc :q!)	
	
	
Change the permission of file by executing following command 	
Chmod 6555 /usr/bin/crontab	
Restrict cron and at to authorized users, No	
	
echo "adm" >>/var/adm/cron/cron.allow	
echo "esaadmin" >>/var/adm/cron/cron.allow	
echo "sys" >>/var/adm/cron/cron.allow   	
echo "uucp" >>/var/adm/cron/cron.allow	
touch /var/adm/cron/at.allow 	
chmod 400 /var/adm/cron/at.allow	
echo "root">>/var/adm/cron/at.allow        	
chmod 400 /var/adm/cron/cron.allow     	

==============================================================

/var/adm/cron/cron.allow

Check the user crontab entry
 /var/spool/cron/crontabs/<User>


---------------------------------------------------------------	
crontab	
	
30 23 * * * /usr/bin/sh /osbkp/reboot.sh	

----------------------cron issue-------------------------------
If getting this error :

The c queue maximum run limit has been reached.

then do the changes in the following:

/var/adm/cron/queuedefs with the b.500j20n60w

kill cron process and check	




/usr/sbin/cron
The permissions of the FIFO file in /var/adm/cron was altered and the cron job started to work.

1- remove /var/adm/cron/FIFO
2-mknod /var/adm/cron/FIFO p
3/usr/sbin/cron

http://madhuappsdba.blogspot.in/2008/07/cron-jobs.html    for other issue



==========================================================
add the crontab entry in the server 

crontab -l | awk '{print} END {print "30 0 * * * /usr/local/scripts/besRestartScript.ksh >/dev/null 2>&1      #script to restart BESClient"}' | crontab 
------------------------------------------------------------------

crontab file format:
minute    hour    day_of_month    month        weekday         command
0-59      0-23      1-31          1-12         0-6 Sun-Sat     shell command	


crontab of montool

[unmgr007@montool:/home/smon/saurabh]$ crontab -l
00 23 * * * /usr/bin/sh /ACTIVITY/migration/CEP/BesagentAIX.sh
07 19 14 * * /usr/bin/sh /ACTIVITY/migration/hmcscanner-0.9/hmcscan.sh
19 15 26 * * /usr/bin/sh /nmon/scripts/mksysb/mksysb_monthly_prod.sh
45 13 25 * * /usr/bin/sh /ACTIVITY/migration/hmcscanner-0.9/HMCSCD/hmcservercpumem.sh
01 21 * * * /usr/bin/sh /monitor/Scripts/smon_consolidated/smon_script.sh
00 22 04 * * /usr/bin/sh /monitor/Scripts/RebootScriptMonthly/RebootScriptMonthly.sh
07 21 * * * /usr/bin/sh /monitor/Scripts/ErrptCheck/ErrptCheck.sh
00 22 * * * /usr/bin/sh /monitor/Scripts/RootSpaceCheck/RootSpaceCheck.sh
44 23 08 * * /usr/bin/sh /nmon/scripts/mksysb/mksysb_monthly_vio.sh
00 07 * * * /usr/bin/sh /monitor/Ora_Err.sh
	
======================main performance======================================
----------------------cpu utilization------------------------------------

	
uptime
18:01pm  up 217 days,  22:40,  0 users,  load average:  8.78, 8.75, 8.82

shows the load average in the last minute, five minutes, and fifteen minutes

In general, each process that is running, waiting for CPU, or waiting on I/O would add one to the load average. These figures are calculated and then averaged over time.

load average is the "r" column under vmstat. This is the number of kernel threads (the runnable threads) It has to be compared to tha actual number of CPUs (logical CPU) if the CPUs can service those threads. 


ps aux | head -1; ps aux | sort -rn +2 | head -10     Displaying top CPU_consuming processes
ps aux | head -1; ps aux | sort -rn +2 | head -20     top CPU processes
ps -elf                  shows priority of processes (PRI) (60 is general, keep an eye on lower than 60 (it means higher priority))
ps -efk|grep wait        k: will show kernel processes
ps -fp <pid>             check the time field, if it is constant over time, a probable deadlock or hang could have occurred.

sar:
----
sar -P ALL 1 15          shows CPU usage for all logical CPU (-P : CPU by CPU basis statistics)

System configuration: lcpu=4 ent=0.20 mode=Uncapped

13:49:15 cpu    %usr    %sys    %wio   %idle   physc   %entc
13:49:16  0       26      57       0      17    0.01     3.8
          1        0      15       0      85    0.00     0.2
          2        0       9       0      91    0.00     0.0
          3        0      47       0      53    0.00     0.1


Check %usr+%sys together and compare it to physc.

Some examples when physical consumption of a CPU should be also looked when smt is on.:
- usr+sys=16%, but physc=0.56, it means i see 16% is utliized of a CPU, but actually half of the physical CPU (0.56) is used.

- if us+sys=100 and physc=0.45 we have to look both. If someone says 100% percent is used, then 100% of what? The 100% of the half of the CPU (physc=0.45) is used.

- %usr+%sys=83% for lcpu 0 (output from command sar). It looks a high number at the first sight,  but if you check physc, you can see only 0.01 physical core has been used, and the entitled capacityis 0.20, so this 83% is actually very little CPU consumption.

-----

sar -u 2 10            <--shows system activity info (-u:CPU usage date, 2: interval in seconds, 10:number of intervals)(same as topas)
22:06:25    %usr    %sys    %wio   %idle   physc   %entc
22:06:27      89       9       1       1    0.49   163.4

The sar command can extract and show previously saved CPU utilization metrics that were previously saved in a file (/var/adm/sa/sadd, where dd refers to current day). The system utilization information is saved by two shell scripts (/usr/lib/sa/sa1 and /usr/lib/sa/sa2) running in the background. These shell scripts are started by the cron daemon using crontab file /var/spool/cron/crontabs/adm.

Collecting data in this manner is a useful way to characterize system usage over a period of time and determine peak usage hours.
To view the files:
sar -f /usr/adm/sa/sa03
sar -P ALL -f /usr/adm/sa/sa03


emcp_xcryptd is running and sometimes eating too much CPU.

There is a EMC primus about emcp_xcryptd

with powervt you can check the encryption and with /etc/rc.emcp_xcryptd stop you can stop the deamon. ( also remove it from inittab ).

Emc xcrypt in inittab

 
# powervt xcrypt -info -dev all      <–lists all hdiskpower devices, if it is encrypted or not
# /etc/rc.emcp_xcryptd stop          <–stops emc_xryptd
# rmitab rcxcrypt                    <–remove from inittab


==============================================================================
unable to install emc power software due coredump

./EMCpower.base.pre_rm[28]: 6881540 Memory fault(coredump)
failed
Error PowerPath migrations are present.
Failure occurred during pre_rm.
Failure occurred during rminstal.
Finished processing all filesets.  (Total time:  6 secs).

under /etc/emc, there wil be a dir called ppmr 
ppme 
we need to remove it, if we get this kind of error 
i removed it and upgraded, it worked fine 
tell them they shud not touch ppme simply knowing it 
===============================================================================

mpstat -s 1 1

lparstat 1 1 
=============================================================================

Step1: Run
cat /etc/inittab | grep topas

Eg:
root@nzapap225 / >
# cat /etc/inittab | grep topas
xmdaily:2:once:/usr/bin/topasrec -L -s 300 -R 1 -r 6 -o /etc/perf/daily/ -ypersistent=1 2>&1 >/dev/null #Start local binary recording

If you find the output like above then AIX's built in Performance Recording is configured on that server.

Step2: Run
ls -al /etc/perf/daily

if you find the output like below example then AIX's built in Performance Recording is storing it's data,

root@nzapap225 / >
# ls -al /etc/perf/daily
total 103672
drwxr-xr-x    2 root     system         4096 Mar 14 00:00 .
drwxr-xr-x    5 root     system          256 Oct 30 03:16 ..
-rw-------    1 root     system       137684 Jan 18 2010  czabsu3_100118.topas
-rw-------    1 root     system       612072 Jul  7 2010  czabsu4_100707.topas
-rw-------    1 root     system       928980 Jul  8 2010  czabsu4_100708.topas
-rw-------    1 root     system       274652 Mar 31 2011  izatap25_110331.topas
-rw-------    1 root     system      8048924 Mar  8 23:57 nzapap225_180308.topas
-rw-------    1 root     system      8048924 Mar  9 23:57 nzapap225_180309.topas
-rw-------    1 root     system      8048924 Mar 10 23:57 nzapap225_180310.topas
-rw-------    1 root     system      7722620 Mar 11 23:57 nzapap225_180311.topas
-rw-------    1 root     system      8048924 Mar 12 23:58 nzapap225_180312.topas
-rw-------    1 root     system      8048924 Mar 13 23:58 nzapap225_180313.topas
-rw-------    1 root     system      3099980 Mar 14 08:48 nzapap225_180314.topas
lrwxrwxrwx    1 root     system           38 Mar 14 00:00 persistent_local -> /etc/perf/daily/nzapap225_180314.topas

Step3:
Note: The above files are in BINARY format hence don't try to open it,
One very useful thing you can do with this binary .topas file is convert it to a NMON csv file with the “topasout -a” command, as shown:
Run
topasout -a nzapap225_180313.topas
Now run, ls -al
We can see that the new file will be created as "nzapap225_180313.topas.csv".

Step4:
You can then take the NMON csv file (nzapap225_180313.topas.csv) and use the NMON analyzier to create detailed performance graphs.


Note: For the BESclient issue, Please check the 19th feb .topas file is available anywhere (Previous backup). You can share that to PMR team.


===================================================================================================================
------------------------kernal utilization-------------------------------

if kenal utilization high then run below command & checked process which are using 
tprof -x sleep 10       for kernel utilization

tprof:

it reports processor usage for individual programs and the system as a whole (it shows which sections of the program are most heavily using the processor)

1. tprof -x sleep 60  <--run tprof, execute sleep and run it for 60 seconds (we are not profiling "sleep" we are using the value 60 to run tprof)

2. it creates a file, in the dir wher we are: cat sleep.prof


Process                                Freq  Total Kernel   User Shared  Other
=======                                ====  ===== ======   ==== ======  =====
wait                                      4  99.83  99.83   0.00   0.00   0.00
nfsd                                      1   0.07   0.07   0.00   0.00   0.00
/usr/sbin/getty                           1   0.03   0.03   0.00   0.00   0.00
rpc.lockd                                 1   0.03   0.03   0.00   0.00   0.00
/usr/bin/tprof                            1   0.03   0.03   0.00   0.00   0.00
=======                                ====  ===== ======   ==== ======  =====
Total                                     8 100.00 100.00   0.00   0.00   0.00

Process                   PID      TID  Total Kernel   User Shared  Other
=======                   ===      ===  ===== ======   ==== ======  =====
wait                   131076   131077  57.58  57.58   0.00   0.00   0.00
wait                   917532  1376299  20.09  20.09   0.00   0.00   0.00
wait                  1048608  1507375  20.09  20.09   0.00   0.00   0.00
wait                   983070  1441837   2.08   2.08   0.00   0.00   0.00
nfsd                 14221360 30146813   0.07   0.07   0.00   0.00   0.00
/usr/sbin/getty       7798814 14680259   0.03   0.03   0.00   0.00   0.00
/usr/bin/tprof       11010196 34603221   0.03   0.03   0.00   0.00   0.00
rpc.lockd             5177366  9044005   0.03   0.03   0.00   0.00   0.00
=======                   ===      ===  ===== ======   ==== ======  =====
Total                                  100.00 100.00   0.00   0.00   0.00

First section shows the processes, below the threads (with thread id (TID)). It separets Kernel and User usage for each process during the timeframe it was running.

Kernel utilization due to sshd
Please check
lsdev -c adapter
pkcs11  Available       PKCS#11 Device
if above device is availabe then remove below packe
[root@CNDALAPUDBOP01:/tmp]$ lslpp -l | grep -i pkcs
  security.pkcs11  6.1.9.0  COMMITTED  PKCS11 Libraries
  security.pkcs11  6.1.9.0  COMMITTED  PKCS11 Libraries

then reboot the server. it will resolved the issue
------------------------------------------------------------------------------

	
ps gv | head -n 1; ps gv | egrep -v "RSS" | sort +6b -7 -n -r  Memory usage for each active process	
	
ps aux | head -1; ps aux | sort -r +2 | head -10               Displaying top CPU_consuming processes 	
ps auxw |sort -r +3 |head -10                                   Displaying top 10 memory-consuming processes:	
ps -eakl | head -1; ps -eakl | sort -rn +5                      Displaying process in order of being penalized 	
ps -eakl | sort -n +6 | head                                    Displaying process in order of priority	
ps -eakl | sort -n +7                                           Displaying process in order of nice value	
ps vx | head -1;ps vx | grep -v PID | sort -rn +3 | head -10    Displaying the process in order of time 	
ps vx | head -1; ps vx | grep -v PID | sort -rn +6 | head -10   Displaying the process in order of real memory use	
ps vx | head -1; ps vx | grep -v PID | sort -rn +4 | head -10   Displaying the process in order of I/O 	
ps -a -o pid, user, class, pcpu, pmem, args                     Displaying WLM classes	
ps vg | head -1; ps vg | grep -w wait                           Determinimg process ID of wait processes	
ps -mo THREAD -p <PID>                                          Wait process bound to CPU	

svmon -Pt15| perl -e 'while (<>) {print if ($.==2||$&&&!$s++);$.=0 if(/^-+/)}'        display the max paging process	
svmon -P -v -t 10 | more                 memory utilized will give top ten processes	
svmon -U -v -t 10 | more                 Momory utilized will give top ten user	

	
svmon -Pt15 | perl -e 'while(<>){print if($.==2||$&&&!$s++);$.=0 if(/^-+$/)}'    top memory uses process

ps auxw |sort -r +3 |head -10         memory uses                                    
	
ipcscheck share memory	
ipcrm -m id   release share memory	
	
# ps gv | head -n 1; ps gv | egrep -v "RSS" | sort +6b -7 -n -r	
  PID    TTY STAT  TIME PGIN  SIZE   RSS   LIM  TSIZ   TRS %CPU %MEM COMMAND	
 15256      - A    64:15  755  2572  2888    xx  2356   316  0.9  0.0 /usr/lpp/	
 22752      - A     0:08  261  1960  1980 32768   465    20  0.0  0.0 dtwm	
 14654      - A     0:00  324  1932  1932    xx   198     0  0.0  0.0 /usr/sbin	
 20700      - A     0:07  271  1868  1896 32768    95    28  0.0  0.0 /usr/dt/b	
 20444      - A     0:03  203  1736  1824 32768   551    88  0.0  0.0 dtfile	
 17602      - A     0:00  274   948  1644 32768   817   696  0.0  0.0 sendmail:	
 13218      - A     0:00   74  1620  1620    xx   116     0  0.0  0.0 /usr/sbin	
 	
	
	
Let's briefly identify what some of this information means.	
	
-RSS The amount of RAM used for the text and data segments per process. PID 15256 is using 2888k.	
-%MEM The actual amount of the RSS / Total RAM. Watch for processes that consume 40-70 percent of %MEM. 	
-TRS The amount of RAM used for the text segment of a process in kilobytes. 	
-SIZE The actual amount of paging space allocated for this process (text and data).	
	
-------------------------I/O utilization----------------------------------------------------




ps vx | head -1; ps vx | grep -v PID | sort -rn +4 | head -10   Displaying the process in order of I/O

if i/o bottelnec found  then check. IF No DMA Resource Count: 0  being increased then increased the queue_depth     16 of the hdisk0

 No Adapter Elements Count: 0 is increaing the then No Adapter Elements Count  then increased the num_cmd_elems 200 
fcstat fcs0

FC SCSI Adapter Driver Information
  No DMA Resource Count: 0     
  No Adapter Elements Count: 0

queue_depth     16
-----------------
-----------------
#nohup iostat -DlT 5 500 >>/tmp/iostat.out &
#iostat -DlT 5 500

iostat -D -l hdisk1                                check utilizaton of one disk

iostat 1 5 |egrep "hdisk33|hdisk34"               for disk utilization 
iostat -a |grep -i fcs                              for fcs utilization

if Waitqueue & Runqueue is hign so  please check below

1- check below vaulue error it should be 0  
fcstat fcs0 | egrep -i "No DMA Resource Count"
fcstat fcs0 | egrep -i "No Adapter Elements Count"


-----------------------
Below are IBM recommended parmetter for beter performance that should be define on fcs card

also check the  below parameter
chdev -l fscsi1 -a fc_err_recov=fast_fail -P	
chdev -l fscsi1 -a dyntrk=yes -P
chdev -l fcs1 -a max_xfer_size=0x200000 -P
chdev -l fcs0  -a num_cmd_elems=400

chdev -l fcs1 -a max_xfer_size=0x200000 -P
chdev -l fcs0  -a num_cmd_elems=400 -P

num_cmd_elems Valu should be define as per fcs card speed
FCS Card Speed  	num_cmd_elems Value
	2G                    512
	8G / 4G              1024
	Above 8G              2048 
=========================================================================


Lets start with HIGH Disk I/O

Imp. Commands
filemon –o /tmp/filemon-`date`
wait for 20 minutes and then run 
trcstop 
that stops tracing and develops report in /tmp/filemon-`date` file
Open the reporting file to find which LV/Filesystem is highly utilized, that can hint you about the processes which are causing the issue.

In topas, monitor Disk  tab to check the highly utilized disks, check the VG and LVs associated with those disks.

Sometimes it shows 0% utilization, run “chdev –l sys0 –a iostat=true”  and then see topas.
Run, sar –d 2 10 

Also, after identifying the causing VG, enable statistics on all associated LVs.

lvmstat -e -v VGname
or 
lvmstat -e –l LVname

then when required, run lvmstat –l LVname  2 50
or 
lvmstat –v VGname 2 50
to monitor statistics of the LVM I/O.

Important: check errpt report to ensure there is no error related to fcs/disk/adapter/driver which will definitely cause high I/O. 

For SDD disks, Check if “datapath query adapter” must not show any error.
[root@CNDAFXHAAPZP02:/]$ datapath query adapter

Active Adapters :2

Adpt#     Name   State     Mode             Select     Errors  Paths  Active
    0   fscsi1  NORMAL   ACTIVE               5719          0    102       0
    1   fscsi0  NORMAL   ACTIVE                  0          0    102       0

“datapath query device”	must not show CLOSED state of vpath disks.
PVID and VGname should appear with vpath only in lspv for Storage Multipathing Disks.

“lssrc -s sddsrv”  must be active
For PCM drivers, “lssrc –s pcmsrv” must be active and in “pcmpath query adapter” all adapters must be Active.

High I/O in paging disks can be because of high paging. Please confirm paging usage % must not be more that 8-10. Check if sufficient paging is configured.

Also, run “df –g” to find if any OS mount point is not full and if any nfs mount point is not in unavailable mode.

Also check if any LV has stale PPs, log a call in that case.
Async I/O performs major role in db2 database if High I/O wait is reported.
Check using “aioo –a” command the no. of aio servers defined, also enable it in “smit aio”

For starters:
•	maxserver = 125% of datafiles ( container) count
•	minserver = half of maxserver

------------------------Memory utilization--------------------------------

AIX OS might use high amounts of physical memory for file cache by
design to ensure optimal system performance. If some of that memory is
needed for something else at some point, an appropriate part of the file
cache will be released to accommodate for that.
AIX memory management is somewhat different from other traditional UNIX
Operating systems. Memory utilization on AIX systems typically runs 
around 100%. This is often a source of concern. However, high memory 
utilization in AIX does not imply the system is out of memory. AIX uses
the free memory to cache the files to increase the IO performance. Also
by design, AIX leaves files it has accessed in memory. This 
significantly improves performance when AIX re-accesses these files 
because they can be reread directly from memory, not from the disk. When
AIX needs memory for some process, it discards files using a "least 
used" algorithm. This generates no I/O and has almost no performance 
impact under normal circumstances. 


Why Aix use all memory 

IF Aix server utilizing high memory & but dont utilize paging space, I don't see  any issue on it.Becuase AIX server doing exactly as it should, AIx server  using all its resources to maximize performance, using memory to cache disk blocks to reduce disk I/O.
95%+ memory use is perfectly normal with AIX - its no mean you have run out of memory. Would you prefer to aix to not use a large chunk of memory & keep it unused,The would be a total waste of your money, it is not a good idea. If your workload changes and needs more memory then AIX will alter the memory currently used for caching disk blocks or even reduce the cache size in favour of newly started programs - this is automatic and dynamically controlled by the kernel.

How to find the actucal mememory uses in aix
stlsydunx11# svmon -G
               size       inuse        free         pin     virtual   mmode
memory     49807360    46220285     3587074     6099500    44632363   Ded-E
pg space   54001664      333363

               work        pers        clnt       other
pin         4463519           0         907     1635074
in use     44437531           0     1782754


size=49807360
virtual=44632363

total mememory use=virtual/size

stlsydunx11# bc
scale=2
44831528/49807360
.90
exit
====================================


It will show used mememory total memory 

show the Total memory, Real memory, Client Page used

vmstat -v | awk ' /memory pages/ {printf("total real memory =\t %5.2f GB\n",$1/256/1024)} /free pages/ {printf("real memory free =\t %5.2f GB\n",$1/256/1024)} /client pages/ {printf("client pages used =\t %5.2f GB\n",$1/256/1024)}'; sudo svmon -G | awk ' /in use/ {printf("real memory used =\t %5.2f GB\n",($3+$5)/256/1024)} /pg space/ {printf("paging space used =\t %5.2f GB\n",$4/256/1024)}'

total real memory =      16.00 GB
real memory free =       13.52 GB
client pages used =       0.46 GB


svmon -G | awk ' /in use/ {printf("real memory used =\t %5.2f GB\n",($3+$5)/256/1024)} /pg space/ {printf("paging space used =\t %5.2f GB\n",$4/256/1024)}'

paging space used =       0.01 GB
real memory used =        2.48 GB


# svmon -Pt20 | perl -e 'while(<>){print if($.==2||$&&&!$s++);$.=0 if(/^-+$/)}'                   display the max memery process	
--------------------------------------------------------------------------------
     Pid Command          Inuse        Pin     Pgsp    Virtual 64-bit Mthrd 16MB
   16264 IBM.ServiceRM    10075       3345     3064      13310      N     Y    N
   17032 IBM.CSMAgentR     9791       3347     3167      12944      N     Y    N
   21980 zsh               9457       3337     2710      12214      N     N    N
   22522 zsh               9456       3337     2710      12213      N     N    N
   13684 getty             9413       3337     2710      12150      N     N    N
   26590 perl5.8.0         9147       3337     2710      12090      N     N    N
    7514 sendmail          9390       3337     2878      12258      N     N    N
   14968 rmcd              9299       3340     3224      12596      N     Y    N
   18940 ksh               9275       3337     2710      12172      N     N    N
   14424 ksh               9270       3337     2710      12169      N     N    N
    4164 errdemon          9248       3337     2916      12255      N     N    N
    3744 cron              9217       3337     2770      12125      N     N    N
   11424 rpc.mountd        9212       3339     2960      12290      N     Y    N
   21564 rlogind           9211       3337     2710      12181      N     N    N
   26704 rlogind           9211       3337     2710      12181      N     N    N

   
   The Pid 16 264 is the process ID that has the highest memory consumption. The Command indicates the command name, in this case IBM®.ServiceRM. The Inuse column, which is the total number of pages in real memory from segments that are used by the process, shows 10 075 pages. Each page is 4 KB. The Pin column, which is the total number of pages pinned from segments that are used by the process, shows 3 345 pages. The Pgsp column, which is the total number of paging-space pages that are used by the process, shows 3 064 pages. The Virtual column (total number of pages in the process virtual space) shows 13 310.

The detailed section displays information about each segment for each process that is shown in the summary section. This includes the virtual, Vsid, and effective, Esid, segment identifiers. The Esid reflects the segment register that is used to access the corresponding pages. The type of the segment is also displayed along with its description that consists in a textual description of the segment, including the volume name and i-node of the file for persistent segments. The report also details the size of the pages the segment is backed by, where s denotes 4 KB pages and L denotes 16 MB pages, the number of pages in RAM, Inuse, number of pinned pages in RAM ,Pin, number of pages in paging space, Pgsp, and number of virtual pages, Virtual.


svmon -P -v -t 10 | more          memory utilized will give top ten processes	
svmon -U -v -t 10 | more          Momory utilized will give top ten user	

svmon -Ut12 | grep -p "===" | egrep -v "^=|^User|^$" | awk ' {print "user: "$1"\t ----> "($2/256)"\t MB"}'   it memory utilization per user punia working 

===========================================================
Checked current physical memory status on above server and free available is above the threhold level (< 4mb cirtial an>4 and < 10 minor) please find the output below.

stlwolunx13# svmon -G -O unit=MB
Unit: MB

               size       inuse        free         pin     virtual  available   mmode
memory    160256.00   160239.75        16.3    26885.15   155868.37    4917.62   Ded-E
pg space  111616.00    10557.13

               work        pers        clnt       other
pin        21653.38           0        6.76     5225.01
in use    144597.32           0    15642.43


svmon -G -O unit=auto

# svmon -G -O unit=auto
Unit: auto
--------------------------------------------------------------------------------------
               size       inuse        free         pin     virtual  available   mmode
memory      360.00G     225.26G     134.74G       54.7G     194.80G    153.72G     Ded
pg space      48.0G     434.02M

               work        pers        clnt       other
pin           43.7G          0K     172.55M       10.9G
in use      194.80G          0K       30.5G



==============================================================================================
memory:
------------
topas -P    This does not tell how much of the application is paged out but how much of the application memory is backed by paging space.
            (things in memory (working segment) should be backed by paging space by the actual size in memory of the process.) 
			

ps aux | head -1 ; ps aux | sort -rn +3 | head -20                                   top memory processes (the above is better)
ps -ef | grep -c LOCAL=NO        shows the number of oracle client connections (each connection takes up memory, so if it is high then...)

paging:
-------------
svmon -Pg -t 1 |grep Pid ; svmon -Pg -t 10 |grep "N"                                 top 10 processes using the most paging space
svmon -P -O sortseg=pgsp                                                             shows paging space usage of processes


# ps gv | head -n 1; ps gv | egrep -v "RSS" | sort +6b -7 -n -r
    PID    TTY STAT  TIME PGIN  SIZE   RSS   LIM  TSIZ   TRS %CPU %MEM COMMAND
 393428      - A    10:23 2070 54752 54840 32768    69    88  0.0  5.0 /var/opt
 364774      - A     0:08  579 28888 28940 32768    32    52  0.0  3.0 [cimserve]
 397542      - A     0:18  472  6468  7212    xx   526   744  0.0  1.0 /usr/sbi
 344246      - A     0:02   44  7132  7204 32768    50    72  0.0  1.0 /opt/ibm

RSS:    The amount of RAM used for the text and data segments per process. PID 393428 is using 54840k. (RSS:resident set size)
%MEM:    The actual amount of the RSS / Total RAM. Watch for processes that consume 40-70 percent of %MEM.
TRS:    The amount of RAM used for the text segment of a process in kilobytes.
SIZE:    The actual amount of paging space (virtual mem. size) allocated for this process (text and data).

How much big is the process in memory? It is the RSS size.
--------------------------------------
# Start nmon monitoring for the day.
00 00 * * * (/usr/bin/nmon -dfPt -^ -m /tmp/nmon 1>/dev/null 2>&1)
# Delete nmon data older than 60 Days
00 15 * * 5 (/usr/bin/find /tmp/nmon -name "*.nmon" -type f -mtime +60 -exec rm \{\} \+ >/dev/null 2>&1)
 sanjay working 
----------------------------------------------
Checking memory usage with nmon:

nmon --> t (top processes) --> 4 (order in process size)

  PID       %CPU     Size      Res     Res      Res     Char    RAM      Paging         Command
            Used       KB      Set     Text     Data     I/O     Use   io   other repage
16580722     0.0   226280   322004   280640    41364        0    5%      0      0      0 oracle
9371840      0.0   204324   300904   280640    20264        0    5%      0      0      0 oracle
10551416     0.0   198988   305656   280640    25016        0    5%      0      0      0 oracle
8650824      0.0   198756   305428   280640    24788        0    5%      0      0      0 oracle

Size KB: program on disk size
ResSize: Resident Set Size - how big it is in memory (excluding the pages still in the file system (like code) and some parts on paging disks)
ResText: code pages of the Resident Set
ResData: data and stack pages of the Resident Set          

regarding ORACLE:
ps -ef | grep -c LOCAL=NO

This will show how many client connections we have. Each connections take up some memory, sometimes if there are memory problems too many users are logegd in causing this triouble.
--------------------------------------

shared memory segments:

root@aix2: /root #  ipcs -bm
IPC status from /dev/mem as of Sat Sep 17 10:04:28 CDT 2011
T        ID     KEY        MODE       OWNER    GROUP     SEGSZ
Shared Memory:
m   1048576 0x010060f0 --rw-rw-rw-     root   system       980
m   1048577 0xffffffff D-rw-rw-rw-     root   system       944
m   4194306 0x78000238 --rw-rw-rw-     root   system  16777216
m   1048579 0x010060f2 --rw-rw-rw-     root   system       976
m        12 0x0c6629c9 --rw-r-----     root   system   1663028
m        13 0x31000002 --rw-rw-rw-     root   system    131164
m 425721870 0x81fc461c --rw-r-----   oracle oinstall 130027520
m        15 0x010060fa --rw-rw-rw-     root   system      1010
m   2097168 0x849c6158 --rw-rw----   oracle oinstall 18253647872


It will show our memory segments, who owns them and what their size (in bytes). It shows the maximum allocated size, that a memory segment can go to. It does not mean it is allocated, but the exception is Oracle (and DB2).
Oracle line shows the SGA for Oracle. (This memory is allocated for Oracle. It is 18GB in this case)


IBM script for checking what is causing paging space activity:
-----------------------------------------------------------------
(it will run until po will be 50 then saves processes, svmon and exists)

#!/usr/bin/ksh
/usr/bin/renice -n -20 -p $$
while [ true ]
do
  vmstat -I 1 1 | tail -1 | awk '{print $9}' | read po
  if [[ $po -gt 50 ]]
  then
      ps -ef > ps.out &
      svmon -G > svmon.G &
      exit 0
  fi
done


My script for monitoring memory, paging activity:
----------------------------------------------------

#!/usr/bin/ksh
/usr/bin/renice -n -20 -p $$

while [ true ]; do
echo `date` "-->" `svmon -G | head -2 | tail -1` "-->" `vmstat -v | grep numperm` >> svmon.out &
echo `date` "-->" `svmon -G | head -3 | tail -1` >> paging.out &
echo `vmstat -Iwt 1 1 | tail -1` >> vmstat.out &
sleep 60
done 



svmon - RAM
----------------------------------------------

Statistics reported by svmon are expressed in terms of pages. A page is a 4K block of virtual memory while a frame is a 4K block of real memory.

These parameters show the number of both the working and persistent pages in RAM.

svmon -G             shows global memory reports (in 4K page sizes)
               size       inuse        free         pin     virtual
memory      4096000     2423149     1672851      803943     1734262
pg space    2097152      103815

               work        pers        clnt       other
pin          665509           0          99      138335
in use      1711933           0      711216

PageSize   PoolSize      inuse       pgsp        pin    virtual
s   4 KB          -    2284685     103815     731591    1595798
m  64 KB          -       8654          0       4522       8654


DETAILS ABOUT RAM:

memory - specifies statistics describing the use of real memory, including:
    size -    number of real memory frames (size of real memory) (in kbytes=4096000 * 4)
    inuse -   pages used by processes + the number of persistent pages that belonged to a terminated process and is still resident in RAM
    free -    number of frames free of all memory pools (free RAM) (amount of pages on the free list in 4k pages)
    pin -     number of frames containing pinned pages (the number of pages pinned in physical memory (RAM). This cannot be paged out)


pin - specifies statistics on the subset of real memory containing pinned pages, including:
    work -    number of frames containing working segment pinned pages
    pers -    number of frames containing persistent segment pinned pages
    clnt -    number of frames containing client segment pinned pages


in use - specifies statistics on the subset of real memory in use, including:
    work -    number of frames containing working segment pages
    pers -    number of frames containing persistent segment pages
    clnt -    mumber of frames containing client segment pages

------------------
DETAILS ABOUT PAGING SPACE:

pg space - specifies statistics describing the use of paging space.
    size -    size of paging space
    inuse -   number of paging space pages used

------------------

DETAILS ABOUT 4KB 64KB 16MB PAGES:
    PageSize -the size of the pages considered.
    Inuse -   indicates the total number of pages of PageSize in real memory in segments that are used by the user.
    Pin -     indicates the total number of pages of PageSize pinned in segments that are used by the user.
    Pgsp -    indicates the total number of pages of PageSize reserved or used on paging space by segments that are used by the user.
 
       The different values are expressed in the PageSize pages unit.

In the below case 885*16MB is reserved but nothing is using it (inuse=0)
    PageSize   PoolSize      inuse       pgsp        pin    virtual
    s   4 KB          -    4289065       9348     804589    3562062
    m  64 KB          -      10536          0       8102      10536
    L  16 MB        885          0          0        885          0
   
This could be checked with vmo as well:   
vmo -a|egrep "lgpg_regions|lgpg_size"
    lgpg_regions = 885
    lgpg_size = 16777216    <-16MB

IBM recommendation was to turn this off:
vmo -r -o lgpg_size=0 -o lgpg_regions=0     <--we did a reboot after that

-------------------------------------------------------------------------------

svmon -P 278620
-------------------------------------------------------------------------------
     Pid Command          Inuse      Pin     Pgsp  Virtual 64-bit Mthrd LPage
  278620 shm_lgpg64       13781    11319     1083    13769      Y     N     Y
     PageSize      Inuse        Pin       Pgsp    Virtual
         4 KB       5589       3127       1083       5577
        16 MB          2          2          0          2

This process uses 13781 pages in real memory. 11319 frames are pinned.
The number of pages reserved or used in paging space is 1083.

------------------------------------------------------------------------------------

     Pid Command          Inuse      Pin     Pgsp  Virtual 64-bit Mthrd  16MB
 2781436 oracle        14086839    65566  1784541 14122372      Y     N     N

16MB N: it means this process does not use the 16MB pages, N=no 

nmon -m it will show total memory free memory 



---------------------------------------------------------------------

What is Umask?
Umask is UNIX shell built command which automatically set the permission for files and directories?
Default umask is 022 and default file permission is 644 and directory permission is 755	
Calculate file permission for 022
Default file permission       : 666
Subtract umask value         : 022 (-)
Permission for new file     : 644 (rw-r–r–)
Calculate directory permission for 022
Default dir permission         : 777
Subtract umask value          : 022 (-)
Permission for new file      : 755 (rwxr-xr-x)

 	
 	
*********************user MANAGEMNET*******************************************
	
chsec -f /etc/security/user -s default -a maxage= 6     change the max age of all user to 6 week	
chsec -f /etc/security/user -s default -a minalpha=1    Specifies the minimum number of alphabetic characters in a password.	
chsec -f /etc/security/user -s default -a minother=2 	
chsec -f /etc/security/user -s default -aminlen=8       Specifies the minimum length of a password.	
chsec -f /etc/security/user -s default -a histsize=4    Specifies the number 8  of previous  passwords a user  cannot reuse. 	
chsec -f /etc/security/user -s default -a pwdwarntime=14Specifies the number  of days before the  system issues a  warning that a  password change is  required.
chsec -f /etc/security/user -s default -a loginretries=4 

--------------------------------------------------------------------------------
how to change the group of user


chgroup id=205 arboradm
chuser pgrp=arboradm arbor

----------------------------------------------------------------------------------

 Change the UID number

On any modern system:

usermod -u 20959 gking26

For older AIX systems use:

chuser id=20959 gking26

You should also ensure the gecos field is up to date. If not:

usermod -u 20959 -c "Grant King, WCCUNIX" gking26

For older AIX systems use:

chuser id=20959 gecos="Grant King, WCCUNIX" gking26

Change ownership of all files owned by the user

For example, if gking26's old UID number was 98765:

find / -user 98765 -ls  #check the files are the right ones you need to change

find / -user 98765 -exec chown gking26 '{}' \;

=======================================================

how to check last reboot

last reboot

or 

who -b

==========================================================

Item 	Description
/etc/utmp 	                Contains a record of users logged into the system.
/var/adm/wtmp 	                Contains connect accounting information.
/etc/security/failedlogin 	Contains a record of invalid login attempts.

---------------------------------------------------------------

	
for i in `logins|awk '{print $1}'`;do echo "$i:Se1fc@re"|chpasswd -c ;done       reset the all user of /etc/passwd	
unlock	
How to check fail login	
who /etc/security/failedlogin | grep -i unmgr007| tail -10	
	
how to check the password expire date	
[root@CNDALOTSDBDP01:/tmp]$ pwdadm -q db2admin	
db2admin:	
        lastupdate = 1360852600	
[root@CNDALOTSDBDP01:/tmp]$ perl -e 'print scalar(localtime(1425240077)), "\n"'	
Thu Feb 14 20:06:40 2013	
[root@CNDALOTSDBDP01:/tmp]$	
	
	
 	
How to change ulimit	
chuser fsize=-1 cpu=-1 data=-1 stack=-1 core=-1 rss=-1 nofiles=-1 stack_hard=-1 h416685a
	
User id creation manully in Linux	
useradd -c "744/I/01260F//Shashi Mushini_OLM_ID_a1142604_db2_I" -m -d /home/migrateLINIX	
useradd -c "44/I/046500//Lalatendu_Patra_OLM_ID_A1093096_UNIX_I" -m -d /home/unmgr007 unmgr007     AIX	
mkuser id=222 akram	
	
	
useradd -c "744/I/021873//Pradeep_Sharma_OLM_ID_A1488877_WAS_I" -m -d /home/wasadmin wasadmin	
useradd -c "744/I/00350J//Ali_Mohammed_OLM_ID_A1094653_DB_I" -m -d /home/airinst1 airinst1	
useradd -c "744/I/00350J//Ali_Mohammed_OLM_ID_A1094653_DB_I" -m -d /home/airfenc1 airfenc1	
useradd -c "744/I/043310//Manu_Katiyar_OLM_ID_A1095184_ORADBA_I" -m -d /home/oracle oracle 	

useradd -u 21432 -g wccunix -c "Akram Ali, Unix System Admin" -m -d /home/aali27 aali27
	
	
Change Gecos value of user	
chuser "gecos=7744/I/08075C//Sharma.Meenakshi" migrate   for aix	
usermod -c "744/I/511279//Anand Kumar_OLM_ID_A1484059_csd_A" kycfinal     for linux	
	
for i in `cat ipfile1`; do echo $i; ssh $i sudo chuser "gecos=744/I/511280//SatishKumarjaiswal_OLM_ID_A1485198_OPS_O"  A1485198; done	
	
for i in `cat ipfile1`; do echo "done for $i"; ssh $i sudo echo "A1485198:July#3121"|chpasswd -c A1485198; done	
	
echo "A1095231:super@321"|chpasswd -c   reset the password	
	
usermod -G postpaid a1tiayby to add the user name in group	


GUID and UID mapping linux	
[root@dr_West_uc_app02 ~]# cat /etc/passwd |grep -i 575	
[root@dr_West_uc_app02 ~]# cat /etc/group |grep -i 575	
[root@dr_West_uc_app02 ~]# groupmod -g 575 unmgr007	
[root@dr_West_uc_app02 ~]# usermod -u 575 -g 575 unmgr007	
[root@dr_West_uc_app02 ~]# cat /etc/passwd |grep -i unmgr007	
unmgr007:x:575:575:744/I/046500//Lalatendu_Patra_OLM_ID_A1093096_UNIX_I:/home/unmgr007:/bin/bash	
[root@dr_West_uc_app02 ~]# ls -ld /home/unmgr007	
drwx------  4 unmgr007 unmgr007 4096 May 30 17:32 /home/unmgr007	
[root@dr_West_uc_app02 ~]# 	
	
How to unlock the user in linux	
faillog -r -u bluesquarefor unlocking 	
faillog -u bluesquare   for checking  the user lock or not	
	
[root@CNDABIFFAPZP05:/tmp]$ lsuser tadmuser	
tadmuser id=207 pgrp=staff groups=staff home=/home/tadmuser shell=/usr/bin/ksh gecos=744/I/07383F//Gaurav_Raijada_OLM_ID_A1255147_TOOLS_I login=true su=true rlogin=true daemon=true admin=false sugroups=ALL admgroups= tpath=nosak ttys=ALL expires=0 auth1=SYSTEM auth2=NONE umask=77 registry=files SYSTEM=compat logintimes= loginretries=3 pwdwarntime=14 account_locked=false minage=0 maxage=6 maxexpired=2 minalpha=1 minother=2 mindiff=1 maxrepeats=2 minlen=8 histexpire=1 histsize=4 pwdchecks= dictionlist= fsize=-1 cpu=-1 data=262144 stack=65536 core=2097151 rss=65536 nofiles=2000 time_last_login=1324637813 time_last_unsuccessful_login=1324534113 tty_last_login=ssh tty_last_unsuccessful_login=ssh host_last_login=10.14.101.230 host_last_unsuccessful_login=10.14.101.230 unsuccessful_login_count=0 roles=	
[root@CNDABIFFAPZP05:/tmp]$ chuser gecos=744/I/917409//SubramaniamAnandan_OLM_ID_A1212174_DR_I tadmuser	
[root@CNDABIFFAPZP05:/tmp]$ lsuser tadmuser	
tadmuser id=207 pgrp=staff groups=staff home=/home/tadmuser shell=/usr/bin/ksh gecos=744/I/917409//SubramaniamAnandan_OLM_ID_A1212174_DR_I login=true su=true rlogin=true daemon=true admin=false sugroups=ALL admgroups= tpath=nosak ttys=ALL expires=0 auth1=SYSTEM auth2=NONE umask=77 registry=files SYSTEM=compat logintimes= loginretries=3 pwdwarntime=14 account_locked=false minage=0 maxage=6 maxexpired=2 minalpha=1 minother=2 mindiff=1 maxrepeats=2 minlen=8 histexpire=1 histsize=4 pwdchecks= dictionlist= fsize=-1 cpu=-1 data=262144 stack=65536 core=2097151 rss=65536 nofiles=2000 time_last_login=1324637813 time_last_unsuccessful_login=1324534113 tty_last_login=ssh tty_last_unsuccessful_login=ssh host_last_login=10.14.101.230 host_last_unsuccessful_login=10.14.101.230 unsuccessful_login_count=0 roles=	
[root@CNDABIFFAPZP05:/tmp]$ chuser id=204 tadmuser	
[root@CNDABIFFAPZP05:/tmp]$ ls -ld /home/tadmuser	
drwx------    3 207      staff 256 Dec 23 16:29 /home/tadmuser	
[root@CNDABIFFAPZP05:/tmp]$ chown -R tadmuser:staff /home/tadmuser	
[root@CNDABIFFAPZP05:/tmp]$ lsuser tadmuser	
tadmuser id=204 pgrp=staff groups=staff home=/home/tadmuser shell=/usr/bin/ksh gecos=744/I/917409//SubramaniamAnandan_OLM_ID_A1212174_DR_I login=true su=true rlogin=true daemon=true admin=false sugroups=ALL admgroups= tpath=nosak ttys=ALL expires=0 auth1=SYSTEM auth2=NONE umask=77 registry=files SYSTEM=compat logintimes= loginretries=3 pwdwarntime=14 account_locked=false minage=0 maxage=6 maxexpired=2 minalpha=1 minother=2 mindiff=1 maxrepeats=2 minlen=8 histexpire=1 histsize=4 pwdchecks= dictionlist= fsize=-1 cpu=-1 data=262144 stack=65536 core=2097151 rss=65536 nofiles=2000 time_last_login=1324637813 time_last_unsuccessful_login=1324534113 tty_last_login=ssh tty_last_unsuccessful_login=ssh host_last_login=10.14.101.230 host_last_unsuccessful_login=10.14.101.230 unsuccessful_login_count=0 roles=	
[root@CNDABIFFAPZP05:/tmp]$	
	
	
How you find which user using the file system?	
A user is using a directory within the file system as their current working directory. The fuser command appends the letter c to the process IDs of all processes that are using a directory as their current working directory, and the-u flag identifies the owner of the process. It can be used with the find command, as shown in the following example:	
# find /home -type d -exec fuser -u {} \;	
/home:	
/home/lost+found:	
/home/guest:	
/home/kenzie: 3548c (kenzie)	
#fuser -c /home	
	
	
chsec -f /etc/security/user -s default -a histsize=4	
	
chsec -f /etc/security/user -s default -a pwdwarntime=14	
chsec -f /etc/security/user -s default -a minlen=8	
	
chsec -f /etc/security/user -s default -a maxage=45	
chsec -f /etc/security/user -s default -a minother=2	
	
chsec -f /etc/security/user -s default -a minlen=8	
chsec -f/etc/security/user -s default -a maxage=45
chsec -f/etc/security/user -s default -aloginretries	
	
chsec -f /etc/security/user -s default -a minalpha=1	
no -p -o tcp_pmtu_discover=0	
no -p -o ipsrcroutesend=0  	
no -p -o ipsrcrouteforward=0	
no -p -o ip6srcrouteforward=0	
no -p -o clean_partial_conns=1	
no -p -o tcp_icmpsecure=1
/usr/sbin/no -p -o tcp_pmtu_discover=0	
no -o 


chdev -l en17 -a tcp_recvspace=262144 -a tcp_sendspace=262144 -a rfc1323=1 -P	


/usr/sbin/no -r -o sb_max=6192000
/usr/sbin/no -r -o tcp_sendspace=4096000
/usr/sbin/no -r -p tcp_recvspace=4096000
/usr/sbin/no -r -o udp_sendspace=65536
/usr/sbin/no -r -o udp_recvspace=655360
/usr/sbin/no -r -o rfc1323=1
/usr/sbin/no -r -o ipqmaxlen=150
/usr/sbin/no -r -o clean_partial_conns=1
/usr/sbin/no -r -o tcp_keepidle=600
/usr/sbin/no -r -o tcp_keepintvl=10
/usr/sbin/no -r -o tcp_keepinit=40
/usr/sbin/no -r -o tcp_timewait=1
/usr/sbin/no -r -o tcp_finwait2=60
/usr/sbin/no -r -o tcp_ephemeral_low=1024
Resource (ulimit):
time(seconds) unlimited
file(blocks) unlimited
data(kbytes) unlimited
stack(kbytes) 4194304
memory(kbytes) unlimited
coredump(blocks) unlimited
nofiles(descriptors) unlimited
threads(per process) unlimited
processes(per user) unlimited
Process:
chdev -l sys0 -a maxuproc=4096 -P
Virtual Memory:
vmo -p -o lru_file_repage = 0
vmo -p -o maxclient% = 90
vmo -p -r maxperm%=90
vmo -p -o minperm%=5 

vmo -p -o maxclient%=90	
	

vmo -L  it will show reboot required


vmo -p -o npskill=265728
vmo -p -o npsscrubmax=2125824
vmo -p -o npsscrubmin=1594368
vmo -p -o npswarn=1062912

##############  Set VMO and NO Parameters ####################
	vmo -p -o maxclient% = 90
[root@CNDAABTSAPZP14:/IBM/ITM]$ vmo -a |grep max	
 maxclient% = 80	
    maxfree = 128	
    maxperm = 16396806	
   maxperm% = 80	
     maxpin = 16777216	
    maxpin% = 80	
     strict_maxclient = 1	
       strict_maxperm = 0	
[root@CNDAABTSAPZP14:/IBM/ITM]$ 	
[root@CNDAABTSAPZP14:/IBM/ITM]$ vmo -p -o maxclient%=90
Setting maxclient% to 20 in nextboot file	
Setting maxclient% to 20	
[root@CNDAABTSAPZP14:/IBM/ITM]$ 	
[root@CNDAABTSAPZP14:/IBM/ITM]$ vmo -p -o maxperm%=90
Setting maxperm% to 20 in nextboot file	
Setting maxperm% to 20	
[root@CNDAABTSAPZP14:/IBM/ITM]$ vmo -p -o minperm%=5	
Setting minperm% to 5 in nextboot file	
Setting minperm% to 5	
[root@CNDAABTSAPZP14:/IBM/ITM]$ no -a |grep keepidle	
   tcp_keepidle = 14400	
[root@CNDAABTSAPZP14:/IBM/ITM]$ no -p -o tcp_keepidle=600	
Setting tcp_keepidle to 600	
Setting tcp_keepidle to 600 in nextboot file	
[root@CNDAABTSAPZP14:/tmp]$ no -a |grep keepidle	
   tcp_keepidle = 600	
[root@CNDAABTSAPZP14:/tmp]$ 	
	
	
vmo -p -o maxclient%=20	
vmo -p -o maxperm%=20	
vmo -p -o minperm%=5

# vmo -a -F | grep -i minperm%
                      minperm% = 5
root@nzapdb510 / >
#


	
 
no -p -o tcp_keepidle=600	
no -p -o tcp_icmpsecure=1	
no -p -o tcp_pmtu_discover=0	
no -p -o ipsrcroutesend=0  	
no -p -o ipsrcrouteforward=0	
no -p -o ip6srcrouteforward=0	
no -p -o clean_partial_conns=1	
no -p -o tcp_icmpsecure=1
no -p -o tcp_pmtu_discover=0	
no -p -o ipsrcroutesend=0  	
no -p -o ipsrcrouteforward=0	
no -p -o ip6srcrouteforward=0	
no -p -o clean_partial_conns=1	
no -p -o tcp_icmpsecure=1
no -p -o tcp_recvspace=262144	
no -po ipforwarding=1        enable the ipforwding
no -po ipforwarding=0        disable the ipforwarding	
no  -r -o  ipqmaxlen=512
no -p -o rfc1323=1	
no -p -o sb_max=2*655360	
no -p -o tcp_nodelayack=1 	
no -p -otcp_recvspace=65536	
no -p -o tcp_sendspace=65536	
no -p -o udp_recvspace=655360	
no -p -oudp_sendspace=65536






AIX Tuning:	
increase the number of AIO servers:	

lsattr -El aio0

increase the number of AIO servers:
chdev -P -l aio0 -a minservers=128
chdev -P -l aio0 -a maxservers=256
chdev -P -l aio0 -a maxreqs=16384 
chdev –l sys0 –a maxuproc=4096 	
chdev -l aio0 -a autoconfig=available
	

------------------------------
enable the aio
	
lsattr -El sys0
lsattr -El aio0
smit aio
mkdev -l aio0
aio -a
aioo -a
ps -ef | grep -i pmon
cd /home/hacmp/


ioo -p -o aio_active=1
ioo -r -o aio_active=1
ioo -p -o pd_npages=65536
----------------------------------

ioo –p –o pd_npages=65536

vmo –p -o lru_file_repage=0 –o minperm%=10 -o maxperm%=90 -o maxclient%=50 –o minfree=8000 –o maxfree=8512 
  
ioo –p –o j2_maxPageReadAhead=512 -o j2_dynamicBufferPreallocation=64 -o j2_maxRandomWrite=32 -o j2_minPageReadAhead=64 -o j2_nBufferPerPagerDevice=3072 -o j2_nPagesPerWriteBehindCluster=64 -o maxrandwrt=32 -o numfsbufs=800 -o pv_min_pbuf=2048 –o lvm_bufcnt=16 –o minpgahead=128 –o maxpgahead=512
  
no -p -o sb_max=1310720 -o rfc1323=1 -o ipqmaxlen=250 -o udp_sendspace=65536 -o udp_recvspace=655360 -o tcp_sendspace=221184 -o tcp_recvspace=221184 -o tcp_mssdflt=1440 -o tcp_nodelayack=1

----------------------------
schedo -L | grep -i vpm_fold_policy

vpm_fold_policy  

=============================================================

riomelh101# cat .rhosts_delete
riosydhcws1 root
riomelh101# 

================================================

TO CREATE THE VERTUAL MACHINE  LINUX 

Base machine 10.116.1.167
virsh list

virsh create /etc/libvirt/qemu/dr_west_uc_app06.xml
virsh create /etc/libvirt/qemu/dr_North_uc_app06.xml
virsh create /etc/libvirt/qemu/dr_east_uc_app06.xml
virsh create /etc/libvirt/qemu/dr_South_uc_app06.xml	
 	
	
	
	
****************************DR DRIL****************	
Production server	
	
DR DRIL Packs Chennai	
1-- take reboot script	
2- down the app/db	
3-take hmc session of prodction server	
4- take snap shot of 	
   ifconfig -a  and host of prduction server	
5- stop the cluster 	
    smitty cl_stop	
4- manully up network interface of Syncrization IP	
5- manully add route add     /home/hacmp/start .sh (somting) name (ask to nitin)	
6- manully varyon all vg	
7- manully mount of varryon vg mount point	
8-   network team will do nating  after nating server ip will ping	
	
	
DR Sever IP	
	
Rolback DR to Production	
	
1- Delete route add which we have add in prodcution server	
2- downt the ent5  (syncrization ip interface)	
3- unmount all mount point of production server	
4- varry off all vg 	
5- start the HA smitty cl_start	
6- check all thing	
7- check reboot script	
	
*******************************************************	
Port closer


How to check port open or not	
	
netstat -Aan | grep -i *.22	
netstat -Aan | grep -i 2222	
cat /etc/services | grep -i 22	
	
How to close the port	
#cat /etc/services	
root@pacs_CDR_Mohali_ha:/tmp]$ netstat -Aan |grep -w 80	
f1000e00007b43b8 tcp        0      0  *.80        *.*         LISTEN	
f1000e0000a35a00 udp4       0      0  10.14.80.188.123      *.*        	
f1000e0000f2c200 udp        0      0  10.14.80.255.6178     *.*        	
f1000e0000f24200 udp4       0      0  10.14.80.188.6178     *.*        	
root@pacs_CDR_Mohali_ha:/tmp]$ rmsock f1000e00007b43b8 tcpcb	
The socket 0xf1000e00007b4008 is being held by proccess 2883878 ().	
ps -ef | grep -i 2883878	
kill -9 2883878	
Put the entry of # on front of services port	
refresh -s inetd	



We have seen multiple times that rmsock fails to give information that which process is using a particular port. You may get the error as given below: 

Example : Need to check which process using port # 3999

smsock fails : 

[root@montool:/tmp]$ netstat  -Aan | grep -w 3999
f1000e00058783b8 tcp        0      0  *.3999      *.*         LISTEN
[root@montool:/tmp]$ rmsock f1000e00058783b8 tcpcb
getprocdata: malloc failed


USE KDB :

Steps : 

1. With root user type kdb
# kdb
WARNING: Version mismatch between unix file and command kdb
 START    END <name>
0000000000001000 0000000004070000 start+000FD8
F00000002FF47600 F00000002FFDF9C0 __ublock+000000
000000002FF22FF4 000000002FF22FF8 environ+000000
000000002FF22FF8 000000002FF22FFC errno+000000
F1000F0A00000000 F1000F0A10000000 pvproc+000000
F1000F0A10000000 F1000F0A18000000 pvthread+000000
read vscsi_scsi_ptrs OK, ptr = 0xF1000000C017D3A0
(0)> sockinfo f1000e00058783b8 tcpcb
2. Scroll down with the help of space bar and check for the section  (proc/fd)
proc/fd: fd: 3       
    SLOT NAME     STATE      PID    PPIDADSPACE  CL #THS
 
pvproc+00FC00   63*httpd    ACTIVE 03F006C 0000001 0000000A81E28480   0 0001

3. PID value shows is 03F006C which is in hexadecimal. Need to convert the same to decimal.
4. Put Ctrl+C to return to kdb mode.
5. Command to convert : hcal 03F006C print decimal value of PID
(0)> hcal 03F006C print decimal value of PID
Value hexa: 003F006CValue decimal: 4128876
6. PID of the process is 4128876. 
7. Type q to come back to shell. 
8. You may grep this PID from ps to check the process. 
[root@montool:/tmp]$ ps -ef | grep  4128876
    root  4128876        1   0   Dec 09      -  0:26 /nmon/IBM/HTTPServer/bin/httpd -d /nmon/IBM/HTTPServer -k start	
---------------------main nmon----------------------


nmon

┌─HELP─────────most-keys-toggle-on/off────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│h = Help information     q = Quit nmon   0 = reset peak counts │
│+ = double refresh time  - = half refreshr = ResourcesCPU/HW/MHz/AIX     │
│c = CPU by processor     C=upto 128 CPUs p = LPAR Stats (if LPAR)        │
│l = CPU avg longer term  k = Kernel Internal       # = PhysicalCPU if SPLPAR       │
│m = Memory & Paging      M = Multiple Page Sizes  P = Paging Space       │
│d = DiskI/O Graphs       D = DiskIO +Service times o = Disks %Busy Map   │
│a = Disk Adapter         e = ESS vpath stats       V = Volume Group stats│
│^ = FC Adapter (fcstat)  O = VIOS SEA (entstat)    v = Verbose=OK/Warn/Danger      │
│n = Network stats        N=NFS stats (NN for v4)   j = JFS Usage stats   │
│A = Async I/O Servers    w = see AIX wait procs   "="= Net/Disk KB<-->MB │
│b = black&white mode     g = User-Defined-Disk-Groups (see cmdline -g)   │
│t = Top-Process --->     1=basic 2=CPU-Use 3=CPU(default) 4=Size 5=Disk-I/O        │
│u = Top+cmd arguments    U = Top+WLM Classes       . = only busy disks & procs     │
│W = WLM SectionS = WLM SubClasses│
│[ = Start ODR  ] = Stop ODR      │
│~ = Switch to topas screen       │
│Need more details?  Then stop nmon and use: nmon -?    

nmon -m     for memory utilization 
nmon -a     fcs utilzation   disk adapter 
nmon -d     disk utilzation 
nmon -n      network utilzation 
nmon -c     cpu 



nmon.sh

#!/usr/bin/bash 
cd /osbkp/nmon 
kill -9 `ps -efa|grep "\./nmon"|grep "aix"|awk '{print $2}'` 
for files in `ls /osbkp/nmon/*.nmon` 
do 
if [ `ls -l ${files}|cut -c8` == "-" ] 
then 
chmod a+r ${files} 
fi 
done 
cd /osbkp/nmon 
find . -mtime +15 -print | grep `hostname` | grep .nmon | awk -F "/" '{print $2}' > filelist_del  
for fil in `cat filelist_del`  
do  
rm /osbkp/nmon/$fil 
done 
nmon -fT -s 30 -c 550


cp /tmp/nmon.sh /osbkp/nmon/nmon.sh

---------------------------------------------------
check ssh status in csc
stlwhoosh# /opt/soe/local/openssh-5.4p1/etc/init.d/SOE_sshd status 
sshd (pid 29770 29763 23560 19093 19087 18397 14004 13985 13417 13114 9041 8992 7878 6402 2518 2384 490 484) is running...
stlwhoosh# 
===================================================
find the file
find command
find / -name  sshd.conf  -print

how to find the file
find / -name .profile            akram working

   for ssh this can be used:
   # ssh -v dummyhost 2>&1 | grep "Reading configuration" (it will show location of ssh_config: debug1: Reading configuration data /etc/ssh/ssh_config)

***************************************java***************************************************	
root@CNDATAMSDBOP12:/tmp]$ java -version	
java version "1.5.0"	
Java(TM) 2 Runtime Environment, Standard Edition (build pap32devifx-20110211b (SR12 FP3 +IZ94331))	
IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 AIX ppc-32 j9vmap3223ifx-20101130 (JIT enabled)	
J9VM - 20101129_69669_bHdSMr	
JIT  - 20100623_16197ifx1_r8	
GC   - 20100211_AA)	
JCL  - 20110208	
	
First check java version6 is installed or not if installed then set in inviroment file	
	
	
[root@CNDATAMSDBOP12:/tmp]$ lslpp -l | grep -i java	
  Java5.sdk      5.0.0.395  COMMITTED  Java SDK 32-bit 	
  Java5_64.sdk   5.0.0.395  COMMITTED  Java SDK 64-bit 	
  Java6.sdk      6.0.0.265  COMMITTED  Java SDK 32-bit 	
  db2_08_01.cj   8.1.1.144  COMMITTED  Java Common files 	
  db2_08_01.jdbc 8.1.1.144  COMMITTED  Java Support 	
       8.1.1.144  COMMITTED  Java Help (HTML) -	
  gskjs.rte       7.0.3.18  COMMITTED  AIX Certificate and SSL Java	
  gskjt.rte       7.0.3.18  COMMITTED  AIX Certificate and SSL Java	
         3.1.0.0  COMMITTED  RSCT GUI JAVA Msgs - U.S.	
         3.1.0.0  COMMITTED  RSCT RMC JAVA Msgs - U.S.	
  Java5.sdk      5.0.0.395  COMMITTED  Java SDK 32-bit 	
  Java5_64.sdk   5.0.0.395  COMMITTED  Java SDK 64-bit 	
  Java6.sdk      6.0.0.265  COMMITTED  Java SDK 32-bit 	
[root@CNDATAMSDBOP12:/tmp]$ java -version	
java version "1.5.0"	
Java(TM) 2 Runtime Environment, Standard Edition (build pap32devifx-20110211b (SR12 FP3 +IZ94331))	
IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 AIX ppc-32 j9vmap3223ifx-20101130 (JIT enabled)	
J9VM - 20101129_69669_bHdSMr	
JIT  - 20100623_16197ifx1_r8	
GC   - 20100211_AA)	
JCL  - 20110208	
	
java5 should be updated by java6 in two place	
vi /etc/environment	
PATH=/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java6/jre/bin:/usr/java6/bin



How to set java seting in user profile 

### JAVA
export INFA_JDK_HOME=/usr/java8_64
export INFA_JRE_HOME=/usr/java8_64/jre
export JAVA_HOME=/usr/java8_64
 	
	
=======================================
java certificate issue 

The solution applied was to activate clone disk to take old copy of  "/alt_inst/usr/java6/jre/lib/security/cacerts" and restore it in /usr/java6/jre/lib/security/cacerts

===================================================================================================


1-  rpm -ivh screen.rpm 

2- screen -S gpfsstorage      it will sceen session & will genrate screen process name abad.filename 

3- Then detach screen by below command 
    Ctrl+a d

4- list old screen session  
screen -list  

5 Then start old screen session
 
screen  -r gpfsstorage

---------------------------------------------------------------------------------------------------------
AIX x display


/etc/ssh/sshd_config
 change  X11Forwarding yes

from root
stopsrc -s sshd
startsrc -s sshd 

===============================================================================================

how to take remote session in linux

Ask user to run below command on his system

#aperc

2- ask his ip

3- connect


	
*******************************SUDO***********************************************************	
TL 6.1 6 	
path	
/ACTIVITY//AIX6.1 	
	
Installation of sudo 	
patch for sudo 1.7  	
/software/pk/sudo	
copy these file /software/sudo	
then run sudoinstall.sh	
	
sudo version 1.8	
path	
10.14.41.104:/home/amit/script/sudo	
and copy it on /tmp/	
and run	
sudoinstall.sh	
and check 	
	
sudo -V | head -1	
	
formula for server info file     =A197&"="&B197  =CONCATENATE(A7," = ",B7)	
---------------ITM file set location--------------	
itm error	
POWER 7 ITM agent fileset locaion 	
10.14.41.104:/software/itminstall/Gauarv/	
10.14.101.157      ITM server IP	
	
Power 6 ITM agent fileset location	
/software/itminstall/ITM6.2AIXAgent64Bit	
/software/itminstall/ITM6.2AIXAgent32Bit	
	
itm issue	
POWER 7 ITM INSTALATION	
	
.Install the ITM supplied Java from an IBM Tivoli Monitoring V6.21.03.00 or higher installation (media) image (V6.22.04.00). 	
  1).Change directory to the ITM 6.21.03.00 media, not the failing media. 	
  2).Copy silent_install.txt to /tmp and modify it.	
     Change the line "INSTALL_PRODUCT=all" to "INSTALL_PRODUCT=ui"	
     Save the file. 	
  3).Run install.sh silently specifying the desired installation directory( install image for 6.21.03.00)	
    # sh install.sh -h /IBM/ITM -q -a -p /tmp/silent_install.txt	
2.Install from the original media which previously failed. ( install image for 6.21.00.00)	
  1).Change to the directory where install.sh is located for the original failing media, not the ITM 6.21.03.00 media. 	
  2).Run the following command to attempt the installation. Install into the same installation directory where you just installed ITM 6.21.03.00:	
    # ./install.sh	
	
Note : ITM higher version fixpack image V6.22.04.00 is copied at  10.201.0.16 with name "ux_062204000_aix526".	
 	
	
	
 ITM hostname issue	
cat /IBM/ITM/config/.ConfigData/RunInfo        	
	
	
GSD checklist script location	
/nmon/menu_output/aix_script	
	
	
	
unmgr007         ALL=NOPASSWD:ALL	
	
echo "cyadmbkp      ALL=NOPASSWD:ALL" >>/etc/sudoers	
	
# User alias specification	
User_Alias      MIDDLEWARE=wasadmin, ivmgr, ss544380, idsldap	
wasadmin ALL= NOPASSWD:  /HttpServer/IHS/bin/apachectlsudo to perticullar command.	
netcool ALL= NOPASSWD: /usr/bin/netstat	
filenet ALL= NOPASSWD: /P8/verity/k2/_rs6k43/bin/k2adminstart	
filenet ALL= NOPASSWD: /P8/verity/k2/_rs6k43/bin/k2adminstop	
filenet ALL= NOPASSWD: /P8/FileNet/AE/Router/routercmd.sh	
db2inst1 ALL= NOPASSWD: /usr/sbin/lscfg	
ivmgr ALL= NOPASSWD: /usr/bin/pd_start	
ivmgr ALL= NOPASSWD: /usr/bin/pdweb	
tadmuser ALL=(root) NOPASSWD:/usr/sbin/lsof, /bin/entstat, /usr/sbin/prtconf, /usr/sbin/dmidecode, /usr/sbin/sneep, /usr/sbin/cstm	
itmuser ALL=(root) NOPASSWD:/usr/sbin/lsof, /bin/netstat	
	
	
lsof -i:<port>                check the process of any port
	
	
sudo error and solution 	
$ sudo su -	
sudo: must be setuid root	
chmod u+s /usr/bin/sudo	
	
bash-3.2# ls -ld /etc/sudoers	
-r--r-----    1 root     system         1502 Jun 08 02:29 /etc/sudoer	
*******************printer*************************************************************	
Printer:------	
	
qcan -X -PORS_C653_4F   To cancle Printer  queues	
enq -U -PORS_C653_4F    To Refresh Printer queues	
lpstat -vORS_C653_4F    Printer status	

f         it will all printer status
***********************************Trival************************************************************	
Trivial Password Mitigation" across AIX and Linux Servers 	
AIX:	
copy the "trivial.txt" to : /usr/share/dict/	
	
chown root:system  /usr/share/dict/trivial	
chmod 600 /usr/share/dict/trivial	
	
Command : chsec -f /etc/security/user -s default -a dictionlist=/usr/share/dict/trivial	
	
To Check:	
	
cat /etc/security/user |grep -i dictionlist	
	
default:	
        	
  dictionlist = /usr/share/dict/words	
 	
LINUX:	
	
	
1.  create the file /usr/share/dict/trivial	
	
2.    Copy the trivial.txt content to  :  /usr/share/dict/trivial	
	
	
3.  Run the command # create-cracklib-dict /usr/share/dict/trivial /usr/share/dict/trivial	
	
create-cracklib-dict /usr/share/dict/trivial	
	
	
	
	
*****************************************Migration*efix for asm*****************************************************	
Hi Team	
	
Please take care of below mentioned points while migrating servers (5.3 to 6.1) with ASM disks. 	
	
1. Please take ASM information as per the mail sent by Saurabh Johri on ASM disks recreation.	
2. Efix (IV10539.epkg.Z) needs to be applied on all the ASM nodes after migrating to AIX 6.1 TL6 SP06. Path of this efix is (/software/ASM-efix) on montool. 	
	
Please do not release the server to App/DB team without applying the efix. 	
	
Brijesh : Please ensure the efix is applied after migration.	
	
*************************asm******************************************************************	

	
pcmpath query essmap |grep path0 |egrep '75CGPY1103D|75CGPY1103|75CGPY1104C'find the lun and hdisk	
ls -l |egrep '14, 62|14, 63|14, 64' check the asm disk according the major and minor number	
	
ASM disks should not have PVID assigned to them. They should be removed with fallowing command before assigned to ASM:	
chdev -l hdisk9 -a pv=clear	
Get major/minor number of SAN disk assigned 	
ls -l /dev/hdisk9	
	
mknod /dev/asmdisk01 c 13 10	
chown oradb:dba /dev/asmdisk01	
chmod 644 /dev/asmdisk01	
	
mknod /dev/asmdisk02 c 13 0	
chown oradb:dba /dev/asmdisk02	
chmod 644 /dev/asmdisk02	
	
	
lquerypv -h /dev/hdisk5 it will show the orcle disk asm	
cd /dev/	
ls -ltr |grep -i asm*	
ls -ltr |grep -i ocr*	
ls -ltr |grep -i vot*	
	
if asm disk will remove we can recover as below.	
lquerypv -h /dev/hdisk	
it will show header number and disk number	
======================================================================
asm issue


ASM issue, if asm disk header cruppted after pvid clearnce, please follow below step  to fix the issue
If ASM version is 11.1.0.7 or above,

DB should be stoped
dd if=/dev/oracleasm/disks/DATA of=/tmp/DATA.dd bs=1M count=10

dd if=/dev/rhdiskasm001 of=/tmp/DATA.dd1 bs=1M count=10
dd if=/dev/rhdiskasm002 of=/tmp/DATA.dd2 bs=1M count=10
dd if=/dev/rhdiskasm003 of=/tmp/DATA.dd3 bs=1M count=10
dd if=/dev/rhdiskasm004 of=/tmp/DATA.dd4 bs=1M count=10
dd if=/dev/rhdiskasm005 of=/tmp/DATA.dd5 bs=1M count=10

3. Repair the device header in the following way.  Repeat the following example procedure for the all affected devices.
   Check AU ( Allocation Unit ) size for the disk in the following way for aus option in kfed command .

   $  kfed read /dev/oracleasm/disks/DATA | grep ausize
   kfdhdb.ausize:                  1048576 ; 0x0bc: 0x00100000
                                   ^^^^^^^

If ASM version is 11.1.0.7 or above,
$ kfed repair /dev/rhdiskasm001 aus=1048576

kfed repair /dev/rhdiskasm002 aus=1048576
kfed repair /dev/rhdiskasm003 aus=1048576
kfed repair /dev/rhdiskasm004 aus=1048576
kfed repair /dev/rhdiskasm005 aus=1048576	

4- Now start DB & it should work
	
	
*****************************************tadmuser*******************************************************************	
	
	
root@CNDBSPSSDBOP01:/var/opt/BESClient/aix_script]$ su - tadmuser	
only ROOT is allowed to check another user's expiry.	
$ bash 	
bash-3.2$ /usr/sbin/lsof	
lsof: can't open /dev/mem: Permission denied	
lsof: can't open /dev/kmem: Permission denied	
bash-3.2$ exit	
$ 	
[root@CNDBSPSSDBOP01:/var/opt/BESClient/aix_script]$ ls -ld /dev/mem	
cr--r-----    1 root     system        2,  0 Jan 19 07:46 /dev/mem	
[root@CNDBSPSSDBOP01:/var/opt/BESClient/aix_script]$ chmod 2655 /dev/mem	
[root@CNDBSPSSDBOP01:/var/opt/BESClient/aix_script]$ ls -ld /dev/kmem	
cr--r-----    1 root     system        2,  1 Jan 19 07:46 /dev/kmem	
[root@CNDBSPSSDBOP01:/var/opt/BESClient/aix_script]$ chmod 2655 /dev/kmem	
	
chmod 2655 /dev/mem	
chmod 2655 /dev/kmem	
********************************************crs***********************************************
stop the crs
	
bash-3.00# cd /ora10ghome/crshome/bin/	
bash-3.00# ./crsctl start crs	
./crsctl stop crs	


cd /u02/app/11.2.0.4/grid/bin 
OR 
cd /u01/app/11.2.0.4/grid/bin

How to check the crs status

[oracle@vm02 bin]$ crs_stat -t
Name           Type           Target    State     Host
------------------------------------------------------------
ora.esxrac.db  application    ONLINE    ONLINE    vm02
ora....c1.inst application    ONLINE    ONLINE    vm01
ora....c2.inst application    ONLINE    ONLINE    vm02
ora....serv.cs application    ONLINE    ONLINE    vm02
ora....ac1.srv application    ONLINE    ONLINE    vm01
ora....ac2.srv application    ONLINE    ONLINE    vm02
ora....SM1.asm application    ONLINE    ONLINE    vm01
ora....01.lsnr application    ONLINE    ONLINE    vm01
ora.vm01.gsd   application    ONLINE    ONLINE    vm01
ora.vm01.ons   application    ONLINE    ONLINE    vm01
ora.vm01.vip   application    ONLINE    ONLINE    vm01
ora....SM2.asm application    ONLINE    ONLINE    vm02
ora....02.lsnr application    ONLINE    ONLINE    vm02
ora.vm02.gsd   application    ONLINE    ONLINE    vm02
ora.vm02.ons   application    ONLINE    ONLINE    vm02
ora.vm02.vip   application    ONLINE    ONLINE    vm02

By checking the status of individual nodes and all the necessary applications, we can see that the VIP, GSD, Listener and the ONS daemons are alive.

[oracle@vm02 bin]$ srvctl status nodeapps -n vm01
VIP is running on node: vm01
GSD is running on node: vm01
Listener is running on node: vm01
ONS daemon is running on node: vm01
[oracle@vm02 bin]$ srvctl status nodeapps -n vm02
VIP is running on node: vm02
GSD is running on node: vm02
Listener is running on node: vm02
ONS daemon is running on node: vm02

Now checking the status of the ASM on both nodes.

oracle@vm02 bin]$ srvctl status asm -n vm01
ASM instance +ASM1 is running on node vm01.
[oracle@vm02 bin]$ srvctl status asm -n vm02
ASM instance +ASM2 is running on node vm02.

What about the database status?

 [oracle@vm02 bin]$ srvctl status database -d esxrac
Instance esxrac1 is running on node vm01
Instance esxrac2 is running on node vm02

What would be the status of the service that we created at the end of the database installation?

[oracle@vm02 bin]$ srvctl status service -d esxrac
Service fokeserv is running on instance(s) esxrac2, esxrac1

[oracle@vm02 bin]$ crsctl check crs
CSS appears healthy
CRS appears healthy
EVM appears healthy





crs_stat -t
	
**********************lsfix***************************************************************	
Linux cpu

 go to aix menu >  lunux> utility>12. Hostname,IP,Model,Serial,Firmware Detail for linux server

one file will be created  on below location

/nmon/scripts/dctool/utility-scripts

IPgiven,OStype,Hostname,IP,Model,Serial,Memory,Physical_CPUs,CPU_Core,Logical_Processor,Firmware
10.14.133.96,AIX,CNDALDWHDBDP03, 10.14.133.96,9117-MMD, 064D257,125952,,AM760_051
10.14.133.97,AIX,CNDALDWHDBDP04, 10.14.133.97,9117-MMD, 064D257,125952,,AM760_051
10.14.133.98,AIX,CNDALDWHDBDP05, 10.14.133.98,9117-MMD, 064D257,125952,,AM760_051
10.14.133.99,AIX,CNDALDWHDBDP06, 10.14.133.99,9117-MMD, 064D257,125952,,AM760_051
10.14.117.72,Linux,CNDALDWHAPZP03,10.14.117.72, BladeCenter HS23 -[7875C4A]-,06MCMD2,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.73,Linux,CNDALDWHAPZP04,10.14.117.73, BladeCenter HS23 -[7875C4A]-,06MCMC9,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.74,Linux,CNDALDWHAPZP05,10.14.117.74, BladeCenter HS23 -[7875C4A]-,06MCMC1,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.75,Linux,CNDALDWHAPZP06,10.14.117.75, BladeCenter HS23 -[7875C4A]-,06MCMB9,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.76,Linux,CNDALDWHAPZP07,10.14.117.76, BladeCenter HS23 -[7875C4A]-,06MCMC2,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.77,Linux,CNDALDWHAPZP08,10.14.117.77, BladeCenter HS23 -[7875C4A]-,06MCMC5,128834,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.78,Linux,CNDALDWHAPZP09,10.14.117.78, BladeCenter HS23 -[7875C4A]-,06MCMC4,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.79,Linux,CNDALDWHAPZP10,10.14.117.79, BladeCenter HS23 -[7875C4A]-,06MCMC0,128834,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.80,Linux,CNDALDWHAPZP11,10.14.117.80, BladeCenter HS23 -[7875C4A]-,06MCMD0,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.81,Linux,CNDALDWHAPZP12,10.14.117.81, BladeCenter HS23 -[7875C4A]-,06MCMC7,128834,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.82,Linux,CNDALDWHAPZP13,10.14.117.82, BladeCenter HS23 -[7875C4A]-,06MCMC8,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.83,Linux,CNDALDWHAPZP14,10.14.117.83, BladeCenter HS23 -[7875C4A]-,06MCMC3,128834,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.84,Linux,CNDALDWHAPZP15,10.14.117.84, BladeCenter HS23 -[7875C4A]-,06MCMD1,128962,       2,8,      32, -[TKE124PUS-1.32]-
10.14.117.85,Linux,CNDALDWHAPZP16,10.14.117.85, BladeCenter HS23 -[7875C4A]-,06MCMC6,128962,       2,8,      32, -[TKE124PUS-1.32]-

======================================================================

ls -laR /dev/disk/by-path/*     check local disk or storage disk
---------------------------------------------------------------------


	
for checking the patch releted information	
	
root@CNDANRMSOTZP02:/tmp/lssecfix/etc]$ sh -x lssecfixes -a | grep -w "*"	

How to use lssecfix:	
	
1.  Copy the latest "lssecfix" folder everytime before the patch activity from :- /home/smon/Shekhar/lssecfix to the server where patch 	
      activity is being carried out in the /tmp folder.	
2.  Post patch activity, run the command:- sh -x /tmp/LSSECFIX/etc/lssecfixes -a |grep -w "*" >> ip.txt	
	
This will give you a list of the pending patches on the server, ideally if no SOD or dependency is present, this file should be	
 blank and should not show a single result, which actually we should be targeting at.	
	
This report is mandatory to be shared by all after the patch activity while justifying the reason if any path is 	
missed.	
	
	
**********************************************************************************	
How you Resynchronizing the device configuration database (ODM)	
# synclvodm testvg	
If single LV ODM fails?	
Then I will use the command	
#synclvodm -l akramlv datavg	



If mount point are not getting visible:

synclvodm -v vgname
varyoffvg vgname
exportvg vgname
impotvg -y vgname disk
varyonvg vgname
**********************************************************************************	
	
	
How you Splitting and rejoining copies of a volume group	
To split a volume group, all logical volumes in the volume group must have a mirror copy and the mirror must be located on a disk or a set of disks that contain only this set of mirrors.To split a volume group.	
#splitvg testvg 	
The second mirror copy of the volume group testvg is split into new volume group with an automatically generated name, which will be displayed. To split first mirror copy of the volume group with the name snapvg, enter: 	
#splitvg -y snapvg -c 1 testvg      splits testvg and creates a snapshot Volume group named snapvg.	
Note:  	
1-The splitvg command is not supported for the rootvg. 	
 2-The splitvg command is not supported for a volume group that has an active paging space	
  Rejoining the split volume group	
     # joinvg test1vg  	
************************************************************************	
What will you do if there is any inconsistency in VG other than rootvg?	
If ODM got corrupted for a VG?	
if vg is not rootvg , First I will varyoff the Datavg by	
#varyoffvg datavg	
 then I will export this vg by 	
#exportvg datavg 	
After it I will run cfgmgr after this 	
I will run importvg command	
#exportvg-y datavg hdisk9	
If VG is  rootvg then  I will  run	
# rvgrecover	
 It will solve the problem	
 **********************************************************************	
What is Volume Group?	
Ans. When the operating system is installed, one volume group named rootvg is	
Created by default. One or more PVs can make up a volume group (VG). A physical volume can belong to a maximum of one VG. For each volume group, two device driver files are created under directory /dev,	
#cd /dev	
# ls-l | grep vg	
crw-rw---- 1 root system 10, 0 Nov 10 11:35 IPL_rootvg	
crw------- 1 root system 10, 0 Nov 15 19:08 __vg10	
crw------- 1 root system 100, 0 Nov 16 10:24 __vg100	
crw------- 1 root system 46, 0 Nov 15 18:48 __vg46	
For each volume group varied on, there is a file under /etc/vg having the name	
identical to the VGID,	
#lsvg-o	
# cd /etc/vg	
# ls-l	
total 0	
-rw-r--r-- 1 root system 0 Nov 15 16:15	
vg00C478DE00004C00000001077B1E974A	
How you can find volume group identifier (VGID) of volume group?	
# lsvg  datavg | grep  -I identifier    find the 	
How you initializing log devices	
The logs devices are initialized using the log form command by clearing all log Records. The same command is used for jfslog devices, jfs2log2 devices, or inline Logs. The logform command does not affect the data itself. To initialize the jf2log device named loglv01, use the following command:	
 #logform /dev/loglv01	
How you defragged the file system?	
#defragfs /home	
	
 *******************************************************************************************	
What is the Limitation of VG?	
	
VG Type	Maximum PVs	Maximum lv	Maximum PPs per vg	PP size
Normal VG	32	256	         32512(1016*32	        1 GB
Big Vg	        128	512	         130048(1016*28	1 GB
Scable VG	1024	4096*1	         2097152	        128 GB
*******************************************************************************************	
What is quorum?	
Quorum is monitoring tool it will manage a VGDA at 51%. Suppose it is decrease below this value it will vary off the vg.	
A Quorum ensured data integrity in event of dist failure. 	
	
What happens when Quorum is lost?	
If VG is active, All LVs are inaccessible and closed. If VG was inactive, varyonvg fails.	
	
Can you varyonvg a VG if Quorum is disabled and VGDA is less than 51%?	
If VG is mirrored, Yes else no. We can use -f (#varyonvg -f datavg) option that will varyonvg but All faulty disk 	
will be put in a removed state. At least one disk must be available for use in the volume group." 	
======================================================

How to fix VGDA issue, if pvid is not comming after reboot	

IBM PMR team given some action plan. UNIX team pefrom Plan 3D which fix the issue. The step 3D was successful. The volumes are all back and the cluster is back.

Plan 3D:
1- varyoffvg 
2-exportvg
3-recreatevg -L / -Y NA -y VGNAME hdiskX hdiskX hdiskX
	
*******************************************************************************************	
Varyoffvg  datavg       varyoff the vg	
varyon datavg   varyon the vg	
varyonvg-f datavg 	
 ******************************************************************************************	
 	fcs card
 	
 	
 How to change reserve policy of disk	
To change the reserve policy to no_reserve use the below command    	
chdev -l hdisk# -a reserve_policy=no_reserve  (# should be replaced by the hdisk number)   	
	
Increase the "max_xfer_size" attribute of the fcs9 and fcs2 to avoid the above mentioned errors.The default is "0x100000".  Change it to "0x200000".	
	
chdev -l fcs# -a max_xfer_size=0x200000 -P   (# should be replaced by fcs number)	
Changes will be affected only after reboot.	
	
	
FCS CARD issue	

Leads,	
	
As per recommendation from ITS and Storage,  FCS parameter   dyntrk =yes and fcs_error_recovery =fast fail  need to configure when ever  you  	
are building new server and reconfiguring fcs card. It has been observed that this paremeter goes to defaul value i'e  dyntrk =  No and fcs_error_recovery =Delayed _fail when ever 	
your are  performing dev reconfiguration. 	
Pls update in SOP , whenever team us using  rmdev and cfgdev   command  they need to manually change these two parameter 	
	
	
Please note that the above command should be executed when the disk is in idle state(unmount the FS and vary off the VG) 	
Kindly change the reserve policy of all the disks which are shared in cluster nodes.	
	
chdev -l fscsi1 -a fc_err_recov=fast_fail -P	
chdev -l fscsi1 -a dyntrk=yes -P	
chdev -l fscsi1 -a fc_err_recov=fast_fail -P	
chdev -l fscsi1 -a dyntrk=yes -P
chdev -l fcs1 -a max_xfer_size=0x200000 -P
chdev -l fcs0  -a num_cmd_elems=400	

chdev -l en17 -a tcp_recvspace=262144 -a tcp_sendspace=262144 -a rfc1323=1 -P	

--------------------------------------------------------------

if Waitqueue & Runqueue is hign so  please check below

1- check below vaulue it should be 0
fcstat fcs0 | egrep -i "No DMA Resource Count"
fcstat fcs0 | egrep -i "No Adapter Elements Count"

show change the 

chdev -l fcs1 -a max_xfer_size=0x200000 -P
chdev -l fcs0  -a num_cmd_elems=400 -P

also check the  below parameter
chdev -l fscsi1 -a fc_err_recov=fast_fail -P	
chdev -l fscsi1 -a dyntrk=yes -P	
chdev -l fscsi1 -a fc_err_recov=fast_fail -P	
chdev -l fscsi1 -a dyntrk=yes -P
chdev -l fcs1 -a max_xfer_size=0x200000 -P
chdev -l fcs0  -a num_cmd_elems=400
----------------------------------------------------

------------------------------------------loop for fcs card change parametor---------------------------------------------
loop for fcs card  parametter change
for i in `cat ip`
do
echo $i
for j in `ssh $i sudo lsdev -Cc adapter | grep fcs | awk '{print $1}'`
do
ssh $i sudo chdev -l $j -a lg_term_dma=0x1000000 -a num_cmd_elems=1024 -a max_xfer_size=0x200000 -P;
ssh $i sudo lsattr -El $j|sudo egrep -w "lg_term_dma|num_cmd_elems|max_xfer_size"|sudo awk -F " " '{print $1 " " $2}';
done
done

-----------------------------------------------------------------------------------------
To change the setting or remove the FC card without service distruption .  


1.	List all the adapters
	
# datapath query adapter
Active Adapters :2
Adpt#     Adapter Name   State     Mode     Select     Errors  Paths  Active
    0   fscsi0  NORMAL   ACTIVE         31523124560    238     238
    1   fscsi2  NORMAL   ACTIVE         31472164280    238     238


2.	Set the first adapter (0) offline.

# datapath set adapter 0 offline
# datapath query adapter
Active Adapters :2
Adpt#     Adapter Name   State     Mode     Select     Errors  Paths  Active
    0   fscsi0  NORMAL   OFFLINE        31523124560    238       0
    1   fscsi2  NORMAL   ACTIVE         31472164280    238     238


3.	Then remove the adapter from the SDD.
# datapath remove adapter 0
4.	Then redefine the adapter and it's child devices (hdisks).
# rmdev -l fcs0 -R   ( To remove the card , use rmdev -dl fcs0 -R ) 
5.	Then change the setting of the first adapter.
	# chdev  -l 'fcs0' -a xxx='yyy'     ( Not applicable in card removal case) 
6.	Now rediscover the child devices
# cfgmgr -v
7.	Make the adapter available to SDD and add the paths.
# addpaths
8.	Finally check whether all paths are active.

# datapath query adapter
Active Adapters :2
Adpt#     Adapter Name   State     Mode     Select     Errors  Paths  Active
    0   fscsi0  NORMAL   ACTIVE         31523124560    238     238
    1   fscsi2  NORMAL   ACTIVE         31472164280    238     238

!!! Make sure that you have the same number of ACTIVE paths for both adapters before you continue with the second adapter !!!



---------------------------------------------------------------
Configure the Fibre Channel adapters:
lattr -El fcsX 
for i in `lsdev -Cc adapter | grep fcs[0-9] | awk '{print $1}'`
do
chdev -l $i -a lg_term_dma=0x1000000 \ 
-a num_cmd_elems=1024 \ 
-a max_xfer_size=0x200000 -P cfgmgr 
done
lsattr -El fcsX
 
Set autorecovery to yes for each disk array router:
lsattr -El darX 
for i in `lsdev -Cc driver -t fdar | awk '{print $1}'`
do
chdev -l $i -a autorecovery=yes
done 
lsattr -El darX	
---------------------------------------------------------------


	

From: Mohammed, Abdul 
Sent: Wednesday, October 26, 2016 3:10 PM
To: Venkateswaran, Suresh Kumar <svenkateswa4@csc.com>; Singh, Raj P <rsingh51@csc.com>
Cc: AIX capability Offshore-Aus <AIX_capability_Offshore-Aus@csc.com>
Subject: Availing comp-off tomorrow.

HI Suresh/Sanjay ;

Availing  comp-off tomorrow  in lieu  of  the  Onesteel  activity  that  I worked on last  Saturday .



Thanks  and  regards;
Abdul W  Mohammed.



From: Saraiya, Rajiv Bipinchandra 
Sent: Friday, October 28, 2016 11:11 AM
To: Saraiya, Rajiv Bipinchandra <rsaraiya@csc.com>
Subject: Diwali Wishes !

Dear Team,

As we enter the festival season, I would like to take the opportunity to Thank each one of you, for your dedication and consistent efforts. Without your contribution, it would not have been possible to scale the heights, that we have, in the past year: may it be our Delivery performance, service improvements in multiple accounts, people engagement and last but not the least, the steps towards automation.

Wish you all and your families a very Happy, Bright and Peaceful Diwali. Hope this Diwali brings the much needed togetherness for your families, and you get the much needed time with them. I am conscious that some of us will need to work over this festival weekend, in order to ensure that our delivery stays seamless and our clients can continue their business as usual. Besides, this is DST Change weekend for some of our accounts, especially in UK&I. Hope that it will still leave some time for your loved ones. Cannot thank you’ll enough for this.

Happy Diwali !

Please pass on my wishes and gratitude to your respective teams as well.

Thanks,
Warm Regards,

RAJIV SARAIYA, 
Associate Director, 
GIS, India Noida Delivery Center Lead
CSC

Adv Vacation Notice : 


B1-07, Noida Towers, A-44/45, Sector 62, Noida, UP-201301


------------------------------------------------------------------------------------------------------------	
rootvg issue

rootvg is not active the run below script



#!/usr/bin/ksh
PV=`lslv -l hd5 | grep hdisk | head -1 | awk '{print $1}'`
VG=rootvg
lqueryvg -Lp $PV | awk '{ print $2 }' | while read LVname; do
odmdelete -q "name = $LVname" -o CuAt
odmdelete -q "name = $LVname" -o CuDv
odmdelete -q "value3 = $LVname" -o CuDvDr
odmdelete -q "dependency = $LVname" -o CuDep
done
odmdelete -q "name = $VG" -o CuAt
odmdelete -q "parent = $VG" -o CuDv
odmdelete -q "name = $VG" -o CuDv
odmdelete -q "name = $VG" -o CuDep
odmdelete -q "dependency = $VG" -o CuDep
if [ "$VG" = rootvg ]
then
odmdelete -q "value1 = 10" -o CuDvDr
else
odmdelete -q "value1 = $VG" -o CuDvDr
fi
odmdelete -q "value3 = $VG" -o CuDvDr
importvg -y $VG $PV # ignore lvaryoffvg errors
varyonvg $VG
synclvodm -Pv $VG # use -P only if running AIX V4.2.1 or later
savebase
 
---------------------rootvg mirror issue------------------------------------------

Issues faced while Performing root disk migration in AIX Lpar.


bash-2.04# extendvg -f rootvg  hdisk117
bash-2.04# mirrorvg -S roorvg hdisk117
0516-306 getlvodm: Unable to find volume group roorvg in the Device
        Configuration Database.
0516-1200 mirrorvg: Failed to mirror the volume group.
bash-2.04# mirrorvg -S rootvg hdisk117
0516-1259 mirrorvg: None of the available disks support booting on this
        specific system or the boot logical volume already exists on 
        the specified disk. 
        If these are new bootable disks and you
        have not rebooted since configuring them. You may try
        exporting LVM_HOTSWAP_BOOTDISK=1 and run this command again
        to override this condition.
0516-1200 mirrorvg: Failed to mirror the volume group.
bash-2.04# export LVM_HOTSWAP_BOOTDISK=1
bash-2.04# export LVM_HOTSWAP_BOOTDISK=1
bash-2.04# mirrorvg -S rootvg hdisk117
0516-1126 mirrorvg: rootvg successfully mirrored, user should perform
        bosboot of system to initialize boot records.  Then, user must modify
        bootlist to include:  hdisk121 hdisk117.


===============================================


unable to extendvg fixed by below

#unset LDR_CNTRL

----------------------------------------------------------------------------

how to remove the disk from rootvg  if disk name missing, showing only pvid
1-  [root@SBLRTWSSAPZP17:/dev]$ lsvg -p rootvg
0516-304 : Unable to find device id 00c7af14547b751d in the Device
        Configuration Database.
rootvg:
PV ID   PV STATETOTAL PPs   FREE PPs    FREE DISTRIBUTION
00c7af14547b751d  removed 558         329         11..24..71..111..112
hdisk1  active  558         315         27..00..65..111..112

2-  try  to remove the disk with fourcefully by using below command
 reducevg -d rootvg 00c7af14547b751d

[root@SBLRTWSSAPZP17:/test]$ reducevg -d rootvg 00c7af14547b751d

rmlv: Logical volume paging00 is removed.
0516-914 rmlv: Warning, all data belonging to logical volume
        bos_hd5 on physical volume 00c7af14547b751d will be destroyed.
rmlv: Do you wish to continue? y(es) n(o)? y
0516-1246 rmlv: If bos_hd5 is the boot logical volume, please run 'chpv -c <diskname>'
        as root user to clear the boot record and avoid a potential boot
        off an old boot image that may reside on the disk from which this
        logical volume is moved/removed.
0516-914 rmlv: Warning, all data belonging to logical volume
        bos_hd4 on physical volume 00c7af14547b751d will be destroyed.
rmlv: Do you wish to continue? y(es) n(o)? y
0516-1008 rmlv: Logical volume bos_hd4 must be closed.  If the logical
        volume contains a filesystem, the umount command will close
        the LV device.
0516-884 reducevg: Unable to remove physical volume 00c7af14547b751d.

3-  if it is failed then theck again lsvg -l rootvg
[root@SBLRTWSSAPZP17:/test]$ lsvg -l rootvg
rootvg:
LV NAME   TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
testlv    jfs2       60      60      1    open/syncd    /test
hd6       paging     20      20      1    open/syncd    N/A
hd8       jfs2log    1       1       1    open/syncd    N/A
hd3       jfs2       2       2       1    open/syncd    /tmp
hd1       jfs2       1       1       1    open/syncd    /home
hd11admin jfs2       1       1       1    open/syncd    /admin
lg_dumplv sysdump    4       4       1    open/syncd    N/A
livedump  jfs2       1       1       1    open/syncd    /var/adm/ras/livedump
osbkp     jfs2       28      28      1    open/syncd    /osbkp
WebSphere jfs2       60      60      1    closed/syncd  /WebSphere
WASBACKUP jfs2       60      60      1    closed/syncd  /WASBACKUP
soft_lv   jfs2       40      40      1    closed/syncd  /var/opt/BESClient
ibmitm_lv jfs2       4       4       1    open/syncd    /IBM/ITM
bos_hd5   boot       1       1       1    closed/syncd  N/A
bos_hd4   jfs2       2       4       2    open/stale    /
bos_hd2   jfs2       11      22      2    open/stale    /usr
bos_hd9varjfs2       5       10      2    open/stale    /var
bos_hd10opt         jfs2       2       4       2    open/stale    /opt

4. here some file system are showing still 2 copy. so remove the copy with below command
 rmlvcopy bos_hd2 1 00c7af14547b751d

5-  remove the disk again
reducevg -d rootvg 00c7af14547b751d
6- run the bosboot
__________________________________________________________________________________
no gaurd
nogard

mount -o ro,noguard /epic/ocprd01
mount -o ro,noguard /epic/ocprd02
mount -o ro,noguard /epic/ocprd03


mount  point issue

mount -o noguard /product/home

mount -o noguard /comptel1/instantlink

mount -o noguard /data5/backup1

mounting issue
mount issue 

[root@CNDAFXSMAPZP06:/tmp]$ lsvg -l test12
test12:
LV NAME   TYPE       LPs   PPs   PVs  LV STATE      MOUNT POINT
bootlv00  boot       1     2     2    closed/syncd  N/A
pagelv00  paging     119   238   2    closed/syncd  N/A
loglv02   jfslog     1     2     2    closed/syncd  N/A
fslv03    jfs        20    40    2    closed/syncd  N/A
fslv04    jfs        14    28    2    closed/syncd  N/A
fslv05    jfs        8     16    2    closed/syncd  N/A
fslv06    jfs        20    40    2    closed/syncd  N/A
fslv07    jfs        4     8     2    closed/syncd  N/A
fslv08    jfs        4     8     2    closed/syncd  N/A
lv01      sysdump    13    13    1    closed/syncd  N/A
lv00      jfs        1     2     2    closed/syncd  /var/adm/csd


[root@CNDAFXSMAPZP06:/tmp]$ mount -o logs=/dev/
[root@CNDAFXSMAPZP06:/tmp]$ df -gt /t2
Filesystem    GB blocks      Used      Free %Used Mounted on
/dev/fslv03        5.00      4.35      0.65   87% /t2
[root@CNDAFXSMAPZP06:/tmp]$ unmount /t2/
[root@CNDAFXSMAPZP06:/tmp]$ mount -o log=/dev/loglv02 /dev/fslv03 /t2/
mount: 0506-326 logs=/dev/loglv02 is not a valid flag.
mount: 0506-322 Cannot determine log device to use for /dev/fslv03 (/t2).
You have mail in /usr/spool/mail/root
[root@CNDAFXSMAPZP06:/tmp]$ mount -o log=/dev/loglv02 /dev/fslv03 /t2 
mount: 0506-326 logs=/dev/loglv02 is not a valid flag.
mount: 0506-322 Cannot determine log device to use for /dev/fslv03 (/t2).
[root@CNDAFXSMAPZP06:/tmp]$ mount -o log=/dev/loglv02 /dev/fslv03 /t2
[root@CNDAFXSMAPZP06:/tmp]$ unmount /t2
[root@CNDAFXSMAPZP06:/tmp]$ 

mount -o logs=/dev/hd8 /dev/ctl_logsn /mnt


===================================================
TWO METHODS OF ENABLING DIRECT I/O AND CONCURRENT I/O

There are two different ways a sysadmin or database admin can set up Direct I/O or Concurrent I/O.

The first is to use a mount option to put the entire filesystem in either DIO or CIO mode:

# mount -o cio,dio /mountpoint /dev/lvname

If you wish to permanently have the filesystem mounted this way, use chfs to change the LVCB and the /etc/filesystems file:

# chfs -a options=cio,dio /mountpoint

The second method is for an application itself to open the file in DIO or CIO mode. This would be done via an option set in the open() system call, such as:

open( /path/to/file, O_DIRECT | O_CIO )

There are benefits to each method, and some restrictions to using the open() API to access files. 
-------------------------------------------dim dimm================
how to check dim size


lscfg -vp | grep -p DIMM           IT WILL SHOW THE DIMM SISE CHECK SIZE


___
__________________
_______________________________________________________
	
******************************main hmc********HMC**********************************	

--------------------------------------------------------------------
lpar build by command

http://www.ibm.com/developerworks/aix/library/au-aix-ibm-powervm/     Scripting IBM AIX LPAR builds from A to Z in an IBM PowerVM environment

Please find the AIX server build process & command which can be used to create profile in Dual VIOS environment by command line from HMC. 

Please refer to Lpar profile creation by hmc command line.docx for hmc command line to build one AIX server.

Please refer to Scripting process to create  LPAR.docx. I attached the script csvtolpar.zip & input file input.csv. By using this process, we can build multiple Aix server in very sort of time.  We need to give the all details (cpu, memory, io devices, vlan etc.) of single or multiple server in input.csv file as per your environment then execute the script, it will provide the command, just need to paste those command on hmc only. It will create all server lpar profile within very sort of time.


Creating an LPAR in an IBM® PowerVM® environment can be a complicated task. we need to perform the following high-level steps to build an LPAR using virtual Small Computer System Interface (VSCSI), N-Port ID Virtualization (NPIV), or shared storage pools in a dual Virtual I/O Server (VIOS) environment.

In this example, the two VIOS names are stlsydp750-1-vio1 and stlsydp750-1-vio2 already build.

We are creating the TestLpar in NPIV & virtual SCSI environment with dual VIOS instances.
Create the LPAR profile from the HMC command line
The mksyscfg HMC command is used to create the LPAR and you can specify parameters such as the LPAR name, the virtual Ethernet VLAN ID to use, the virtual Fibre Channel adapter slot numbers, minimum/maximum/desired CPU, virtual processor, and memory. Listing 1 shows an example command line to create an LPAR profile. 
#
mksyscfg -r lpar -m STLSYDP750-1 -i "name=TestLpar, profile_name=TestLpar, lpar_env=aixlinux, min_mem=4096, desired_mem=8192, max_mem=16384, proc_mode=shared, min_procs=1, desired_procs=2, max_procs=8, min_proc_units=0.5, desired_proc_units=1, max_proc_units=4, sharing_mode=uncap, uncap_weight=128, conn_monitoring=1, boot_mode=norm, max_virtual_slots=200, \"virtual_eth_adapters=2/0/1241//0/0/\",  \"virtual_fc_adapters=3/client//stlsydp750-1-vio1/6//0,4/client//stlsydp750-1-vio2/6//0\", \"virtual_scsi_adapters=5/client//stlsydp750-1-vio1/8/0,6/client//stlsydp750-1-vio2/8/0\" " 

Use DLPAR to add the virtual server adapters to the VIOS instances The HMC chhwres command can be used to dynamically add (DLPAR) virtual server adapters into the VIOS instances. 
#DLPAR in virtual adapters to VIO servers
chhwres -r virtualio -m STLSYDP750-1 -o a -p stlsydp750-1-vio1 --rsubtype fc -s 6 -a "adapter_type=server,remote_lpar_name=TestLpar,remote_slot_num=3"
chhwres -r virtualio -m STLSYDP750-1 -o a -p stlsydp750-1-vio2 --rsubtype fc -s 6 -a "adapter_type=server,remote_lpar_name=TestLpar,remote_slot_num=4"

chhwres -r virtualio -m STLSYDP750-1 -o a -p stlsydp750-1-vio1 --rsubtype scsi -s 8 -a "adapter_type=server,remote_lpar_name=TestLpar,remote_slot_num=5"
chhwres -r virtualio -m STLSYDP750-1 -o a -p stlsydp750-1-vio2 --rsubtype scsi -s 8 -a "adapter_type=server,remote_lpar_name=TestLpar,remote_slot_num=6"

Save the current configuration of VIOS instances to their profiles
#Save current config for VIO servers to profiles
mksyscfg -r prof -m STLSYDP750-1 -o save -p stlsydp750-1-vio1 -n `lssyscfg -r lpar -m STLSYDP750-1  --filter "lpar_names=stlsydp750-1-vio1" -F curr_profile` --force
mksyscfg -r prof -m STLSYDP750-1 -o save -p stlsydp750-1-vio2 -n `lssyscfg -r lpar -m STLSYDP750-1  --filter "lpar_names=stlsydp750-1-vio2" -F curr_profile` --force

Run cfgdev on the VIOS instances to detect the new virtual adapters

#Run cfgdev on VIO servers to detect new virtual adapters
viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio1 -c "cfgdev -dev vio0" 
viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio2 -c "cfgdev -dev vio0"
Determine the vfchost devices on each VIOS
#Determine what the vfchost device is for each VIO
vio1_vhost=`viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio1 -c "lsmap -all -npiv" | grep "\-C6 " | cut -f 1 -d " " ` 
vio2_vhost=`viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio2 -c "lsmap -all -npiv" | grep "\-C6 " | cut -f 1 -d " " ` 
echo "VIO1=$vio1_vhost    VIO2=$vio2_vhost"

Map the virtual Fibre Channel adapter to a physical adapter. In this example we are using fcs0 physical card on both vio.
#Map virtual fibre channel - Customize physical fcs adapter here, here we using fcs0 as physical fcs card
viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio1 -c "vfcmap -vadapter $vio1_vhost -fcp fcs0"
viosvrcmd -m STLSYDP750-1 -p stlsydp750-1-vio2 -c "vfcmap -vadapter $vio2_vhost -fcp fcs0"

Display the WWPNs of the adapters of new lpar
#Display WWPN's for zoning
lssyscfg -r prof -m SVCCH10921-8233-E8B-SN062460T --filter lpar_names=SUCCH19005 -F name,virtual_fc_adapters | sed -e 's/""*[0-9]*\/client\/[0-9]*\/[a-zA-Z0-9]*\/[0-9]*\///g' -e 's/\/0""*//g'


========================================================


chhwres -r proc -m MSYS1 -o s -p LPAR1 -a "sharing_mode=uncap"
or
chhwres -r proc -m MSYS1 -o s -p LPAR1 -a "sharing_mode=cap"


proc_mode=shared
proc_mode=ded
--------------------------------------------------------------------
Save lpart current profile by command line


mksyscfg  -r  prof  -m  Server-9117-MMC-SN06F3E66  -o  save  -p  stlwolunx01  -n `lssyscfg -r lpar -m Server-9117-MMC-SN06F3E66  --filter "lpar_names=stlwolunx01"  -F curr_profile`  --force



=====================================================================================


To get the LPAR name:
:~> lssyscfg -r lpar -m <managed system name> -F name

To disable saving configs for a certain LPAR:
:~> chsyscfg -r lpar -m <managed system name> -i "name=<LPAR name>,sync_curr_profile=0"

To enable the Sync option on ALL LPAR's on the HMC:
:~> for frame in `lssyscfg -r sys -F name`; do for lpar in `lssyscfg -r lpar -m $frame -F name`; do chsyscfg -r lpar -m $frame -i "name=$lpar,sync_curr_profile=0"; done; done

To check the status of the Sync option for all LPAR's:
:~> for frame in `lssyscfg -r sys -F name`; do lssyscfg -r lpar -m $frame -F name,sync_curr_profile; done
 


=====================================================================================

chsysstate -r lpar -m Server-9117-MMB-SN066984R -o shutdown --restart -n CBGLPREPAPZP02_10.96.7.91_AKRA     reboot with dump       
chsysstate -r lpar -m E06_Server-9117-MMA-SN062BC44 -o shutdown --immed --restart -n CNDASLCRDBOT03_10.5.139.40         reboot the lpar
lsshwres -r proc -m Server-9118-575-SN0273D7D --level lpar --filter lpar_names=CNDADBBIDBDT03_10.13.21.154   for cpu detail

lshwres -r mem -m Server-9117-MMA-SN0654E84 --level sysmemery detail of Managed system

lshwres -r proc -m Server-9117-MMB-SN062B6CP --level sys         CPU detail of Managed system 

lshwres -r mem -m Server-9118-575-SN0273D7D --level lpar --filter lpar_names=CNDADBBIDBDT03_10.13.21.154

lshwres -r mem -m Server-9118-575-SN02D699F --level lpar --filter lpar_names=10.13.21.152_Refer to_066CB57

chsysstate -m Ch2-7895-42X-SN1034D0B_USED -o on -r lpar -n CNDARULEDBZP08_10.14.117.112 -f normal       activate the lpar
chsysstate -m Server-9117-MMB-SN06351CP -o on -r lpar -n PACS_CRM_CH_10.96.7.7      activate the lpar

lssyscfg -m Server-9117-570-SN65ED84D -r lpar -F name:state    check the status of lpar status 

chsysstate -r lpar -m Server-9117-MMB-SN06F7ADR_SE-1 -o shutdown -n SBLRSESEAPZP01_10.116.1.71  --immed	

rmvterm -m D11-Server-9117-570-SN654A4DF -p CNDATAMSDBOP12_10.5.131.244        kill the hmc session	
	
Port 657 should be open from server to hmc   	
user id deletion	
	
for i in `cat hmcuser`; do echo $i; ssh hscroot@$i rmhmcusr -u A1266115; done 	
	
for i in `cat HMCPIP_A1266115`; do echo $i; ssh hscroot@$i lshmcusr | grep -i A1402462 ; done
for i in `cat HMCPIP_A1266115`; do echo $i; ssh hscroot@$i chhmcusr -u h416685 -t passwd -v Kaiser1! ; done   reset the hmc password	
	
mkhmcusr -u harikaushik -a hmcsuperadmin -d "744/I/72563//Harish_Kaushik_OLM_ID_A1160869_HMC_I" --passwd N0bu7s#h -M 45 --auth local   to give full access 

mkhmcusr -u harikaushik -a hmcviewer -d "744/I/72563//Harish_Kaushik_OLM_ID_A1160869_HMC_I" --passwd N0bu7s#h -M 45 --auth local      for hmc view access

chhmcusr -u A1402462 -t passwd -v K@gn@148 password reset of hmc user	
	
how to kill hmc session	
rmvterm -m Server-9117-MMA-SN06E8295 -p cndaifoaapop03_10.14.169.24	
	
HMC Commands	
/usr/bin/lsrsrc -dx IBM.ManagementServer Name ManagerType LocalHostname  find the HMC from server.	
lshmc -n      (lists dynamic IP addresses served by HMC)	
lssyscfg -r sys -F name,ipaddr    (lists managed system attributes)	
lssysconn -r sys        (lists attributes of managed systems)	
lssysconn -r all        (lists all known managed systems with attributes)	
rmsysconn-o remove-ip (removes a managed system from the HMC)	
mkvterm-m {msys}-p {lpar}       (opens a command line vterm from an ssh session)	
rmvterm-m {msys}-p {lpar}       (closes an open vterm for a partition)	
lshmcusr         show all hmc user	
rmhmcusr -u usernamer  emove hmc user	
Activate a partition	
kshmcusr       show alll user	
chsysstate-m managedsysname-r lpar-o on-n partitionname-f profilename-b normal	
chsysstate-m managedsysname-r lpar-o on-n partitionname-f profilename-b sms	
Shutdown a partition	
chsysstate-m managedsysname-r lpar-o {shutdown/ossshutdown}-n partitionname [-immed][-restart	
https://169.254.3.147   HMC service processor ip	


How to find hmc ip	
	
bash-3.00# lsrsrc IBM.ManagementServer	
Resource Persistent Attributes for IBM.ManagementServer	
resource 1:	
        Name   = "10.87.0.43"	
        Hostname         = "10.87.0.43"	
        ManagerType      = "HMC"	
        LocalHostname    = "10.87.0.15"	
        ClusterTM        = "9078-160"	
        ClusterSNum      = ""	
        ActivePeerDomain = ""	
        NodeNameList     = {"CNDABREPDBDP05"}	
bash-3.00# 	
	
	
Password Change :  chhmcusr -u A1098858 -t passwd -v "New Password"	
Required Changes to access the HMC with GUI : chhmcusr -i "name=A1402462,remote_webui_access=1"    HMC WEB ACCESS	
Err:510	
	
mkhmcusr -u A1402462 -a hmcsuperadmin -d "744/I/07285L//Akram_Ali_OLM_ID_A1402462_HMC_I" --passwd K@gn@1431 -M 45 --auth local


To change the private ip of HMC:
lshmc -n : To view the private/public ip
Go to HMC Management>Change Netwirk Settings>Lan Adapters>ip chnage
---------------------------------------------------------------------
how to do  hmc password less  between to hmc
mkauthkeys -g --ip 10.14.92.45 -u hscroot    ssh authantication used in LPM
mkauthkeys --ip hmc2 -u hmc2user --test	    to test


===================================================================


To check if LPM is enabled for an LPAR.

lssyscfg -m frame -r lpar --filter lpar_ids=12 -F name,migration_disabled

If this returns a 1, then LPM is disabled, a 0 (zero) means LPM is enabled.

 

To Disable LPM for an LPAR.

chsyscfg -m frame -r lpar -i "lpar_id=12,migration_disabled=1"

 

To Enable LPM for an LPAR.

chsyscfg -m frame -r lpar -i "lpar_id=12,migration_disabled=0"


----------------------------------------------------------------------------------------
hmc port
NEW PCR for
source IP=10.14.42.0/254

HMC 
destination:-
10.5.153.88
10.5.130.230
10.5.141.28
port:- 8443,443,1443,9960,12443,22
Service Request SR702756  has been created.  (PCR)
=================================================================================
user hscroot
hscroot@AkramHMC8:~> monhmc -n 0 -r disk
Filesystem                    1K-blocks    Used Available Use% Mounted on
/dev/sda2                      16121184 6847848   8454424  45% /
/dev/sda3                       6040320  334860   5398620   6% /var
/dev/mapper/HMCDataVG-LogLV     4128448  367188   3551548  10% /var/hsc/log
/dev/mapper/HMCDataVG-DumpLV    8256952  151292   7686232   2% /dump
/dev/mapper/HMCDataVG-ExtraLV  20642428  198692  19395160   2% /extra
/dev/mapper/HMCDataVG-DataLV    8256952  153132   7684392   2% /data
hscroot@AkramHMC8:~> 

---------------------------hmc scanner--------------------------------------------

Please follow up this request and follow below steps for HMCScanner.

1>Download latest HMCScanner from below link
https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Power+Systems/page/HMC+Scanner

2>Copy the HMCScanner zip file to server which can connect to the HMC's
 Unzip the downloaded file and run the hmcScanner.bat or hmcScanner.ksh script


# ./hmcScanner.ksh my4ashmc hscroot -p abc123 -stats
hmcScanner version 0.11.17
Detecting manager type: HMC
Detecting managed systems: 3 systems present.
Starting managed system configuration collection:
   Scanning Server-7954-24X-SN06E2EDB:    ...................... DONE
   Scanning Server-9113-550-SN65A868D:    ...................... DONE
   Scanning Server-9113-550-SN65A882D:    ...................... DONE
Collection successfully finished. Data is in /mksysb/hmcScanner-0.11.0/my4ashmc/
Performance data collection: 
   Loading Server-7954-24X-SN06E2EDB:    . . 
   Loading Server-9113-550-SN65A868D:    .. . 
   Loading Server-9113-550-SN65A882D:    .. . 
......... DONE
Starting Excel file creation. Done: /mksysb/hmcScanner-0.11.0/my4ashmc_20150713_212630_scan.xls 
----------------------------------------------------------------------------------

Commands to manage HMC itself
_ lshmc
Definition: List HMC configuration information
Example:
– List the BIOS level of the HMC
lshmc -b
– List the network settings for the HMC
lshmc -n
– List the VPD information for the HMC
lshmc -v
– List the version information for the HMC
lshmc -V
_ chhmc
Definition: Change HMC configuration information
Chapter 5. Operating 225
Example:
– Change the HMC host name
chhmc -c network -s modify -h newhostname
– Set the IP address and network mask for network interface eth0
chhmc -c network -s modify -i eth0 -a 10.10.10.1 -nm
255.255.255.0
_ hmcshutdown
Definition: Shut down the HMC
Example:
– Reboot the HMC after 3 minutes
hmcshutdown -t 3 -r
– Halt the HMC immediately
hmcshutdown -t now
Commands to manage system configuration
_ lssyscfg
Definition: List system resources
Examples:
– List all systems that are managed by this HMC
lssyscfg -r sys
– List all partitions in the managed system, and display only attribute values
for each partition, following a header of attribute names
lssyscfg -r lpar -m system1 -F --header
==============================================================


chhmc -c network -s modify -i eth1 -a 172.28.214.5 -nm 255.255.255.0 -g 172.28.214.1            Assign the ip in hmc

To change the Hardware Management Console host name:

chhmc -c network -s modify -h mynewhost

To set the IP address and network mask for network interface eth0:

chhmc -c network -s modify -i eth0 -a 10.10.10.1 -nm 255.255.255.0

To add a static route to the network 192.165.31.0 for interface eth0 to the beginning of the routing table:

chhmc -c netroute -s add --routetype net -a 192.165.31.0 -nm 255.255.255.0 -g 192.165.178.1 -i eth0 --position 0

To remove the static route entry in position 3 of the routing table:

chhmc -c netroute -s remove --position 3

To enable remote access via ssh:

chhmc -c ssh -s enable

To enable remote access via Serial Over LAN:

chhmc -c sol -s enable

To disable remote web browser access from all IP addresses over network interface eth0:

chhmc -c remotewebui -s disable -i eth0

To add a remote system logging destination that will receive syslog messages over UDP:

chhmc -c syslog -s add -a 10.10.10.2

To enable TLS encrypted system logging over TCP:

chhmc -c syslog -s enable -t tls

To add a remote system logging destination that will receive TLS encrypted syslog messages over TCP:

chhmc -c syslog -s add -t tls -h secure.ibm.com

To set a syslog filter for the server secure.ibm.com. The filter will cause all syslog messages that contain the string informational in their message text to be discarded:

chhmc -c syslog -s modify -t tls -h secure.ibm.com --input
"filter_msg_contains_discard_strings=informational"

To remove the syslog filter for the server secure.ibm.com:

chhmc -c syslog -s modify -t tls -h secure.ibm.com --input
"filter_msg_contains_discard_strings="

To enable keyboard mapping configuration to occur on the next reboot:

chhmc -c kbdcfg -s enable

To enable display configuration to occur on the next reboot:

chhmc -c dispcfg -s enable

To permit a single IP address to use the ssh service over network interface eth0:

chhmc -c ssh -s add -a 10.10.10.3 -nm 255.255.255.255
-i eth0

To enable Network Time Protocol service:

chhmc -c xntp -s enable

To add a Network Time Protocol server to the configuration file:

chhmc -c xntp -s add -h mytimeserver.company.com

Specify the hostname will not change firewall rule settings. It is assumed that the user will use the Customize Network Settings to change firewall settings.

To add a Network Time Protocol server to the configuration file, using IP address and at the same time enable firewall access through network interface eth0:

chhmc -c xntp -s add -a 10.10.10.32 -i eth0

To remove a Network Time Protocol server from the configuration file:

chhmc -c xntp -s remove -h mytimeserver.company.com

To remove the HMC IP address 9.53.182.99 from the SLP service registration IP addresses:

chhmc -c slp -s remove -a 9.53.182.99

To set the current locale to Spanish:

chhmc -c locale -s modify -l es_ES

To set the alternate disk partition on HMC as a startup device on the next HMC boot:

chhmc -c altdiskboot -s enable --mode upgrade

To update the HMC clock to January 25, 2007 14:30:50 (the current year is 2007):

chhmc -c date -s modify --datetime 01251430.50 or
chhmc -c date -s modify --datetime 012514302007.50 or
chhmc -c date -s modify --datetime 0125143007.50

To update the HMC clock to December 8, 2008 09:45, local time:

chhmc -c date -s modify --datetime 120809452008 --clock
local

To update the HMC time zone to United States, Central time:

chhmc -c date -s modify --timezone America/Chicago

To remove the time zone setting from the HMC:

chhmc -c date -s modify --timezone none

To add a Kerberos realm and KDC to the HMC:

chhmc -c kerberos -s add --realm EXAMPLE.COM -a 10.10.0.20

To add a Kerberos admin server and allow Kerberos users to change their own passwords using the chhmcusr command:

chhmc -c kerberos -s add --kpasswdadmin 10.10.0.20 or

chhmc -c kerberos -s add --kpasswdadmin 10.10.0.20 --realm EXAMPLE.COM

To replace a Kerberos admin server:

chhmc -c kerberos -s modify --kpasswdadmin 10.10.0.20 or

chhmc -c kerberos -s modify --kpasswdadmin 10.10.0.20 --realm
EXAMPLE.COM

To remove the Kerberos admin server:

chhmc -c kerberos -s remove --kpasswdadmin 10.10.0.20 --realm
EXAMPLE.COM

To add a Kerberos realm and KDC and set the clock skew to 140 seconds and ticket lifetime to 1 day:

chhmc -c kerberos -s add --realm EXAMPLE.COM
-h kdc.example.com:88 --clockskew 140
--ticketlifetime 1d

To remove a Kerberos realm and KDC from the HMC:

chhmc -c kerberos -s remove --realm EXAMPLE.COM
-h kdc.example.com

To modify the Kerberos default realm on the HMC:

chhmc -c kerberos -s modify --defaultrealm EXAMPLE2.COM

To modify the Kerberos clock skew to 60 seconds on the HMC:

chhmc -c kerberos -s modify --clockskew 60

To modify the Kerberos ticket lifetime to 12 hours on the HMC:

chhmc -c kerberos -s modify --ticketlifetime 12h

To change the IMM network settings:

chhmc -c imm -s modify -a 9.3.99.100 -nm 255.255.255.0 -g 9.3.99.1 chhmc -c imm -s restart (to apply the new network settings)

To change the IMM user ID and password (the password must be entered when prompted):

chhmc -c imm -s modify -u immusername

To disable the use of anonymous ciphers on the HMC chatlet interface:

chhmc -c legacyhmccomm -s disable

To enable NIST SP 800-131A mode:

chhmc -c security -s modify --mode nist_sp800_131a

To enable the Event Manager for Call Home:

chhmc -c emch -s enable
------------------------------------DLPAR-----------------------------------------
How to check DLPAR is running on system	
lspartition -dlpar 	
or lspartition -dlpar | grep -i 10.96.6.55	



Dlpar

First of all run the lsrsrc "IBM.MCP", if it will give result then check the following

Below services should be run
# lssrc -g rsct_rm

Subsystem         Group  PIDStatus

 IBM.DRMrsct_rm6881300      active

 IBM.CSMAgentRM   rsct_rm7274530      active

 IBM.ServiceRM    rsct_rm6029480      active

 IBM.AuditRM      rsct_rm6357058      active

 IBM.ERRM         rsct_rm4456566      active

 IBM.LPRM         rsct_rm6946986      active



*HMC RMC Connection IP should be pingable from lpar
*lpar IP should be pingable from HMC

Otherwise run the following commands:

# /usr/sbin/rsct/bin/rmcctrl -z    <--it stops the daemons
# /usr/sbin/rsct/bin/rmcctrl -A    <--adds entry to /etc/inittab and it starts the daemons
# /usr/sbin/rsct/bin/rmcctrl -p    <--enables the daemons for remote client connections

Now run the telnet HMCIP 657, it should work.

Now on hmc run the lspartition -dlpar command if lpar having DCaps value other than 0X0 then it means dlpar will work now.

Otherwise, run the following command on lpar:

/usr/sbin/rsct/install/bin/recfgct (deletes the RMC database, does a discovery, and recreates the RMC configuration)

# /usr/sbin/rsct/bin/rmcctrl -z    <--it stops the daemons
# /usr/sbin/rsct/bin/rmcctrl -A    <--adds entry to /etc/inittab and it starts the daemons
# /usr/sbin/rsct/bin/rmcctrl -p    <--enables the daemons for remote client connections

Now check again lspartition -dlpar command on HMC


===========================================================
lsrsrc IBM.MCP is not working.


[pzatvs3][/home/padmin]>oem_setup_env
# /usr/sbin/rsct/install/bin/recfgct
/usr/lib/dr/scripts/all/ctrmc_MDdr DR script to refresh Management Domain configuration
0513-071 The ctcas Subsystem has been added.
0513-071 The ctrmc Subsystem has been added.
0513-059 The ctrmc Subsystem has been started. Subsystem PID is 23265358.
# rmcctrl -z
# rmcctrl -A
0513-059 The ctrmc Subsystem has been started. Subsystem PID is 20250728.
# rmcctrl -p

===============================================================
 
------------------------------------------------------------------------------------------------------------
Script on montool:--

/ACTIVITY/migration/hmcscanner-0.9/hmcscan.sh
cd /ACTIVITY/migration/hmcscanner-0.9
for i in `cat IPFILEHMC`; do /ACTIVITY/migration/hmcscanner-0.9/hmcScanner.ksh $i hscroot -key /home/unmgr007/.ssh/id_rsa; done

SOP knowledge base:--
https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Power+Systems/page/HMC+Scanner
----------------------------------------------------------------------------------------------------------


[unmgr007@montool:/home/smon/saurabh]$ cat /ACTIVITY/migration/hmcscanner-0.9/HMCSCD/hmcservercpumem.sh

[unmgr007@montool:/home/smon/saurabh]$ cat /ACTIVITY/migration/hmcscanner-0.9/HMCSCD/cpu_mem_detail.txt | grep -i 10.13.5.48     find the memory & CPU  

HMC:   7042-CR4
==============================================hmc main=============================================
Default : hscroot/abc123   ( You will be prompted later to provide a new 7-character password for this ID)
lshmc  	7.7.2.0.1  V.R.R.R.S,  7.3.4.0.2

DLPAR:  HMC should be release 3 version 2.4 or higher, AIX level should 5.2. filesets : lslpp -l rsct.core*,   lslpp -l csm.client
	
HMC Daemon :  ctrmc, ctcas, IBM.DMSRM, IBM.LparCmdRM   ( all from rsct group)
AIX daemons  : ( lssrc -a | grep rsct )   ctrmc, ctcas, IBM.CSMAgentRM, IBM.ServiceRM, IBM.DRM,IBM.HostRM ( rsct group)

P5 HMC1:  192.168.2.147,  HMC2 : 192.168.3.147  ( if redundant  then 192.168.2.146 & 192.168.2.146 )
P6 HMC1:  169.254.2.147,  HMC2 : 169.254.3.147  ( if redundant then 169.254.2.146 & 169.254.2.146 )

Capped :If an LPAR is allocated 1.5 processing units but the workload requires 2.2 units, the LPAR would not be allowed access to the additional units, even if they were available in the shared processor pool. 
Uncapped : LPAR would have access to the additional 0.7 processing units needed for the workload. If Uncapped is selected, you need to provide the Weight value for this LPAR. LPARs with higher Weight values receive higher priority when shared pool resources are fully used.
Virtual processors: tell the LPAR's OS how many physical processors it has. The OS cannot use parts of a processor, so you have to tell it in whole numbers how many processors it can use. Also, the no. of virtual processors limits how many physical processors an LPAR can use

HMC 7 can support max of non-590/595 servers    48
A maximum of  590/595 servers32 ( with a maximum of 1024 partitions across the managed servers)
For all systems the maximum number of LPARs is     254.
maximum of  HMCs can manage a server at one time.   2
For Power-4 machines, we connect the hmc using serial cables.
Power-5 machines, HMC connects to service processors via SSL-encrypted Ethernet, replacing the serial cables.
POWER5 HMCs cannot manage POWER4 servers, and vice versa
Service process default user/pass    admin/admin
One HMC is mandatory for 590, 595 or 575
One IVM allowed per server and it only manages partitions on one server.
FSP has Operating System, UserIds / Passwords, Filesystem, Networking, Firewall, Webserver, ASMI, Firmware
Forget admin passwd for fsp: place a hardware call to get 'celogin'
One HMC should be within 8metres of Managed Server
Each FSP Ethernet port should be connected to only one HMC

ssh enable hmc : HMC Management > Remote Command Execution > Enable remote command execution using the ssh facility (tick)

HMC upgrade
V6R1.3 > V7  ( get update from Fix Central Web site )
saveupgdata -r disk
Install the update
Updates>HMC Update>Install Corrective Service.>Apply Corrective Service from removable media> insert cd > ok to start update>
Install the required maintenance level fix > reboot > lshmc -v

HMC  Backup 
HMC :1.) Critical console data backup :  ( it is used when HMC crash )  
       a.) The partition profile data must be backed up before CCD. ( /var/hsc/profiles/MT-MDL*S/N )  
  select managed system>conf> manage Profile Data > Backup     ( bkprofdata -m <MTMS> -f  dvd )   or -f  File_name
       b.) CCD:  HMC Management> Format Media > Back up HMC Data > Select DVD/ftp/nfs  (bkconsdata -r dvd)
  2.) Save upgrade data :  ( it is used when updating the HMC software level )
       a.) The partition profile data backup 
       b.) HMC Management> Save Upgrade Data > Hard Drive/DVD/usb flash

Firmware/Microcode  upgrade :    lsmcode  -Ar  (EM340_041, SF240_382 )
Serivce processor manage 2 copies of firmware permamane & temporary . Server firmware files are installed on temporary side. Copying the temp firmware level to permanent side known as commiting .
Download the updates fron fixcentrel > update licence internal code > select manage system > select cd > server will reboot in last

Shutdown:  HMC/VIO/AIX
AIX: Shutdown -Fr  
HMC : hmcshutdown -t now ( -r  reboot)
VIO: shutdown –restart
===========================================================================================
Start the managed system;   3 options; 
1. Partition standby :allows you to create and activate logical partitions.
2. System profile : turns on the system according to a predefined set of system profiles.
3. Partition auto start : turns on the managed system to partition standby and then activate all partitions    that are marked as auto start

System Management > Servers.> Configuration >¨ Manage Partition Data > Backup

HMC file systems details  :  monhmc -r disk   
zero out log files :   chhmcfs -o f -d 0

mkhmcusr/ rmhmcusr/ lshmcusr

HMC login as root (not hscroot)
There is a way of accessing the PESH - the Produce Engineering Shell, but that requires logging in as the user hscpe and you need to get a temporary HMC "root" password from IBM Support

To list managed system
lssyscfg -r sys
lssyscfg -r sys -F name:serial_num:state

To list number of LPAR defined on the Managed system 
lssyscfg -r lpar -m DB20-B49-9117-MMA-SN6534FCA
lssyscfg -r lpar -m pserver -F name,lpar_id,state

lssysconn -r all -F type_model_serial_num:ipaddr:state | sort ( managesystem name & ip)
for m in $(lssyscfg -r sys -F name); do echo $m ; lshwres -m $m -r io --rsubtype slot –F lpar_name:description |sort -rn; done
lssysconn -r all 
lssyscfg -r sys -m system1 -F lpar_avail_priority_capable  
lshwres -r proc -m Managed-System --level lpar
lshwres -r mem -m DB20-B49-9117-MMA-SN6534FCA --level sys    // to check manage system mem status
lshwres -r proc -m DB33-B47-8233-E8B-SN069F31P --level sys       // to check manage system proc status
chhwres -r proc -m <machine> -p <partition> --procunits 0.1 ( unit)
chhwres -r proc -m DB33-B47-8233-E8B-SN069F31P -o a -p uedcb238 --procs 4       // to increase desired proc value
chhwres -r proc -m DB33-B47-8233-E8B-SN069F31P -o r -p uedcb238 --procs 4       // to decrease desired proc value
chhwres -r mem -m DB22-G11-9117-MMA-SN65B7FBC -o a -p uedcb020 -q 4096   // to increase desired mem value
chhwres -r mem -m DB32-G11-8233-E8B-SN069F2FP -o r -p uedcb240 -q 4096    // to decrease desired mem value
chsyscfg ( change profile min max )
chsysstate -r lpar -m Managed_System -o shutdown --immed -n LPAR_Name

lshmcusr -F name:taskrole:description
chhmc -c ssh -s enable
lshmc –n     list n/w settings    show the network seting
mkvterm -m Managed_System -p LPAR_Name     close the hmc session
mksysplan -f marc.sysplan -m Machine-Name –v
lssysplan, rmsysplan, deploysysplan, cpsysplan
bkconsdata -r dvd 
bkconsdata -r nfs -n nfs_server_name -l Nfs_mount_point
bkprofdata -m Managed-System -f File_name
lspartition –dlpar 
hmcshutdown -r -t now
lsrsrc IBM.ManagementServer  ( to see hmc ip from lpar )
lshmc –V
chhmcusr -u hscroot -t passwd

Add a Mananage system : Systems management.> Servers > select server> Connections> Add Managed System.
you must assign an IP address or host name to the service processor on the managed system. You can manually assign an IP address to the service processor by using the Advanced System Management Interface (ASMI), or you can use a Dynamic Host Configuration Protocol (DHCP) server on the open network to assign an IP address to the service processor

If you power the server up before connecting to the HMC  it is very likely that the HMC port will get configured with its  default IP (192.168.2.147 HMC1 or 192.168.3.147 HMC2) 
Assuming your HMC is configured as DHCP server it will configure  the HMC port and your server will appear in the server management window on your HMC

LHEA :logical Host Ethernet Adapter is a representation of a physical HEA on a logical partition. An LHEA allows the logical partition to connect to external networks directly through the HEA. HEAs are also known as Integrated Virtual Ethernet adapters (IVE)



---------------------------------------------	
	
*******************Create tar from one mount point to copy new mount point***	
tar cf - .| ( cd /db2_arclog_n1;tar xpvf -)	
	
	
**************LINUX LOG****************************************************************************	
[LINUXADM@cndadctlapzm01 ~]$ sudo su -	
[root@cndadctlapzm01 ~]# cd /home/LINUXADM/MESSAGES/	
[root@cndadctlapzm01 MESSAGES]# cat total_logs |grep -i critical	
Nov 13 10:24:25 cndatranapzp03 ServeRAID Manager Agent: [338] Periodic scan found one or more critical logical drives: controller 1.  	
Nov 13 18:27:07 cndatranapzp03 ServeRAID Manager Agent: [338] Periodic scan found one or more critical logical drives: controller 1.  	
*****************************************firmware*************************************************************	
lsmcode -A 	
lsmcode -d sys0	


=====================================
installp -ac -g -d .  bos.aixpert.websm

installp -ac -g -d .  xlC.msg.en_US.13.1.3.1.I
---------------------------------------------------------------------------------------------
lsof

installp -a -Q  -Y -d /tmp/lsof perl*    installed multipule file if there

for i in `cat test`; do echo $i;ssh $i sudo installp -a -Q -Y -d /tmp/lsof lsof*;ssh $i sudo lsof|wc -l; done
for i in `cat test`; do echo $i;ssh $i sudo installp -a -Q -Y -d /tmp/lsof lsof*;ssh $i sudo lsof|wc -l; done

lsof -i:<port>                check process on port 

perl

installp -aXYd . perl 

****************************************************************************************************	
vcc  gcc c++	
#installp -u vac*        ===Vc++ removal	
bash-3.00#software/VACCP_N	
installp -a -Q -d /software/VACCP_N/vac*   =======Vc++ installation 	

 
	
Hi Team,	
	
VACPP (version 8 ) base fileset for AIX 6.1 are present on 10.14.41.104 at /software/VACCP11_6.1 location.	
Please use the above mentioned fileset for vacpp installation on 6.1 OS.	
Upgraded version of VACPP is present at /software/VACPP_AIX61/ location on 10.14.41.104.	
	
Thanks & Regards 	
Saurabh Johri	
AIX Team	
*******************************************************************************************	
crontab for osbkp	
	
0 2 15 * * sh /osbkp/month_osbkp.sh	
	
******************************************NTP**********************************************	


NTP LINUX	
----------	
	
1. Specify your xntp server in /etc/host, enter: 	
   Put the line in /etc/hosts	
   echo "10.13.1.27   ntp_server" >>/etc/hosts	
2. Specify your xntp server in /etc/ntp.conf, enter: 	
cat /etc/ntp.conf	
echo "server 10.13.1.27" >>/etc/ntp.conf	
Put the # in front of broadcastclient line	
#broadcastclient	
Put the new line in /etc/ntp.conf after this line	
server 10.13.1.27	
Save and close /etc/ntp.conf	
3. Start the ntpd daemon: 	
   startsrc -s ntpd	
servive ntpd start        to start the ntp	
	
#ntpq -p   if show * then its means sync with ntp	
#cat /etc/ntp.conf   find ntp server ip	
	
	
NTP probme and solution	
Problem:	
[root@CNDBKCSTAPZP01 ~]# ntpq -p	
ntpq: read: Connection refused	
[root@CNDBKCSTAPZP01 ~]# service ntpd start	
Starting ntpd:     [  OK  ]	
[root@CNDBKCSTAPZP01 ~]# ntpq -p	
ntpq: read: Connection refused	
[root@CNDBKCSTAPZP01 ~]# service ntpd status	
ntpd dead but pid file exists	
	
Solution:	
useradd -ntp -s /bin/false	
servive ntpd start	
		
	
AIX 	
-----------	
	
Below is the procedure to configure the NTP in New Server :	
	
1. Please be sure Application or Database should be down in client.	
2. afterthat check whether time is IST or not . It should be IST .IST    and    -05:30:00 	
3. after that set the time menually.  (Time Difference should be near about 10 MIN between NTP Server and Client server).	
4. reboot is required after changing time zone.      	
	
1. Specify your xntp server in /etc/host, enter: 	
   Put the line in /etc/hosts	
   echo "10.13.1.27   ntp_server" >>/etc/hosts	
2. Specify your xntp server in /etc/ntp.conf, enter: 	
cat /etc/ntp.conf	
echo "server 10.13.1.27" >>/etc/ntp.conf	
Put the # in front of broadcastclient line	
#broadcastclient	
Put the new line in /etc/ntp.conf after this line	
server 10.13.1.27	
Save and close /etc/ntp.conf	
3. Start the xntpd daemon: 	
   startsrc -s xntpd	
4. In last run the following line through root user	
   /usr/sbin/ntpdate -u ntp_server 	
	
Where ever if you are configuring the NTP server, Please unhash the 'start /usr/sbin/xntpd "$src_running"' line in '/etc/rc.tcpip'  file also. 	
So that the service will start automatically after server reboot .	
	
	
	
5 Jun 14:34:16 ntpdate[4260016]: no server suitable for synchronization found	
Hi Team	
	
For the servers where the error message "no server suitable for synchronization found" is coming when you try to do NTP sync. This error comes when NTP client is not able to reach NTP server on port 123 (tcp/udp) due to firewall restrictions.	
	
Solution : PCR needs to be raised to open port # 123 (tcp/udp) bi-directionally both between the NTP Server and NTP Client.  	
	
Example : 	
	
Server with error : 	
ntpdate -u ntp_server	
 4 Dec 16:13:24 ntpdate[42991862]: no server suitable for synchronization found	
	
NTP Client IP : 10.5.201.21 NTP Server IP : 10.13.1.27
	
bash-3.2# telnet 10.13.1.27 123	
Trying...	
^Cbash-3.2# ifconfig -a | grep -i inet	
        inet 10.5.176.242 netmask 0xffffff00 broadcast 10.5.176.255	
        inet 10.5.201.21 netmask 0xffffffc0 broadcast 10.5.201.63	
	
Server without error : 	
	
NTP Client IP : 10.14.41.104NTP Server IP : 10.13.1.27
	
bash-3.2# telnet 10.13.1.27 123	
Trying...	
telnet: connect: A remote host refused an attempted connect operation.	
bash-3.2# ifconfig -a | grep -i inet	
        inet 10.14.41.104 netmask 0xffffff00 broadcast 10.14.41.255	
	
Manish : Please do the needful.	

================================
how to remove old file
remove the old file

00 15 * * 5 (/usr/bin/find /nmon -name "*.nmon" -type f -mtime +60 -exec rm \{\} \+ >/dev/null 2>&1)

---------------------------------------------------------

Sri Lanka Montool Server

10.200.131.67

	
***************************cloning*****************************************
restore from backup
server rebuild
	
nim -osbackup

Ports which should be in open state before taking mksysb of client:

513/514/tftp/inetd/bootps/who/login/shell/2049/nfs
==============================================================
nim

nim -o update -a packages=all -a source=/mksysb/aix_6.1_tl9_sp5/aix_6.1_tl9_sp5  AIX61TL9SP5_lpp  upgrade the nim
	
nim -o fix_query AIX61TL9SP5_spot | grep ML             check the os version in spot	


-----------------------
riomelhcws1# lsnim -l riomelh104m
riomelh104m:
   class           = machines
   type            = standalone
   connect         = shell
   platform        = chrp
   netboot_kernel  = mp
   if1             = network_mgt riomelh104m 0
   cable_type1     = tp
   Cstate          = ready for a NIM operation
   prev_state      = ready for a NIM operation
   Mstate          = in the process of booting
   bosinst_data    = riomelh104
   mksysb          = 104_mksysb_wipe
   spot            = 104_wipe
   cpuid           = 00C7E8054C00
   control         = master
   Cstate_result   = reset
   installed_image = riomelh104_mksysb

nim -o deallocate -a ResourceType=riomelh104 riomelh104m           Deallocate 

nim -o deallocate -a  bosinst_data=riomelh104 riomelh104m
---------------------------------------------------------	
smitty alt_clone	
1 Target disk     hdis0	
2 accepet licenence         yes	
3-on next reboot  no	
4 verbose output  yes

To make a clone-

- smit alt_clone
       - Enter the list of disk to whom clone has been created.
	   
	   
1) Make a copy of image.data
2) In the copy, made required chnages (ex- copies 1, size of Lp=size of PP)
3) Run the command - 

smit alt_clone
- assign hard disk to whom cloning has to be done
- assign the edited image.data file
- accept the new license agreement
- Set 'no' for the option 'Set bootlist to boot from this disk on next reboot'.

alt_disk_install -C -B hdisk2commmand tested

alt_disk_install -C -B -g hdisk2                         if bootable disk issue come


for 
vi image.data
 
:%s/SHRINK= no/SHRINK= yes/
:%s/PPSIZE= 128/PPSIZE= 256/g
:%s/PP_SIZE= 128/PP_SIZE= 256/g
:%s/COPIES= 2/COPIES= 1/g 

---------------------------------------------------
ONLINE UPDATE WITH ALT_DISK_INSTALL:

unmirrorvg rootvg hdisk1       <--removing mirror ( check: lsvg -p rootvg)
chpv -c hdisk1       <--clears boot record
reducevg rootvg hdisk1         <--free up hdisk1
bosboot -ad hdisk0   <--creates boot record
bootlist -m normal hdisk0      <--sets boot list (check: bootlist -m normal -o)

installp -s<--check if anything can be commited
copy new bos.rte.install       <--will be needed for checking if update will be successful (cd to this directory)
install_all_updates -pYd .     <--preview of new bos.rte.install
install_all_updates -Yd .      <--installs new bos.rte.install

oslevel -sg 5300-09-01-0847    <--shows which fileset is greater than current service pack, it will show bos.rte.install
instfix -i | grep SP <--it will show where to update (53-09-020849_SP)
oslevel -sl 53-09-020849       <--shows which filesets should be update

===============================================
Upgrade the TL on alt_disk
cd /mnt/5300-09-SP2  <--go to servicepack dir
install_all_updates -pYd .     <--preview check

alt_disk_copy -d hdisk1 -b update_all -l /mnt/5300-09-SP2     <--this will do the update      it will create clone update the fileset  

===============================================


In fact, the alt_disk_install command is deprecated, so the actual command will be:

# alt_disk_copy -B -d hdisk1


shutdown -Fr         <--new OS will boot up
smitty commit        <--if needed

alt_rootvg_op -X old_rootvg    <--removes cloned old OS
chpv -c hdisk0       <--clears bootrecord
extendvg -f rootvg hdisk0      <--add hdisk0 to rootvg
mirrorvg -S rootvg hdisk0      <--mirror rootvg (-S: in background)
bosboot -a <--creates boot record
bootlist -m normal hdisk0 hdisk1         <--set bootlist 

mirrorvg -S rootvg hdisk2

check the oslevel of alt_clone disk
Wake up alt rootvg:
# alt_rootvg_op -W -d (hdiskx)
Check oslevel
# INUCLIENTS=1 chroot /alt_inst /usr/bin/oslevel -s
Put back to sleep writing boot record
# alt_rootvg_op -S -t

INUCLIENTS=1 chroot /alt_inst /usr/bin/lslpp -l | grep -i gpfs     check the packegs

alt_rootvg_op -C -b update_all -l /tmp/GPFS-3.4.0.30     update the packeges in altinst_rootvg   alt_clone

how to check the oslevel in alt_instrootvg

[root@szadap27]/->  /usr/lpp/bosinst/blvset -d /dev/hdisk1 -g level       Verify the os 
7.2[root@szadap27]/->


------------------------------------------------------------------------
ONLINE UPDATE WITH ALT_DISK_INSTALL:

unmirrorvg rootvg hdisk1       <--removing mirror ( check: lsvg -p rootvg)
chpv -c hdisk1       <--clears boot record
reducevg rootvg hdisk1         <--free up hdisk1
bosboot -ad hdisk0   <--creates boot record
bootlist -m normal hdisk0      <--sets boot list (check: bootlist -m normal -o)

installp -s<--check if anything can be commited
copy new bos.rte.install       <--will be needed for checking if update will be successful (cd to this directory)
install_all_updates -pYd .     <--preview of new bos.rte.install
install_all_updates -Yd .      <--installs new bos.rte.install

oslevel -sg 5300-09-01-0847    <--shows which fileset is greater than current service pack, it will show bos.rte.install
instfix -i | grep SP <--it will show where to update (53-09-020849_SP)
oslevel -sl 53-09-020849       <--shows which filesets should be update

cd /mnt/5300-09-SP2  <--go to servicepack dir
install_all_updates -pYd .     <--preview check

alt_disk_copy -d hdisk1 -b update_all -l /mnt/5300-09-SP2     <--this will do the update
alt_disk_copy -d hdisk1 -i /var/opt/BESClient/image.data -b update_all -l /osbkp/AIX61_TL09_SP03

shutdown -Fr         <--new OS will boot up
smitty commit        <--if needed

alt_rootvg_op -X old_rootvg    <--removes cloned old OS
chpv -c hdisk0       <--clears bootrecord
extendvg -f rootvg hdisk0      <--add hdisk0 to rootvg
mirrorvg -S rootvg hdisk0      <--mirror rootvg (-S: in background)
bosboot -a <--creates boot record
bootlist -m normal hdisk0 hdisk1         <--set bootlist 


check the oslevel os clone disk

Wake up alt rootvg:
# alt_rootvg_op -W -d (hdiskx)
Check oslevel
# INUCLIENTS=1 chroot /alt_inst /usr/bin/oslevel -s
Put back to sleep writing boot record
# alt_rootvg_op -S -t
--------------------------------------------------------

clone with mksysb image

smit alt_mksysb

commond :  /usr/sbin/alt_disk_mksysb -m /software/osbkp.91 -P "all" -i "/software/image.data" -B -V -d hdisk3    resotre the command 

/osbkp/osbkp.CNDAKMBZDBDP01	
restore -xqdf osbkp.NDLTCHDB03 ./image.data      create image data from mksysb


 # mksysb -evpiX /software/osbackup/osbkp.`hostname`|tee -a /osbkp/monthbkp.report(As per Bharti Airte;) it will create mksysb in /osbkp


First, I wanted to create a cloned system on the second HDD of the rootvg mirror to make sure I have something to boot if the migration fails. I have a lot of stuff (logs, source code and compiled programs) I wouldn't like to lose. In a well-managed AIX system, the rootvg resides on a mirror of two (set of) disks (in theory, there may be a third copy of the mirror), and since these are in sync, one of them is always bootable if one of them fails. So I freed up one of my two disks by removing the mirror, then the disk itself, and finally modifying the boot list in NVRAM:

# unmirrorvgrootvg hdisk1
# reducevgrootvg hdisk1
# bosboot -ad /dev/hdisk0

The command to create a clone on the free disk:

# alt_disk_install -C  hdisk1


In fact, the alt_disk_install command is deprecated, so the actual command will be:

# alt_disk_copy -d hdisk1

This creates a clone (-C) but doesn't adjust the bootlist to the clone (-B) as I want to run with the old disk (to avoid losing the logs created after the clone, for example).
This way, I will have hdisk0 available for upgrade and hdisk1 with the state of the system from Tuesday, at about 17:30.

Well, I was quite surprised to see that there is no 'alt_disk_install' command on my system because the fileset 'bos.alt_disk_install.rte' was not installed by default...! 
I grabbed it from our patch server and copied to the target, so it wasn't a big problem, but having the install filesets on the server would be a better solution... a memo to myself ;)

Next, I noticed that if the WPAR is not running, the filesystems are not mounted and alt_disk_install will ignore any unmountedfilesystem for a good reason: it cannot create a file list for copying... 

===========================================
WPAR
#lswpar                                                show the wpar 
#chwpar -D devname=hdisk3 stlsydhironoc                map the lun to wpar from base machine
#lswpar -D stlsydhironoc                               Listing the disks of the rootvg WPAR from the global
=====================================================

vi editor

oldname to newname
:%s/VolGroup/rootvg/

------------------------ftp main------------------------------------------------------------


shashibhushan@in.ibm.com
b303shashi

another session cmd

Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Administrator>cd desktop

C:\Documents and Settings\Administrator\Desktop>ftp 9.121.120.63
Connected to 9.121.120.63.
220-FTP Server (user 'ankisinh@in.ibm.com')
220
User (9.121.120.63:(none)): ibmsupt
331-Password:
331
Password:
230-230-Last unsuccessful login: Tue Nov  8 14:15:44 IST 2011 on /dev/pts/6 from
 9.77.123.250
230-Last login: Tue Nov  8 16:16:59 IST 2011 on /dev/pts/8 from 9.124.222.217
230-User ibmsupt logged in.
230
ftp> cd /dumps/P4FH49F
250 CWD command successful.
ftp> pwd
257 "P4FH49F" is current directory.
ftp> bin
200 Type set to I.
ftp> hash
Hash mark printing On  ftp: (2048 bytes/hash mark) .
ftp> prompt
Interactive mode Off .
ftp> mput snap*


#################### SysLog Settings ##########################################	
[root@CNDAABTSAPZP14:/tmp]$ vi /etc/syslog.conf	
Err:510	
auth.info       /var/adm/sudolog.out    rotate size 500k files 4	
local0.notice  /var/adm/errptful rotate time 7d files 5	
local1.notice  /var/adm/audit rotate time 7d files 5	
auth.info       /var/adm/sudolog.out    rotate time 7d files 5	
local2.notice  /var/adm/bootlog rotate time 7d files 5	
local3.notice /var/adm/errpt rotate time 7d files 5	
*.info;auth.none         /var/adm/syslog.out     rotate size 500k files 4	
*.debug;local2.notice;local1.notice;local0.notice;auth.info;local3.notice @10.5.7.193	
	
	
[root@CNDAABTSAPZP14:/tmp]$ lssrc -a | grep -i syslogd	
 syslogdras    22542        active	
 [root@CNDAABTSAPZP14:/tmp]$ stopsrc -s syslogd	
0513-044 The syslogd Subsystem was requested to stop.	
[root@CNDAABTSAPZP14:/tmp]$ lssrc -a | grep -i syslogd	
 syslogdras       inoperative	
[root@CNDAABTSAPZP14:/tmp]$ lssrc -a | grep -i syslogd	
 syslogdras    41874        active	
	
netstat -Ana |grep -i 514 ---------->> For syslog Port	
	
Syslog server IP accroding server location	
2B Wing   10.14.91.208   	
1A Wing   10.14.117.28	
1B Wing   10.13.5.124	
Sec 59	  10.5.7.193  	Phase 2 Also
East Hub  10.135.0.56 	
South 	  10.96.7.207   
West      10.56.40.40   	
Infratel  10.14.166.130 	
Chennai   10.116.1.75   	
DR INFRATEL  10.166.1.75 	
******************************tcpdump************************************************	
How to create tcp dump file	
	
tcpdump -aX -s 10000 -w /tmp/`hostname`.pcap host 10.5.137.32 and tcp port 8085     Ritesh(working)	
	
	
tcpmdump -n -s10000 -w /tmp/AirtelLive_5Apr.snoop port 10038         for particullar port	
tcpdump command for AIX	
tcpdump -aX -s 10000 -w /tmp/error500.pcap host 10.5.45.173       for particaullar host	
tcmdump -n -s10000 -w /tmp/AirtelLive_5Apr.snoop(file name) 10.14.7.16 port 10038	
	
tcpdump -aX -s 10000 -w /tmp/(tcpdump file name).pcap host (destination ip) and tcp port (port no)(tcp dump command)	
chmod 755 (tcpdumpfilename)	
	
===================================================================
How to find out switch details & port details from tcp dump

tcpdump -i en8 -s 1500 -x -c 1 -vv 'ether [20:2] = 0x2000' |grep -v "0: "
The Device-ID field shows the name of the switch we are connected to.

The Port-ID shows the port name we are physically connected to.
	

=================================================================================

Display packets destined for or sent by a specific host on a specific port 

tcpdump -i en2 host testhost port 22

# tcpdump -i en2 host testhost port 22
12:15:38.033833162 myhost.47216 > testhost.22: . ack 610148954 win 17520 (DF) [tos 0x10]
12:15:38.113807903 myhost.47216 > testhost.22: P 145:193(48) ack 192 win 17520 (DF) 
                           [tos 0x10]

You can stop the trace by pressing Control-C. T
--------------------------------------------------------------------------------------------------------
mailx

there are some following steps for mailx config.

1.ip  of mail server has to  be in /etc/hosts with proper formatt.

 10.5.138.123 master CNDADBDEAPDT11
10.14.97.36  NDLS02  in.ibm.com

2.port 22 has to  be open between  mail server and client 
telnet  10.14.97.36 22
3. put entry in /etc/sendmail.cf in below format


# "Smart" relay host (may be null)
DSNDLSPT.in.airtel.com
DSNDLS02

4. then you can send mail by follwing command 
mail -s "testmail" asinghma@in.ibm.com < 12

---------------------------------------------------------------------
Sendmail

startsrc -s sendmail -a "-bd -q30m" 

display the version

sendmail -bt -d0.4 < /dev/null 

Mailx Configuration

-To config mailx
-Follow three steps  
-check the IP address and hostname of mail server      
-telnet mailserverip 25  
-see if this is ok      
-otherwise ask the app team to get the port 25 open on mail server for that server  
-if through      
-enter the mail server ip and hostname in /etc/hosts  
-vi /etc/sendmail.cf    
-go to (Relay Server)    
-below that DS enter is there      
-add host name of the mail server infront of DS        
-DShostname    
-there should not be any space        
-check if the server hostname is full qualified in /etc/hosts    
-if not add entry like this    
-IP Address   Hostname   Hostname.airtel.in  
-then run this command to check    
-mailx -vs mailaddresss  
-enter        
-press ctrl+D twice      
-it should come ok        
-check whether u got the mail from that server  


sendmail -bi       Creates new aliase db from /etc/aliase file. 
newaliases 
sendmail -bp       Displays the contents of the mail queue 
mailq 
sendmail -q        Processe the sendmail queue NOW 

sendmail -bt -d0.4 < /dev/null 
Prints out sendmail version, compile defines and system information 
refresh -s sendmail      Restart sendmail 
kill -l (sendmail PID) 
 	-----------	
--------------------------------------------------------------------------------

Sticky bit

The sticky bit (file mode bit 01000) is used to indicate special  treatment of certain files and directories.  A directory for which the sticky bit is set restricts deletion of files it contains.  A file in a sticky directory may only be removed or renamed by a user who has write permission on the directory, and either owns the file, owns the directory, or is the super-user.   This  is  useful for directories such as /tmp, which must be publicly writable, but should deny users permission to arbitrarily delete or rename the files of others.

Identifying sticky permissions.

# ls -ld /var/tmp
drwxrwxrwt  2   sys   sys   512   Jun 20 11:02  /var/tmp

See the "t"?  That tells us that the sticky bit is set.

A "T" refers to when the execute permissions are OFF.
A "t" refers to when the execute permissions are ON.

Setting sticky bit permissions.

The leading "1" in the "chmod" command sets the sticky bit.

# chmod 1771 <path_to_directory> (permissions for "other" have execute bit ON)
drwxrwx--t  
# chmod 1770 <path_to_directory> (permissions for "other" have execute bit OFF)
drwxrwx--T


----------------------------------------------------------------------------------
topas issue

If 'topas/nmon' is not running as a non root user, run the following command:

chmod u+s /usr/lib/perf/libperfstat_updt_dictionary
chmod u+s /usr/sbin/perf/diag_tool/getschedparms
chmod u+s /usr/sbin/perf/diag_tool/getvmparms

--------------------------------------------------------------------------------------------------
TO check the dead process :

fuser -cu /var
fuser -duV /var
fuser -kux "mount point name"


fuser -dV /home        check the dead process which are using the space, so space are beeing released

----------------------------------------------------------------------------------


If mount point are not getting visible:

synclvodm -v vgname
varyoffvg vgname
exportvg vgname
impotvg -y vgname disk
varyonvg vgname

**********************************Storage command*************************************

if disk is not deleted on TL9SP2

1-#nmon script for crontab 
2- ps -ef | grep -i nmon
3- kill -9 nmon process

then rmdev -Rdl -disk 


---------------------------------------------

	
dac1 delete issue

fget_config -Av
rmdev -Rdl dar0
rmdev -Rdl dac1
rmdev -Rdl fcs0
-----------------------------------

NETAPP Storage :

Driver location(DCTOOL): /home/unmgr007/Storage/ntap_aix_host_utilities_6.0 (First install SAN_Tool_Kit then MPIO)
To check the lun details:
sanlun lun show -wwpn
--------------------------------

for i in `echo "hdisk1
hdisk2
hdisk3
hdisk4
hdisk5
hdisk6
hdisk7
hdisk8"`; do chdev -l $i -a reserve_policy=no_reserve -P;done
------------------------------------------------------
unmount all the file system of the vg	
	
lsvg -l VG0| awk '{print $7}' | grep -v LV | xargs -I {} umount -f {}      umount the file system	
	
lspv | grep -v root | awk '{print $1}' | xargs -I {} rmdev -Rdl {}        delete the disk	
	
	
for i in `echo "75ABMB11108  75ABMB11108"`; do pcmpath query essmap|grep -w $i|grep -i path0; done      find the disk name against lun id

lspcmcfg   find the 4 k mpio disk	
	
how to delete the disk	
for i in `echo "vpath32 	
vpath33 	
vpath30 	
vpath31 	
vpath34 	
vpath35 	
vpath36 	
vpath37 	
vpath42 	
vpath43 	
vpath38 	
vpath44 	
vpath39 	
vpath45 	
vpath40 	
vpath41 	
`; do rmdev -Rdl $i|grep -i path0; done  

 lspcmcfg  | grep -w hdisk75  pcmpath query essmap |grep path0 |egrep '75CGPY1103D|75CGPY1103|75CGPY1104C' ls -l |egrep '14, 62|14, 63|14, 64'  pcmpath query essmap | awk '{print $1,$5}'  | sort -u  

 
pcmpath query essmap |grep path0 |egrep '75CGPY1103D|75CGPY1103|75CGPY1104C'
ls -l |egrep '14, 62|14, 63|14, 64'

pcmpath query essmap | awk '{print $1,$5}'  | sort -u 

Storge command 
lspcmcfg   ******************Check lun id
fget_config -Av
mpio_get_config -Av
sddpcm_get_config -Av
datapath query device
datapath query adapter
datapath query essmap
datapath query adapter
datapath set  adapter 1 online
datapath query wwpn
pcmpath query device
pcmpath query adapter
pcmpath query essmap
pcmpath query wwpn
pcmpath query adapter
pcmpath set adapter 1(fcss number) offline aa
pcmpath query adapter
lqueryvg -Atp hdisk62
xiv_devlist
xiv_devlist -o device,vol_name it will show only lun id and disk name
========================================
if driver installed but pcmpath query adapter is not showing any device

manage_disk_drivers -l     To view the driver used by storage managemnet
manage_disk_drivers -d device -o driver_option  
add one more line, after change the settings reboot is required to make them effective    
----------------------------------------------------------------------------------------------------
pvid issue

Method error (/etc/methods/chgdisk):
        0514-047 Cannot access a device.
     pv     
     
solution:

bash-2.04# pcmquerypr -vh /dev/hdisk0
6331666437653031
bash-2.04# pcmquerypr -ch /dev/hdisk0
bash-2.04# pcmquerypr -vh /dev/hdisk0
bash-2.04#
========================================
how to get lun id

lspath
lsvpcfg
datapath query wwpn
pcmpath query essmap | awk '{print $1,$5}'  | sort -u 

xiv_attach       xiv_detach       xiv_devlist      xiv_diag         xiv_fc_admin     xiv_iscsi_admin 

How to find lun id of server
root@SBLRDMXPDBDP05:/tmp]$ lscfg -vpl hdisk2|grep -w "Serial Number"
        Serial Number...............6SE30412

fcstat -D fcs2 | grep Attention   for checking the link is up or not
[root@CBGLCTLMDBOP04:/tmp]$ fcstat -D fcs2 | grep Attention
Attention Type:   Link Up

As discussed, Kindly find the command to change the reserve policy in AIX.
#chdev -l hdiskX -a reserve_policy=no_reserve -P(Where X is hdisk1,2,...& the disks should not be busy to change the disk attribute)
	

how to offline the fcs card

pcmpath set adapter 1(fcss number) offline aa
---------------------------------csc storage------------------------------------------------------------
Hitachi
http://aix4admins.blogspot.in/2011/05/location-of-scripts-usrdynamiclinkmanag.html 

================================

how to find the lun id from clinet
how to find the lun id from clinet
#odmget -q name=hdisk23 CuAt|grep -i aix| head -n 1 | cut -c 21-24
21DE
 odmget -q name=hdisk23 CuAt
===========================================================
vg creation issue

0516-021 /usr/sbin/varyonvg: The varyonvg failed because the volume group's major number was already used by another device. 

We have an issue with one of our customer getting the problem unable to create the volume group and it triggers the major number was already used.

It trigger the below error
$ alt_root_vg -target hdisk2   << hdisk2 is the Hitachi  san disk.

Calling mkszfile to create new /image.data file.
Checking disk sizes.
Creating cloned rootvg volume group and associated logical volumes.
0505-102 alt_disk_install: mkvg has returned an error.
0516-021 /usr/sbin/varyonvg: The varyonvg failed because the volume group's
major number was already used by another device.
0516-862 /usr/sbin/mkvg: Unable to create volume group.

Solution from IBM as

I believe what is going on here is the following:
The main detailed issue we are having here is that, sometimes, device
drivers or kernel extensions will use a Major Number but fail to update
the ODM, so AIX thinks the value is available when it is actually in use
in the kernel.

Hence, what we will do here is that we will try to get rid of the
problematic Major Number, as follows:

- We will run "lvlstmajor" to list the next available major number
# lvlstmajor

> it should display a number, Example:  XX

- Then, we will use this displayed major number with a dummy VG
# lvgenmajor testvgh

> this should create an entry in ODM class CuDvDr for "dummyXX"

- Now, we will make sure that the new major number is ready:
# lvlstmajor

> it should display an incremented number, i.e.  XX+1

- And now, we can try creating a Test Volume Group to make sure that the
"mkvg" command will work fine:
# mkvg -y testvg hdisk2

> where hdisk2 is the disk you wanted to create the Alt-Disk-Copy on

- If that works, then Remove the newly created "testvg":
# varyoffvg testvg
# exportvg testvg

** So far, we made sure that the "mkvg" command is working perfectly

- Now, we can retry the original command...the alt_root_vg -target hdisk#
** After the original command, "alt_root_vg", finishes successfully,
you can remove the "dummyXX" entry from ODM class CuDvDr, as follows:

# odmdelete -o CuDvDr -q "value1=dummyXX"
0518-307 odmdelete: 1 objects deleted.
-------------------------offline parameter----------------------------------------------------------------------

1. TL Level should be latest in the server -- AIX 6.1 TL-09 SP-02 or above
2. SDDPCM should at latest version -- SDDPCM Version 2.6.4.0 or above
3. Interface on which Public IP has been assigned should be an ether channel. Exception is there in case of HACMP or Virtual N/W.
4. Keep optimal values for  "num_cmd_elems" depending on FCS Card Speed. Do not change value of this parameter, if its value is already set more than the value mentioned below.

	FCS Card Speed  	num_cmd_elems Value
	2G                    512
	8G / 4G              1024
	Above 8G              2048

    For Virtual FCS Adapter, keep the num_cmd_elems value same as of its corresponding Physical FCS adapter on VIO.  

# chdev -P -l fcs0 -a num_cmd_elems=1024   <Example>
    
    (To make this value optimal on client, we need to first change on FCS Adapter on VIO and reboot. After that only, it will be able to make changes on client end. So it will have to be planned separately)
5. Keep fscsi parameters as below
dyntrk = yes
fc_err_recov = fast_fail

# chdev -P -l fscsi0 -a dyntrk=yes -a fc_err_recov=fast_fail

6. Need to change SAN disk queue_depth value.

This change is to be performed only for 7K and 8K Storage disks. Ensure to check this before implementation.

Check existing value and if this value if less than 32, change it to 32. Pls. ignore this if the value of queue_depth is already 32 or more than that.

# chdev -P -l $d -a queue_depth=32

7. Change IPqmaxlen to 512

# no -r -o ipqmaxlen=512



-----------------------------------------------------------------------------------------------
Storage Migration:

1- add the lun in dedired VG
   extendvg appsvg hdiskpower1 hdiskpower2
2- mirrorvg -s appsvg hdiskpower1 hdiskpower1
 
3-  run the sync commond it will sync 16 pp per second
 #nohup syncvg -vP 16 appsvg & 
4- lsvg appsvg |grep STALE

#lsvg -l appsvg


#unmirrorvg appsvg hdiskpower0 hdiskpower1

#lsvg -l appsvg
#reducevg appsvg hdiskpower0 hdiskpower1

#rmdev -Rdl hdiskpower0 hdiskpower1

#Remove the chaild disks of (hdiskpower0
hdiskpower1)
---------------------------------------------------------------------------------------------


[root@CNDAFXCNDBOP21:/dev]$ errpt | pg | head
IDENTIFIER TIMESTAMP  T C RESOURCE_NAME  DESCRIPTION
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM
4BAA1659   0520094015 P H LVDD I/O ERROR DETECTED BY LVM


---------------------------------------------------------------------------
LABEL:LVM_IO_FAIL
IDENTIFIER:     4BAA1659

Date/Time:       Wed May 20 09:40:25 IST 
Sequence Number: 138923
Machine Id:      00C2FA544C00
Node Id:         CNDAFXCNDBOP21
Class: H
Type:  PERM
Resource Name:   LVDD  
Resource Class:  NONE
Resource Type:   NONE
Location:        

Description
I/O ERROR DETECTED BY LVM

Probable Causes
POWER, DRIVE, ADAPTER, OR CABLE FAILURE

        Recommended Actions
        RUN DIAGNOSTICS AGAINST THE FAILING DEVICE

Detail Data
PHYSICAL VOLUME DEVICE MAJOR/MINOR
0011 0003 
ERROR CODE AS DEFINED IN sys/errno.h


3- convert hexadecimal to decimal 
both value
0011 0003

4.cd /dev

[root@CNDAFXCNDBOP21:/dev]$ ls -ltr | egrep -i "17,  3"
brw-------   1 root     system       17,  3 Nov 16 2014  vpath3
crw-------   1 root     system       17,  3 Nov 16 2014  rvpath3
[root@CNDAFXCNDBOP21:/dev]$ lspv | grep -i vpath3
vpath300c6192fe5b777b0vg04  active
[root@CNDAFXCNDBOP21:/dev]$ lsvg -l vg04
vg04:
LV NAME   TYPE       LPs   PPs   PVs  LV STATE      MOUNT POINT
oradata3  jfs2       670   670   5    open/syncd    /ORADATA3

------------------------------------cvfs---------------------------------------------------------

/etc/rc.cvfs status
/etc/rc.cvfs stop
/etc/rc.cvfs start

mount -v cvfs /dev/cvfsctl:Ingest /Ingest
df -g
mount -v cvfs /dev/cvfsctl:Production /Production
mount -v cvfs /dev/cvfsctl:WIP /WIP
mount -v cvfs /dev/cvfsctl:Proxy /Proxy


-----------------Offline Parameter as per recommendation----------------------------

1. TL Level should be latest in the server -- AIX 6.1 TL-09 SP-02 or above
2. SDDPCM should at latest version -- SDDPCM Version 2.6.4.0 or above
3. Interface on which Public IP has been assigned should be an ether channel. Exception is there in case of HACMP or Virtual N/W.
4. Keep optimal values for  "num_cmd_elems" depending on FCS Card Speed. Do not change value of this parameter, if its value is already set more than the value mentioned below.

	FCS Card Speed  	num_cmd_elems Value
	2G512
	8G / 4G 1024
	Above 8G2048

    For Virtual FCS Adapter, keep the num_cmd_elems value same as of its corresponding Physical FCS adapter on VIO.  

# chdev -P -l fcs0 -a num_cmd_elems=1024   <Example>
    
    (To make this value optimal on client, we need to first change on FCS Adapter on VIO and reboot. After that only, it will be able to make changes on client end. So it will have to be planned separately)
5. Keep fscsi parameters as below
dyntrk = yes
fc_err_recov = fast_fail

# chdev -P -l fscsi0 -a dyntrk=yes -a fc_err_recov=fast_fail

6. Need to change SAN disk queue_depth value.

This change is to be performed only for 7K and 8K Storage disks. Ensure to check this before implementation.

Check existing value and if this value if less than 32, change it to 32. Pls. ignore this if the value of queue_depth is already 32 or more than that.

# chdev -P -l $d -a queue_depth=32

7. Change IPqmaxlen to 512

# no -r -o ipqmaxlen=500
-------------------------------------------------------------------------------------------------------
maxage  



for i in `cat Critical_UserID.txt`; do ip=`echo $i|awk -F ":" '{print $1}'`; echo $ip; user=`echo $i|awk -F ":" '{print $2}'`; os=`ssh $ip uname`; if [ $os == "AIX" ]; then id=`ssh $ip sudo cat /etc/passwd|grep -i $user|awk -F ":" '{print $1}'`; count=`ssh $ip sudo lsuser $id|wc -l`; if [ $count -eq 1 ]; then ssh $ip sudo chuser maxage=25 $id;else echo $ip":"$user":""Not Exist"; if [ $os == "Linux" ]; then id=`ssh $ip sudo cat /etc/passwd|grep -i $user|awk -F ":" '{print $1}'`;count=`ssh $ip sudo lsuser $id 2>/dev/null|wc -l`; if [ $count -eq 1 ]; then ssh $ip sudo chage -M 180 $id;else echo $ip":"$user":""Not Exist";fi;fi; fi; fi; done


--------------------


#############################find the wwn number#############################################
how to find wwn number 

lshwres -r io --rsubtype slotchildren -m xxx -F phys_loc,description,mac_address,wwpn,microcode_version   find wwn number from hmc
-------------
To view the adapter details, when system is in maintenance mode:

         8 = Open Firmware Prompt    6 = Stored Boot List


     Memory      Keyboard     Network     SCSI     Speaker  ok
0 > ioinfo 

!!! IOINFO: FOR IBM INTERNAL USE ONLY !!!
This tool gives you information about SCSI,IDE,SATA,SAS,and USB devices attached to the system

Select a tool from the following

 1. SCSIINFO
 2. IDEINFO
 3. SATAINFO
 4. SASINFO
 5. USBINFO
 6. FCINFO
 7. VSCSIINFO

q - quit/exit

==> 6



FCINFO Main Menu
Select a FC Node from the following list:
  #  Location Code      Pathname
---------------------------------------------------------------
  1. U9117.MMD.066CB37-V36-C5-T1    /vdevice/vfc-client@30000005
  2. U9117.MMD.066CB37-V36-C6-T1    /vdevice/vfc-client@30000006
  3. U5877.001.9K8O339-P1-C4-T1     /pci@800000020000144/fibre-channel@0
  4. U5877.001.9K8O339-P1-C4-T2     /pci@800000020000144/fibre-channel@0,1
  5. U5877.001.9K8O339-P1-C5-T1     /pci@800000020000145/fibre-channel@0
  6. U5877.001.9K8O339-P1-C5-T2     /pci@800000020000145/fibre-channel@0,1

  q - Quit/Exit

==> 3

FC Node Menu
FC Node String: /pci@800000020000144/fibre-channel@0
FC Node WorldWidePortName: 10000090fa3e9146 
-----------------------------------------------------------------
1. List Attached FC Devices
2. Select a FC Device
3. Enable/Disable FC Adapter Debug flags

q - Quit/Exit
=================================================== 



Hi Hamid Bhai ,
 
 
===========================================
 how to find old wwn number

How to fix old WWPNs to the LPAR profile.

Important : take profile backup before doing any changes.

To change the WWPNs of the virtual adpater to match the original WWPNs by using the HMC command line(be careful with HMC CLI syntax, backslash, and double quotes).

From HMC command line:

Before make any changes, take the output using the below command,

#lssyscfg -r prof -m <frame_name> -F virtual_fc_adapters --filter lpar_names=<lpar_name>

Command to change the the wwpns

#chsyscfg -m <frame> -r prof -i "name=normal,lpar_name=<lpar>,\"virtual_fc_adapters=\"\"<lpar slot number>/client/<violparID>/<vioname>/<vioaslotnumber>/activewwpn,inactivewwpn/0\"\"\""

Example:

chsyscfg -m 9117-MMC-06164D7 -r prof -i "name=Normal,lpar_name=tsm03,\"virtual_fc_adapters=\"\"318/client/1/vios021/625/C050760562500074,C050760562500075/0\"\",\"\"319/client/1/vios021/626/C050760562500076,C050760562500077/0\"\",\"\"418/client/2/vios022/1625/C050760562500078,C050760562500079/0\"\",\"\"419/client/2/vios022/1626/C05076056250007A,C05076056250007B/0\"\"\""

Once it completed, again use the below command and verify the status,

hscroot@hmc02:~> lssyscfg -r prof -m 9117-MMC-06164D7 -F virtual_fc_adapters --filter lpar_names=tsm03

"""418/client/2/seskvios022/1625/c050760562500078,c050760562500079/0"",""419/client/2/vios022/1626/c05076056250007a,c05076056250007b/0"",""318/client/1/vios021/625/c050760562500074,c050760562500075/0"",""319/client/1/vios021/626/c050760562500076,c050760562500077/0"""

hscroot@hmc02:~>

#shutdown and activate client server
---------------------------------------------------------------------------------------------
krb version
kerber version

kinit -v	
__________________________________________________________________________________________________	
	

/nmon/menu_output/MKUSER_issue       migration user issue
**************************************************************************************	
How to check appache version?	
#rpm -qa | grep i http*	
	
*************************Network*****************************************************	
hostent -S   show /etc/hosts database entry.	
This file contains the hostnames and their address for hosts in the network.  This file is used to resolve a hostname into an Internet address.  



-----------------------------------------------------------------------------------------------------
en issue
If we have deleted the network interface & run cfgmgr  but en is not visable then use below step

smit tcpip >Further Configuration>Network Interfaces>Network Interface Selection>Add a Network Interface>Add a Standard Ethernet Network Interface>seletc the card & assign  ip & subnet mask

after this use smit mktcpip for configure gateway	


=======================================================================================
how to remove the ent from etherchannel 
how to replace the ent card form etherchannel

example: below example ent18 is etherchannel  & we removing the ent8 from etherchannel  latter we are adding same card in etherchannel 


/usr/lib/methods/ethchan_config -d ent18 ent10                             it will remove the ent10 from etherchanel  ent18
rmdev -dl ent8 
cfggmr 
/usr/lib/methods/ethchan_config -a ent18 ent10                             it will add  the ent10 into etherchanel  ent18
entstat -d ent18 | grep -i Link 
mkdev -l SEA  


************************nfs****************************************************************	
	
mount -o vers=4  10.5.130.248:/cdrpdf/cdrpdf  	
mount -o vers=4  10.5.130.248:/predoc/predoc       	
mount -o vers=4  10.5.130.248:/predef/predef       	
mount -o vers=4  10.5.130.248:/cdrscripts      /cdrscripts    	
mount -o vers=4 -o port=2049 127.0.0.1:/TWSS_CDR /TWSS_CDR    	
mount -o vers=4 10.5.177.168 /osbkp /mnt	

mount -o vers=3 10.13.21.198:/db2home /db2home
	
mount -o vers=4 10.14.92.169:/predoc/predocnfs4   Jan 31 04:24 vers=4
	
how to change the nfs port	
put the below intry	
vi /etc/services	
	
mountd      708/tcp	
mountd      708/udp	
	
stopsrc -s mountd	
startsrc -s mountd

nfs issue on linux server 10.5.72.21 and 10.5.72.25    10.5.76.37
cat /etc/rc.local
rpcinfo -p  10.5.84.48
check mountd port and change according the mountd port in below line

su - mcm -c "ssh -2 -f -x -c blowfish -L 5001:10.5.84.48:2049 -L 5002:10.5.84.48:719 -l mcm 10.5.84.48 /bin/sleep 600d"	



"vmount: operation not permitted" Error From Linux NFS Server 

localhost:root:/#mount 10.1.1.1:/nfs_data /mnt/nfsShare
mount: 1831-008 giving up on:
10.1.1.1:/nfs_data
vmount: Operation not permitted.

Sometimes Linux NFS servers will do port checking and require that the NFS client use a reserved port.
nfso -p -o nfs_use_reserved_ports=1



# mount stlsydunx03:/export/nim/mksysb /mksysb
mount: 1831-008 giving up on:
stlsydunx03:/export/nim/mksysb
vmount: The file access permissions do not allow the specified action.
NFS fsinfo failed for server stlsydunx03: error 7 (RPC: 1832-010 Authentication error)
# nfso -po nfs_use_reserved_ports=1
Setting nfs_use_reserved_ports to 1
Setting nfs_use_reserved_ports to 1 in nextboot file
# mount stlsydunx03:/export/nim/mksysb /mksysb
# 

soft mount how to mount 
mount -o rw,bg,soft,intr,proto=tcp,retry=100 ktazd216:/misc /swmount  
--------------------------------
nfs not starting

NFS Services not getting started :

Check the loopback entries, might be hashed

http://www-01.ibm.com/support/docview.wss?uid=isg3T1012195


/mksysb -anon=0,sec=sys:krb5p:krb5i:krb5:dh,rw,access=my5ss001:my4ashmc:my5ss002:myauvuclayvio01:myauvuclayvio02:myauvuclayvio04:rid002:rip007:myauvuclayvio03:myauvuv01202944:rip007-temp-mgt:my4ss002:my4ss001,root=my5ss001:my4ashmc:my5ss002:myauvuclayvio01:myauvuclayvio02:myauvuclayvio04:rid002:rip007:myauvuclayvio03:myauvuv01202944:rip007-temp-mgt:my4ss002:my4ss001
___________________________________________________________________________________________


foglight

/apps/foglight/Quest_Software/Foglight_Agent/bin/fglam --stop
/apps/foglight/Quest_Software/Foglight_Agent/bin/fglam/fglam --start


==========================================================================================
snmp version

what /usr/sbin/snmpd 

-------------------------------------------------------------------------

Disable Vulnerable Network Services , No

#ftp    stream  tcp6    nowait  root    /usr/sbin/ftpd  ftpd 
#shell   stream  tcp6    nowait  root    /usr/sbin/rshd         rshd
#login  stream  tcp6    nowait  root    /usr/sbin/rlogind       rlogind

sudo su - root
cat /etc/inetd.conf|grep -w tftp
cat /etc/inetd.conf|grep -w ftp
cat /etc/inetd.conf|grep -w rshd
cat /etc/inetd.conf|grep -w login

vi /etc/inetd.conf

echo "#Klogin-kshell" >>/etc/inetd.conf
echo "#tftp   dgram   udp6    SRC     nobody  /usr/sbin/tftpd tftpd -n" >>/etc/inetd.conf
echo "#login  stream  tcp6    nowait  root    /usr/sbin/rlogind       rlogind" >>/etc/inetd.conf


--------------------------------main gpfs------------------------------
tail -f3000 /var/adm/ras/mmfs.log.latest         gpfs log location
	

mmlsnsd -f gpfs -m       

# mmlsnsd -f gpfs -m         To show the node names use the –f and –m option


------------------------------------------------------------------------

nsd1 AC1513514CD152BF /dev/hdisk1 node1
nsd2 AC1513514CD152C0 /dev/hdisk2 node2
nsd3 AC1513514CD152C1 /dev/hdisk3 node3
nsd4 AC1513514CD15352 /dev/hdisk4 node4

To show the failure group info and storage pool info



-------------------------------------------------------------------------
[root@CNDABIFFAPZP01:/usr/lpp/mmfs/bin]$ ./mmlsdisk /dev/wsepxml1
disk         driver   sector failure holds    holds        storage
name         type       size   group metadata data  status        availability pool
------------ -------- ------ ------- -------- ----- ------------- --------
GPFS_WESTSEPXML1 nsd         512    4001 yes      yes   ready         up system       
GPFS_WESTSEPXML2 nsd         512    4001 yes      yes   ready         down system

then run the below command

./mmchdisk /dev/wsepxml1 start -a         how to up the availibility of disk in gpfs

-------------------------------------------------------------------------

find the gpfs cluster is running on how many server



$ for IP in `cat IPLIST_2794.txt`; do  grep "^mmlscluster," $IP/*diskinfo | grep "GPFS cluster name:" | awk '{print $5}' >> /dev/null; if [ $? -eq 0 ] ; then  echo $IP","`grep "^mmlscluster," $IP/*diskinfo | grep "GPFS cluster name:" | awk '{print $5}'`; fi; done > GPFS

-------------------------------------------------------------------
gpfs storage
 
storage migration of gpfs

  
1- create the nsd
2- add the nsd in filesystem
3- ./mmlsdisk corpattachment_gpfs
4- /usr/lpp/mmfs/bin/mmchdisk corpattachment_gpfs suspend -d "GPFSDISK204;GPFSDISK205;GPFSDISK206;GPFSDISK207;GPFSMIG89;GPFSMIG114;GPFSMIG136;GPFSMIG153"
5- /usr/lpp/mmfs/bin/mmdeldisk corpattachment_gpfs "GPFSDISK204;GPFSDISK205;GPFSDISK206;GPFSDISK207;GPFSMIG89;GPFSMIG114;GPFSMIG136;GPFSMIG153" -r

============================================================

# mmtracectl --set --trace=def --aix-trace-buffer-size=120M --trace-file-size=240M -N all 
# /usr/lpp/mmfs/bin/mmtracectl --start -N all ; sleep 30 ; /usr/lpp/mmfs/bin/mmtracectl --stop -N all ; /usr/lpp/mmfs/bin/mmtracectl --off -N all 
# pbrun /usr/lpp/mmfs/bin/mmdsh -N all "/usr/lpp/mmfs/bin/mmfsadm dump all > /tmp/mmfs/service.dump.all.$(hostname)"
# gpfs.snap -a

Then please upload the snap file in /tmp and the traces in /tmp/mmfs to the PMR.
 

------------------------------------------------------------------------
Correct set of data collection steps for next GPFS slowness

5. When you experiences a slow performance in GPFS, follow below steps  to collect data:      
	5a. Use mmlsnode to monitor waiters on the cluster. 
	        mmlsnode -N waiters -L       
       
	5b. Create a working collective of nodes that have waiters    
   	       mmlsnode -N waiters > /tmp/node.list   
        
	5c. Capture waiters from all the nodes into a file: 
   mmlsnode -N waiters -L > /tmp/allwaiters.$(date +%m%d%H%M%S)         
         
	5d On nodes with waiters, get a "mmfsadm dump all" and "dump kthreads" :
   mmdsh -N /tmp/node.list '/usr/lpp/mmfs/bin/mmfsadm dump all >   /tmp/mmfs/gpfs.$(uname -n).dumpall.$(date +%m%d%H%M%S)'       
   mmdsh -N /tmp/node.list '/usr/lpp/mmfs/bin/mmfsadm dump kthreads >   /tmp/mmfs/gpfs.$(uname -n).dumpkthreads.$(date +%m%d%H%M%S)'  

	5e. collect a fresh gpfs.snap         



./mmlsnode -N waiters -L   for aix
 ./mmdiag  --waiters       for linux  
--------------------------------------------------------------------------	
	
Step 3 : Changes in GPFS Cluster from vpath to hdisk	
Err:510	
only perform 1st step 	
	
1) Replace the "vpath" from "hdisk" in /var/mmfs/gen/mmsdrfs 	
	
   cp /var/mmfs/gen/mmsdrfs /var/mmfs/gen/mmsdrfs_bkp	
   cat /var/mmfs/gen/mmsdrfs|sed 's/vpath/hdisk/g'>/var/mmfs/gen/mmsdrfs_new	
   cp /var/mmfs/gen/mmsdrfs_new /var/mmfs/gen/mmsdrfs	
	
2) Save the Configuration of tiebreakerDisks using "/usr/lpp/mmfs/bin/mmlsconfig" command	
	
3) Remove the tiebreakerDisks using "/usr/lpp/mmfs/bin/mmchconfig tiebreakerDisks=no" command	
	
4) Reconfigure tiebreakerDisks using "/usr/lpp/mmfs/bin/mmchconfig tiebreakerDisks="GPFS_DISKx;GPFS_DISKy" "command	
   "Disks shpuld be same as the previous one "	
	
5) Start the GPFS Cluster in all nodes using "/usr/lpp/mmfs/bin/mmstartup -a" command	
	
----------------------------------------------
gpfs snap

how to collect gpfs snap
cd /usr/lpp/mmfs/bin

./gpfs.snap -a         collect the gpfs snap of all nodes
./gpfs.snap            collect the gpfs snap single nodes

	
	
----------------------------------	
fsck on gpfs mount point	
Unmount the the all mount from all node	
run the below command	
cd /usr/lpp/mmfs/bin	
./mmfsck /dev/dlvname	


[root@CNDAECRMDBOP11:/usr/lpp/mmfs/bin]$ ./mmlsfs /dev/ecrm_gpfs        check the properties of GPFS file system
flag      valuedescription
------------------- ------------------------ -----------------------------------
 -f       4096 Minimum fragment size in bytes
 -i       512  Inode size in bytes
 -I       8192 Indirect block size in bytes
 -m       1    Default number of metadata replicas
 -M       2    Maximum number of metadata replicas
 -r       1    Default number of data replicas
 -R       2    Maximum number of data replicas
 -j       cluster        Block allocation type
 -D       nfs4 File locking semantics in effect
 -k       all  ACL semantics in effect
 -n       32   Estimated number of nodes that will mount file system
 -B       131072         Block size
 -Q       none Quotas enforced
none Default quotas enabled
 --filesetdf        no   Fileset df enabled?
 -V       10.00 (3.2.0.0)File system version
 --create-time      Tue May 13 23:08:04 2008 File system creation time
 -u       yes  Support for large LUNs?
 -z       no   Is DMAPI enabled?
 -L       4194304        Logfile size
 -E       yes  Exact mtime mount option
 -S       no   Suppress atime mount option
 -K       whenpossible   Strict replica allocation option
 --fastea no   Fast external attributes enabled?
 --inode-limit      10000128       Maximum number of inodes
 -P       system         Disk storage pools in file system
 -d       GPFS_DISK6;GPFS_DISK7;GPFS_DISK8  Disks in file system
 -A       yes  Automatic mount option
 -o       none Additional mount options
 -T       /ecrmDefault mount point
 --mount-priority   0    Mount priority


mm

-------------------------------------------------------------------------------------------------------

OSI DR Drill 
GPFS issue 
when we are going to do  DR Drill then we have bring down the GPFS on DR side   and then we have bring down gpfs on Production servers. After that storage team will remove the disks which are 
existed on DR servers will be removed first. Then Storage Team will map the Production GPFS disks to DR Servers . And after getting confirmation from Storage Team we will start the GPFS 
Cluster and all nodes will running active . But if mount point is not coming so we have to follow the below mentioned Process.
After that when will start the GPFS on DR nodes at that if we are getting error which are mentioned below.

[root@CNDAOSIPDBOP01:/crs11g/grid/11.2.0.2/bin]$ /usr/lpp/mmfs/bin/mmmount /erp
Sun Sep 21 03:42:11 IST 2014: 6027-1623 mmmount: Mounting file systems ...
The specified device does not exist.
GPFS: 6027-703 Some file system data are inaccessible at this time.
Check error log for additional information.
GPFS: 6027-549 Failed to open gpfs_erp.
The specified device does not exist.
GPFS: 6027-701 Some file system data are inaccessible at this time.
GPFS: 6027-510 Cannot mount /dev/gpfs_erp on /erp: A file, file system or message queue is no longer available.
mmmount: 6027-1639 Command failed.  Examine previous error messages to determine cause.

Then we have to copy the file which contain the information regarding gpfs disks .
# cd /var/mmfs/gen/
# ls -ltr 
total 80
-rw-r--r--    1 root     system 60 May 16 2012  mmfsClusterNodes
-rw-------    1 root     system  5 Aug 21 2012  BallotNum
lrwxrwxrwx    1 root     system 28 Jun 26 2013  mmfslog -> /var/adm/ras/mmfs.log.latest
-rw-r--r--    1 root     system298 Dec 30 2013  nsdmap
-rw-r--r--    1 root     system165 Sep 11 00:21 mmfsNodeData
-rw-r--r--    1 root     system166 Sep 11 00:21 nsdpvol
-rw-r--r--    1 root     system         7044 Sep 17 16:49 mmsdrfs
-rw-r--r--    1 root     system  0 Sep 17 16:49 mmfsNewKeyLevel0
-rw-r--r--    1 root     system  0 Sep 17 16:49 mmfsCommittedKeyLevel0
-rw-r--r--    1 root     system394 Sep 17 16:49 mmfs.cfg
-rw-r--r--    1 root     system  0 Sep 17 16:49 mmfsVfsNumber2
-rw-r--r--    1 root     system  0 Sep 17 16:49 mmfsEnvLevel29
drwxr-xr-x    2 root     system256 Sep 17 16:49 mmLockDir
-rw-------    1 root     system         4096 Sep 21 02:18 BallotFile
-rw-r--r--    1 root     system  9 Sep 21 02:19 mmsdrservPid

# cp -pr mmsdrfs /tmp
# chown -R unmgr007.staff /tmp/mmsdrfs
# cp -pr /tmp/mmsdrfs 10.92.1.30:/tmp (copy this file to DR server)

then go DR server

# cd /usr/lpp/mmfs/bin/
# ./mmshutdown -a
[root@CNDAOSIPDBOP01:/usr/lpp/mmfs/bin]$./mmexportfs all -o /tmp/mmcrfs20092014

mmexportfs: Processing file system gpfs_erp ...

mmexportfs: Processing disks that do not belong to any file system ...
mmexportfs: 6027-1371 Propagating the cluster configuration data to all
  affected nodes.  This is an asynchronous process.
[root@CNDAOSIPDBOP01:/usr/lpp/mmfs/bin]$ ./mmimportfs all -i /tmp/mmsdrfs 

mmimportfs: Processing file system gpfs_erp ...
mmimportfs: Processing disk GPFS_DISK1_NEW
mmimportfs: Processing disk GPFS_DISK2_NEW
mmimportfs: Processing disk GPFS_DISK3_NEW
mmimportfs: Processing disk GPFS_DISK4
mmimportfs: Processing disk GPFS_DISK5

mmimportfs: Processing disks that do not belong to any file system ...
mmimportfs: Processing disk GPFS_DISK1
mmimportfs: Processing disk GPFS_DISK2
mmimportfs: Processing disk GPFS_DISK3

mmimportfs: Committing the changes ...

mmimportfs: The following file systems were successfully imported:
        gpfs_erp
mmimportfs: 6027-1371 Propagating the cluster configuration data to all
  affected nodes.  This is an asynchronous process.

# /usr/lpp/mmfs/bin/mmstartup -a
# /usr/lpp/mmfs/bin/mmgetstate -a
# /usr/lpp/mmfs/bin/mmlsmount all  
# /usr/lpp/mmfs/bin/mmlsmount  ecrm

 

##########################################################################################################

/lib/modules/2.6.18-274.7.1.el5/extra         gpfs issue linux


-----------------------------------	
	
mmdf fs1 --block-size auto                      chekc the file system details & pool size
	
	
	
How to increase the inode size of gpfs file system	
Increase inode in gpfs file system.	
#df -i /MBILL        CHECK INODE USES %

#mmchfs TMPMARPDF2 --inode-limit 2M   (if inode is is 100% full incresed inode upto 2M )
#./mmchfs TMPMARPDF2 --inode-limit 3M	(if inode is is 100% full incresed inode upto 3M)	 

$ mmdf TMPMARPDF2 -F  (TMPMARPDF2=lv--inode-limitname, get the status of inode full %)	   check the inode
Inode Information	
-----------------	
Number of used inodes:         1601792	
Number of free inodes:     0	
Number of allocated inodes:    1601792	
Maximum number of inodes:      2097152	
#df -i /mountpoint (check inode use in %)	
	
	
	
GPFS	
Stop the GPFS	
cd /usr/lpp/mmfs/bin/	
then 	
./mmshutdown     gpfs stop on single node  (always try to use this commond)	
./mmshutdown -a  gpfs stop on all node 	
or	
/usr/lpp/mmfs/bin/mmshutdown	
	
Start the GPFS	
----------------	
#cd /usr/lpp/mmfs/bin/	
then 	
#./mmstartup     gpfs stop on single node  (always try to use this commond)	
 or 	
#/usr/lpp/mmfs/bin/mmstartup	
	
Check status of GPFS:	
---------------------	
#/usr/lpp/mmfs/bin/mmgetstat        check on single node	
#/usr/lpp/mmfs/bin/mmgetstat -a     check on all node	
	
Mount gpfs file system:	
-----------------------	
#cd /usr/lpp/mmfs/bin/./mmmount /backup        mount gpfs filesystem (mannully)	
#cd /usr/lpp/mmfs/bin/./mmumount /backup      unmount gpfs file system (mannully)	
	
#cd /usr/lpp/mmfs/bin/./mmlscluster       show primary and secondry 	
	
Check version	
---------------	
	
lslpp -l | grep -i gpfs	

---------------------------------------------------------------------------
*************************************GPFS*************************************************	
#######################################################	
GPFS issue in LINUX	
./mmchdisk /dev/lucene_search start -d gpfs52nsd   	
	

gpfs issue   
./mmlsconfig
change below parqmetter


mmchconfig leaseRecoveryWait=120

mmchconfig maxMissedPingTimeout=120

mmchconfig minMissedPingTimeout=120

mmchconfig totalPingTimeout=120

mmchconfig sendTimeout=120


###########################gpfs collect Trace#####################################################################
gpfs trace

To Start the trace

mmtracectl --set --trace=def --trace-file-size=64000000 --tracedev-buffer-size=3200000 --trace-recycle=global
mmtracectl --start

When to stop Trace
Once you ensure that problem situation is captured then use below command to stop trace

sleep 40
mmtracectl --stop -N all	

****************************************************************************************


To check MAX_ARG parameter 

getconf ARG_MAX
	
**********************************Multibos********************************************	
multibos	
	
lsvg rootvg |grep -i FREECHECK THE FREE SPACE OF ROOTVG	
lsvg -l rootvg CHECK ALL LV OF ROOTVG	
multibos -S    IF ANY EXIST MULTIBOS ALREAD INSTALLED IT GO MULTIBOOT SHELL	
multiboot -R   Remove the exist multibos. 	
multibos -Xstp       (Preview)     PRIVIEW OF MULTIBOS	
multibos -Xst  Create Multibos	
	
Now we can installed ML/Patches of Standby BOS.	
Then take multibos session	
multibos -S	
then check all fixes by emgr -P	
and remove all fixes in multibos session (Stand by BOS) by 	
emgr -rL fix name        remove the fix	
emgr -e fixt name -p      preview of installation of fix	
emgr -e fix name -X      installed fix	
emgr -e IV93884s8a.170302.71TL03SP08.epkg.Z -X

 

after it upgrade TL	
multibos -Xacpl /software/AIX_61_TL8_SP01	
multibos -Xacp -l /var/opt/BESClient/AIX_61_TL8_SP01        (Preview)	
multibos -Xac -l /software/AIX_61_TL8_SP01   install ML  on standby.	
multibos -Xacp -l /softwate/X11.fnt.ucs.ttf_extb.6.1.8.0.U  installed open ssl patch	
	
oslevel -rq   check all oslevel version	
oslevel -rl 61006611  check if any issue is or not	
instfix -i |grep AIX	
	
getlvcb -At bos_hd5 it will show the when multibos was created	
	
	
Note: A log store in /etc/multibos/logs/op.alog. after

To check logs of multibos:

alog -f /etc/multibos/logs/op.alog -o
	
multibos issue	
	
Problem 	
Err:510	
	
During Patch implementation from multibos sometime we are getting below error during bosboot operation 	
	
Active boot logical volume is hd5.	
	
Standby boot logical volume is bos_hd5.	
	
Creating standby BOS boot image on boot logical volume bos_hd5	
	
Could not load program ls:	
	
Symbol resolution failed for ls because:	
	
        Symbol time64 (number 39) is not exported from dependent	
	
module /usr/lib/multibos_chroot/usr/ccs/lib/libc.a(shr.o).	
	
Examine .loader section symbols with the 'dump -Tv' command.	
	
/usr/sbin/bosboot[16]: kernsize /= 1024: 0403-009 The specified number is not valid for this command.	
	
multibos: 0565-039 Error processing standby BOS boot image.	
	
Resolution	
Err:510	
	
1) Login in multibos shell using "multibos -S" command.	
2) Set the value of LIBPATH variable using "LIBPATH=/usr/lib"	
3) Run the bosboot command on bos image using "bosboot -ad /dev/hdisk1 -l bos_hd5/hd5" command	
4) Exit from the Multibos Shell.	
5) Set the bootlist & reboot the server at the time of downtime.	
 	
	
bosboot -ad /dev/hdisk1 -l bos_hd5/hd5


bosboot -ad /dev/hdisk1 -l bos_hd5

=============================================

How to check lib path

stlwolunx12:ecdadm> echo $LIBPATH
/usr/lib:/lib:/usr/sap/ECD/SYS/exe/run:/usr/sap/ECD/SYS/exe/run/nwrfcsdk/lib
stlwolunx12:ecdadm> export LIBPATH=/opt/freeware/lib:$LIBPATH
stlwolunx12:ecdadm> echo $LIBPATH
/opt/freeware/lib:/usr/lib:/lib:/usr/sap/ECD/SYS/exe/run:/usr/sap/ECD/SYS/exe/run/nwrfcsdk/lib
stlwolunx12:ecdadm> cd /usr/bin
stlwolunx12:ecdadm> gs
GPL Ghostscript 9.06 (2012-08-08)
Copyright (C) 2012 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
GPL Ghostscript 9.06: Cannot open X display `(null)'.
**** Unable to open the initial device, quitting.
stlwolunx12:ecdadm>


------------------------------------------------------------------
Multitbos file system umount issue


ps -ef | grep -i /opt/freeware/cimom/pegasus/bin/cimssys cimsys
kill -9 process

umount -f /bos_inst/tmp


----------------------------------------------------------------

find hacmp & gpfs server 
/nmon/menu_output/bri/copyprenew.sh       Please run this script 

----------------------------------------------------------------

TL Upgradation issue on AIX6.1 TL9 SP 2

Please find the steps for TL Upgradation.


1. Create Multibos

2. Switch to multibos 
     multibos -S

3. Inside multibos Take backup of /etc/ssh directory  
    cp -rp /etc/ssh /etc/ssh_old 

4. Inside multibos remove openssl and openssh patch from multibos and reinstall the below patch
   for openssh patch version is OpenSSH_6.0.0.6106
   for openssl patch version is openssl-1.0.1.503
   
5. Revert the /etc/ssh directory
    cp -rp /etc/ssh_old /etc/ssh

6. Upgrade TL on multibos

7. Set the bootlist on multbos and reboot the server from multibos


Path for openssh and openssl at montool
/software/PATCH/Aix_Aug_Patch_2014/

Path for TL 
/ACTIVITY/SAND/SAND/AIX61_TL09_SP02
 ***************************************************************************************	
	
#entstat -d ent0	
#entstat -d ent0 | grep -i mtu	
#hostent -S       show /etc/hosts file database	
#lsdev -l fcs0 -F parent	
#lsdev -p pc127	
#lsslot -c slot	
	
lsdev command to display information about devices in the device configuration database.	
#lsdev-C (To list the Customized device configuration information from ODM)	
#lsdev- P (To list the Predefined device configuration information from ODM)	
	
How to listing all devices in the predefined ODM database	
#lsdev -P-H  (-P= predefine ODM and-H =Displays headers above the column output.)	
	
Listing all devices in customized ODM database?	
#lsdev -C-H	
	
How to listing available devices?	
To list the device in the Available state in the Customized Devices	
Object class, enter:	
#lsdev -Cc adapter -S a	
#lsdev-Cc disk-S a	
	
 How to check the device in Customize device.	
Suppose we want to see particular device (object) information,	
#lsdev-Cc disk     List all disk of the system	
#lsdev-Cc processorList all processor	
#lsdev-Cc adapter  List all adapter	
#lsdev-Cc memory   List all memory	
#bootinfo-r        List memory	
#lsattr-El sys0-a realmem   List memory	
#lsdev-Cs scsi     List all scsi device	
#lsdev -Cs pci      List all Pci slot	
#lsdev-Cc if       List all LAN card of the system	
# lsdev -Cl ent0 -F parent    find out the parent of ent0	
#lsdev -Cl fcs0 -F parent	
# lsdev -p pci11    show how many devices in this slot	
fcs0 Available 0B-08 FC Adapter	
#lsslot-c slot   it show al slot and its children.	
#odmget CuDv | grep hdisk5   List the hdisk5 information in customize object	
#lsparent-Ck scsi list all scsi adapters	
#lsdisp  To check which graphic adapter is installed.	
To find out the parent of ent0 device	
# lsdev -Cl ent0 -F parent	
	
How to list possible parent devices in the Customized Devices object class that accept the rmt0 tape device as a child device 	
#lsparent -C -l rmt0	
	
How to list the current attribute values for the tape device rmt0	
# lsattr-El  rmt0	
How to list the default attribute values for the tape device rmt0?	
# lsattr -Dl rmt0 	
How to list the current value of the bus_intr_lvl attribute for the SCSI adapter scsi0,	
# lsattr -El scsi0 -a bus_intr_lvl 	
How to list the possible values of the login attribute for the TTY device tty0, 	
# lsattr -Rl tty0 -a login 	
Enable, disable, share, delay, hold	
How-to list the current value of the speed attribute for the serial port that tty0 	
# lsattr -El tty0 -a speed	
speed 9600 BAUD rate True	
What are the values of attributes for devices in my system?	
To list the current values of the attributes for the tape device, rmt0, type:	
lsattr -El rmt0 	
how-to list the default values of the attributes for the tape device, rmt0, type:	
lsattr -Dl rmt0 	
How To list the possible values of the login attribute for the TTY device, tty0, type:	
#lsattr -Rl tty0 -a login 	
How To display system level attributes, type:	
lsattr -E -l sys0	
How to display the possible value of ent0	
#lsattr -El ent0 -a media_speed -R	
10_Half_Duplex	
10_Full_Duplex	
100_Half_Duplex	
	
Suppose you want to check the device attributes details, you should use following Commands. You want to see memory details,	
#lsattr-El mem0    (display the  attribute of  memory mem0)	
#lsattr-El processor0       (For processor)	
#lsattr-El ent0       (For Ethernet card)	
#lsattr-El rmt0       (For Tape drive)	
#lsattr -D -l sys0 -a maxuproc         Displays max number of processes per user 	
	
#lscfg      (it will show full system information)	
#lscfg-vpl hdisk0    (It will show HDD configuration details FRU)	
#lscfg-vpl eth0         (It will so MAC addresses details of eth0) Like this all the devices.	
#lscfg  -vpl hdisk0	
#lscfg  | grep proc	
	
5- Change Device	
------------------	
Suppose we want to change device configuration, this case we should run following Command	
We want to change PVID (Physical volume ID) for Hdd	
#chdev-l hdisk0-a pv=clear         (To clear the PVID)	
#chdev-l hdisk0-a pv=yes (To assign the PVID)	
chdev-l inet0-a hostname=si -P     (To change the host name for inet0)	
chdev-l rmt0-a block_size=512 -P (To Change tape drive block_size is 512 blocks)	
chdev-l ent0-a media_speed=100_full_duplex -P        (To Change Ethernet card duplex speed)	
chdev -l sys0 -a maxuproc=4096 -P      (to change max process per user)osbkp.CNDACTLMAPZP10	
chdev -l aio0 -P -a minservers=80 -a maxservers=120 -a maxreqs=16384 -P    AIO server parameter change	
	
osbkp.CNDACTLMAPZP10	
__________________________________________mksysb_BACKUP_________________________________________________________________	
lsmksysb -l -f osbkp.CNDAMTALAPZP01    it show file system	

lsmksysb -L -f osbkp.CNDAMTALAPZP01    it show the lpp  	
	
mksysb -X -m -i -e /export/nim/mksysb/`hostname`-`date '+%Y%m%d-%H%M'`.mksysb 

time /usr/bin/mksysb -i -e -p /mnt/`hostname -s`               CSC mksysb  take the backup with commond_AKram

mksysb -X -m -i -e  /mksysb/stlsydunx17-20160301-0300.mksysb      csc mksysb bsl

/usr/ios/cli/ioscli/ backupios -file /mksysb/myauvun01102945-20160204-0300.mksysb -mksysb -nomedialib  csc akram

What is the command to make system backup?	
#mksysb -ivfeX /dev/rmt0      (-i means create new image.data file, -X spand the /tmp dir)	
# mksysb -e /dev/rmt0 (the -e flag to exclude the contents of the exclude.rootvg file)	
# smitty mksysb	


restore the file from backup
/osbkp/osbkp.CNDAKMBZDBDP01	

restore -xqdf /software/osbkp.CNDBCTLMDBOP33 ./image.data      create image data from mksysb

restore -xqdvf /osbkp/osbkp.CNDAMBCSDBDT04 ./etc/hosts         restore the hosts file

==================================================================================

#  cat /etc/exclude.rootvg
/.rhosts
/etc/motd
/etc/niminfo
/var/vio/VMLibrary/
/opt/IBM/ITM
^./tmp/
^./var/vio/VMLibrary/cd_image_24117442.vol1.iso
^./var/vio/VMLibrary/cd_image_24117442.vol2.iso
^./var/vio/VMLibrary/cd_image_szapdb12.vol1.iso
^./var/vio/VMLibrary/cd_image_szapdb12.vol2.iso
^./var/vio/VMLibrary/cd_image_szapdb8.vol1.iso
^./var/vio/VMLibrary/cd_image_szapdb8.vol2.iso
^./var/vio/VMLibrary/szapdb10TL12
^./var/vio/VMLibrary/szapdb10TL12v2
^./opt/IBM/ITM/logs/draxvs29_va_1454444319.log
^./opt/IBM/ITM/aix523/va/hist/KVA03NETWO
^./opt/IBM/ITM/aix523/va/hist/KVA02STORA
^./opt/IBM/ITM/aix523/va/hist/KVA41NETWO
^./opt/IBM/ITM/aix523/pk/hist/KPK03PERLP
^./opt/IBM/ITM/aix523/pk/hist/KPK05MONLP
^./var/vio/VMLibrary
^./mksysbfs/

================================================================================

How to take Datavg backup & resotre the Datavg backup on other servers


Using savevg on AIX to save time creating filesystems, LV's and volume groups 

 If you ever need to build multiple servers that will all have the same volume groups, logical volumes, and filesystems you can use "savevg" and "restvg" to save yourself a bunch of time and duplicated work. 

This also works if you are ever asked to build a new server that should be setup with the same VG/LV/FS's as an older server. 

You start by setting up one of the servers with the volume groups, logical volumes, and filesystems that you will need.  Next you can use the "savevg -r" command to backup just the volume group/LV/Filesystem structure information.  With the "-r" flag it doesn't backup any data in the filesystems, which makes it quick and the backup file very small. 

In this example we want to duplicate the "appvg" structure on to another server:

# lsvg -l appvg
appvg:
LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
loglv02             jfs2log    1       1       1    open/syncd    N/A
applv05             jfs2       52      52      4    open/syncd    /app5
fslv05              jfs2       25      50      2    open/syncd    /app2
loglv03             jfslog     1       1       1    closed/syncd  N/A
#
# savevg -r -f /appvg.savevg appvg

Creating information file for volume group appvg.................................................................

Backing up user Volume Group information files only.
Creating list of files to back up.
Backing up 6 files

6 of 6 files (100%)
0512-038 savevg: Backup Completed Successfully.
 

 

Next you copy the "/appvg.savevg" file on to all the servers that you want to setup the VG/LV/FS's on.  You can use something like "scp" or "sftp" or another protocol to transfer the file. 

On the other servers, you run "restvg" to restore the VG/LV/FS structures from the file:

 

# restvg -r -f /appvg.savevg hdisk1 hdisk2

Will create the Volume Group:   appvg
Target Disks:   hdisk1 hdisk2
Allocation Policy:
        Shrink Filesystems:     no
        Preserve Physical Partitions for each Logical Volume:   no

Enter y to continue: y
0516-1254 /usr/sbin/mkvg: Changing the PVID in the ODM.
appvg
loglv02
applv05
fslv05
loglv03
#
# lsvg -l appvg
appvg:
LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
loglv02             jfs2log    1       1       1    open/syncd    N/A
applv05             jfs2       52      52      2    open/syncd    /app5
fslv05              jfs2       25      50      2    open/syncd    /app2
loglv03             jfslog     1       1       1    closed/syncd  N/A

 

As you can see the "restvg -r" command restored the volume group, logical volumes, and filesystems, and even mounts the filesystems for you!  Note that the fslv05 LV was mirrored before on the original server and when restored it is still mirrored.   The original volume group on the source server was on 4 hdisks, but on the destination server only had 2 hdisks.   But this isn't a problem, restvg is able to take care of it as long as you have enough disks to accommodate the mirroring and enough total space for all the logical volumes.  You can even use the "-s" flag on restvg to attempt to shrink the filesystems if the destination hdisks aren't large enough to hold all the original LV's. 


	

--------
 ********************************VIO COMMAND*******************************************************	

printf "%x\n" 38      convert decimal to hexadecimal


FOR VETUAL SCSI SETTING
	
ON VIO Clinet: 

on Hdisk1: 
chdev -l hdisk1 -a reserve_policy=no_reserve  -P
chdev -l hdisk1 -a algorithm=failover -P
chdev -l hdisk1 -a hcheck_mode=nonactive -P
chdev -l hdisk1 -a hcheck_interval=60 -P
chdev -l hdisk1 -a queue_depth=xxx -P        not required 


on Adapter:
chdev -l vscsi0 -a vsci_path_to=30 -P
chdev -l vscsi0 -a vscsi_err_recove=fast_fail


ON VIO Server:

on hdisk1
chdev -l hdisk1 -a algorithm=load_balance -P
chdev -l hdisk1 -a reserve_policy=no_reserve  -P
chdev -l hdisk1 -a hcheck_mode=nonactive -P
chdev -l hdisk1 -a hcheck_interval=60 -P

mkvdev -vdev hdisk3 -vadapter vhost0 -dev rootvg_10.14.41.104         assign the disk to vhost0
mkvdev -vdev lpar21_lv03 -vadapter vhost1         assign the lv to vhost1
lparstat -i         run on clinet and find partion id of client
/usr/ios/cli/ioscli lsmap -all | grep -i vhost | grep -i 30 find the vhost id from server
rmdev -dev vhostX [ -recursive ] Remove a Virtual SCSI Host Adapter
/usr/ios/cli/ioscli mkvdev -vdev cd0 -vadapter vhost0 -dev cd0_Virt       how assign cd rom to the clinet
/usr/ios/cli/ioscli rmdev -dev hdisk8_OS    unassign the lun from client
mkvdev -fbo -vadapter vhost13 -dev ATESTAX0T03_CD     map the virtual cd-rom device to your LPARs vhost
loadopt -disk   CNDATESTAX0T03_CD1 -vtd ATESTAX0T03_CDload the virtual optical disk into your virtual cd-drive
lsdev -virtual         (list all virtual devices on VIO server partitions)
lsmap -all    (lists mapping between physical and logical devices)
oem_setup_env (change to OEM [AIX] environment on VIO server)
echo cvai|kdb it will show the vhost id
echo fcdb|kdb it will show the vfcs hostid
echo vfcs | kdb
/usr/ios/cli/ioscli ioslevel      it give ios level
/usr/ios/cli/ioscli lsmap -all | grep -i vhost | grep -i 30     find the vhost id
alias i=/usr/ios/cli/ioscli       set the alieas
lspv -free    check the free disk

vfcmap -vadapter vfchost0 -fcp fcs1         map physical fcs card to vertual fcs card



/usr/ios/cli/ioscli mkvdev -vdev hdisk149 -vadapter vhost33 -dev 40_DAT_hdisk149	
/usr/ios/cli/ioscli mkvdev -vdev cd0 -vadapter vhost0 -dev cd0_Virt	
/usr/ios/cli/ioscli mkvdev -vdev hdisk2 -vadapter vhost0 -dev hdisk2_OS1	
/usr/ios/cli/ioscli vfcmap -vadapter vfchost0 -fcp fcs0  ==================Virtual fcs mapping	
/usr/ios/cli/ioscli lsmap -all -npiv  ======================Check virtual fcs mapping with vhost	
/usr/ios/cli/ioscli mkvdev -vdev hdisk6 -vadapter vhost0 -dev hdisk6DB_OS1	
/usr/ios/cli/ioscli mkvdev -vdev hdisk8 -vadapter vhost10 -dev hdisk8_OS	
	
hdisk8_OL Available ===for Lpar4 ==67 server	
mkvdev -sea ent8 -vadapter ent7 -default ent7 -defaultid 302  	
/usr/ios/cli/ioscli mkvdev -sea ent8 -vadapter ent9 -default ent9 -defaultid 1 -attr ctl_chan=ent10 ha_mode=auto	
/usr/ios/cli/ioscli lsmap -all -npiv >>>>>>>>>>check vfchost lsmap




-----------------------------------------------------
To check which vlans are shared through VIO

 entstat -d sea||egrep -i "vlan|virtual adapter|Priority"

 Virtual Adapter: ent18
 Priority: 1  Active: False
 Invalid VLAN ID Packets: 0
 Port VLAN ID:     3
 VLAN Tag IDs:   161   165
 Management VLAN: Disabled
 Virtual Adapter: ent16
 Priority: 1  Active: True
 Invalid VLAN ID Packets: 0
 Port VLAN ID:     2
 VLAN Tag IDs:    50   160  -> Shared Lun IDs, attached with active adapter
 Management VLAN: Disabled

 entstat -d sea|grep -i shared

It will show the shared vlan id details


==========================================================
how to fix old wwn number in 
How to fix old WWPNs to the LPAR profile.
Important : take profile backup before doing any changes.
To change the WWPNs of the virtual adpater to match the original WWPNs by using the HMC command line(be careful with HMC CLI syntax, backslash, and double quotes).

From HMC command line:
Before make any changes, take the output using the below command,
#lssyscfg -r prof -m <frame_name> -F virtual_fc_adapters --filter lpar_names=<lpar_name>

Command to change the the wwpns
#chsyscfg -m <frame> -r prof -i "name=normal,lpar_name=<lpar>,\"virtual_fc_adapters=\"\"<lpar slot number>/client/<violparID>/<vioname>/<vioaslotnumber>/activewwpn,inactivewwpn/0\"\"\""
Example:
chsyscfg -m 9117-MMC-06164D7 -r prof -i "name=Normal,lpar_name=tsm03,\"virtual_fc_adapters=\"\"318/client/1/vios021/625/C050760562500074,C050760562500075/0\"\",\"\"319/client/1/vios021/626/C050760562500076,C050760562500077/0\"\",\"\"418/client/2/vios022/1625/C050760562500078,C050760562500079/0\"\",\"\"419/client/2/vios022/1626/C05076056250007A,C05076056250007B/0\"\"\""
Once it completed, again use the below command and verify the status,
hscroot@hmc02:~> lssyscfg -r prof -m 9117-MMC-06164D7 -F virtual_fc_adapters --filter lpar_names=tsm03
"""418/client/2/seskvios022/1625/c050760562500078,c050760562500079/0"",""419/client/2/vios022/1626/c05076056250007a,c05076056250007b/0"",""318/client/1/vios021/625/c050760562500074,c050760562500075/0"",""319/client/1/vios021/626/c050760562500076,c050760562500077/0"""
hscroot@hmc02:~>
#shutdown and activate client server
==================================================

ACCESS KEYS

HOW TO CHECK EXPIRE DATE

lscfg -vpl sysplanner0

----------------------------------------------------------
***************network command**********************************************************************************	
network setting
	netwrok administrator
Network	
	
TCP is set of rule used with Ineternet Protocall to send the data in form of packet witween computer over the network. TCP is connection oriented protocall. it insure reliable delivery. it send data in sequence. reransmission of lost patcket is posssible. it provide error checking mechanism such as flow control & acknowledgement	
	
UDP: UDP stand user datagrame protocal. is oprates in datagrame mode.it connection less protcall. it has besic error check using checksum. delivery of data can not be garanteed in udp. acknowledgement fearute is not available. retransmission is not possible UDP.	


ifconfig lo0 inet6 ::1/0 delete        remove the IP6 	  loopback
	
ifconfig en0To show the status of en0	
ifconfig en0 up                      Turns on network card en0	
ifconfig en0 down                    Turns off network card en0
ifconfig en0 down detach             Removes en0 card from the network interface list
ifconfig en0 alias 10.5.129.63 10.5.129.255   Create alias ip address for en0 
ifconfig en0 alias 10.135.0.84 netmask 255.255.255.0   Create alias ip address for en0

chdev -a netaddr=0.0.0.0 -a netmask=0.0.0.0 -l en3    remove the ip permanently 

chdev -l en9 -a alias4=10.247.188.11,255.255.255.0     working working_Chandra
chdev -l inet0 -a route=net,-hopcount,0,-netmask,255.255.255.0,,,,,10.247.146.0,10.247.144.1    permanet add the route
	
ifconfig en0 alias 10.14.7.83     create the alias	
ifconfig en0 alias delete 10.14.7.83        delete the alias	
 	
route delete 10.14.7/24 10.14.7.83 -if lo0  Delete route	
route delete 10.14.7/24 10.14.7.83	
_______________________________________________


ifconfig en1 tcp_recvspace 971875
ifconfig en1 tcp_sendspace 971875 d
_________________________________________________
Double gateway  issue
10.5.133.159
chdev -l inet0 -a delroute='net,-hopcount,0,,0,10.14.72.1' -P         gateway issue    double gateway
lsattr -El inet0
_______________________________________________________________
ping issue
ping -s 9000 10.13.31.153   check the ping status

ping -s 1500 ktazq3289.crdc.kp.org

ifconfig en0 alias delete 10.14.2.79        Remove alias in en0	
route add 0 192.100.13.7  To make 192.100.13.7 as default gateway for entire network
route delete ip getwaya Remove route.	
chdev -l en2 -a mtu=9000    -P     Change the MTU value	
rmsock f10002000394db98 tcpcb     Remove scoket	
entstat -d en0    details of status on en0	
netstat -nr   show the routing table 	
netstat -i   find the mac address of running network cards
netstat -i   find the mac address of running network cards
chdev -l ent2 -a jumbo_frames=yes Activate Jambo frames	
chdev -P -l ent0 -a media_speed=Auto_Negotiation      Activate media speed	
/usr/sbin/tcpdump -aX -s 10000 -w /tmp/MissingMsisdn.pcap host 10.49.16.12  for  TCPDUMP	

no -po ipforwarding=1        enable the ipforwding
no -po ipforwarding=0        disable the ipforwarding	
no -p -o tcp_pmtu_discover=0	
no -p -o ipsrcroutesend=0  	
no -p -o ipsrcrouteforward=0	
no -p -o ip6srcrouteforward=0	
no -p -o clean_partial_conns=1	
no -p -o tcp_icmpsecure=1	



no -p -o tcp_recvspace=262144
	

	
---------------------------------------------------------	
How to Change mtu size	
	
Check current configuration of ent status	
	
ifconfig -a	
lsdev-Cc adapter	
lsattr-El ent4 for jumbo frames	
lsattr-El en4 -mtu size	
	
1-	ifconfig en4 down detach 
2-	rmdev -Rdl en4 
3-	chdev -l ent4 -a jumbo_frames=yes 
4-	cfgmgr -v 
5-	chdev -l en4 -a mtu=9000
6-	give ip to ent  
	
Note: Please before ent down detach check ip and take current configuration on ent	
	

chdev -l ent2 -a jumbo_frames=yes
chdev -l en2 -a mtu=9000 -P 
chdev -l en2 -a tcp_recvspace=262144 -a tcp_sendspace=262144 -P 
-------------------------------------------------------------


To configure an local IP 192.168.1.2 address to en0 use	

 $ mktcpip  -hostname <HOSTNAME> -inetaddr 192.168.1.2	-interface en0 -start	-netmask 255.255.255.0	gateway <GATEWAY>	
   	
5. Remove an local IP Address	
	
If you want to remove the IP configuration from en0, type	
	
 $ rmtcpip -interface en0

-----------------------------------------------------
 how to check the port is open?
[root@g2412auplcwbe01 network-scripts]# cd
[root@g2412auplcwbe01 ~]# nc -z 192.168.183.196 13724
Connection to 192.168.183.196 13724 port [tcp/vnetd] succeeded!

[root@g2412auplcwbe01 ~]# nc -z 192.168.183.196 13782
Connection to 192.168.183.196 13782 port [tcp/bpcd] succeeded!
-----------------------------------------------------
###############################################################

   For error 0509-033 Cannot run a 64-bit program until the 64-bit
environment has been configured. See the system administrator.

Do the following:

1. Log in as the root user.
2. Run smitty.
3. Go to System Environments.
4. Go to Enable 64-bit Application Environment.
5. Select Enable Now.

###################  nmon    ##################################

To configure NMON

Copy the follwoing from montool to the /osbkp in the server:

- /osbkp/nmon.sh
- /osbkp/nmon.tar

Now untar the tar file and make the following entry in the cron file:

1 00,04,08,12,16,20 * * * /usr/bin/sh /osbkp/nmon/nmon.sh



##############################################################################################
bosboot issue
OSLEVEL upgrade:

An error occurred during bosboot verification processing.

Resolving the problem
1)
/dev/ipldevice is critical to the operation of installing certain products. It should be a hardlink of your boot device. The bootlist command may be used to list the boot device. For example :


[mysystem:root: /dev ] bootlist -om normal
hdisk0

In above command, hdisk0 is the boot device. In this case, the special files should be identical :

[mysystem:root: /dev ] ls -l /dev/rhdisk1 /dev/ipldevice
crw------- 2 root system 20, 0 Apr 07 2004 /dev/ipldevice
crw------- 2 root system 20, 0 Apr 07 2004 /dev/rhdisk1

If /dev/ipdevice is missing or incorrect, recreate the hard link using the command below :

#ln -f /dev/rhdisk1 /dev/ipldevice

2)
# I disabled the bosboot by inserting the "exit 0" as line two, as described in this thread.
# the installp -C cleanup succeeded -- it took several minutes to complete.
# I also had to stopsrc -s the cimsys subsystem and that took several minutes.
# After the cleanup I re-enabled the bosboot script by removing the "exit 0" line.
# I re-downloaded the SP03 service pack -- let it run overnight. It completed successfully this time.
# The update failed on the same bosboot error, so I had to disable the bosboot script once again, and this time the o/s update ran successfully.
# one of the files updated was the bosboot script itself, so at the end of the o/s update the bosboot checking succeeded.
# I double-checked the bosboot script to verify that it was not disabled.
# Just to be certain, I ran " bosboot -a -d /dev/hdisk0" manually, and it succeeded.
====================================================================


 install -C installp: An error occurred during bosboot verification processing.
KairoAraujo | Jan 8 2015 | Tags:  installp bosboot processing commiting applying verification -c during error /usr/sbin/bosboot occurred aix ‎ | 5,863 Views
0 people like this
 

This can occur when installing a fileset is interrupted.
The package stay in APPLYING or COMMITING state.

 

        sysmgtlib.libraries.apps       7.1.3.0
        wio.fcp                        7.1.3.0
        wio.fcp                        7.1.3.15
        xlC.rte                        12.1.0.1


    installp: There are incomplete installation operations
            on the following filesets.  Run installp -C to clean up
            the previously failed installations before continuing.

            devices.common.IBM.ib.rte

Problem in cleaning up a failed installation fileset.

myserver:[root]/MIDIAS/7100-03-04/TL03SP04> installp -C
installp:  bosboot verification starting...
installp:  An error occurred during bosboot verification processing.

Workaroung:

Edit the /usr/sbin/bosboot and put after #!/usr/bin/ksh

#!/usr/bin/ksh

exit 0

Run installp -C again

myserver:[root]/MIDIAS/7100-03-04/TL03SP04> installp -C
installp:  bosboot verification starting...
installp:  bosboot verification completed.
installp:  bosboot process starting...
0503-292 This update will not fully take effect until after a
        system reboot.

    * * *  A T T E N T I O N  * * *
    System boot image has been updated. You should reboot the
    system as soon as possible to properly integrate the changes
    and to avoid disruption of current functionality.

installp:  bosboot process completed.

installp: Cleaning up software for:
        devices.common.IBM.ib.rte 7.1.3.30


Installation Summary
--------------------
Name                        Level           Part        Event       Result
-------------------------------------------------------------------------------
devices.common.IBM.ib.rte   7.1.3.30        USR         CLEANUP     SUCCESS

 

After run, change back the /usr/sbin/bosboot removing exit 0 after #!/usr/bin/ksh
	
========================================================

[CAPJAUPVAPLDP1:/dev]# bosboot -ad /dev/hdiskpower0

0301-154 bosboot: missing proto file: /usr/lib/boot/network/chrp.hdiskpower.proto


[CAPJAUPVAPLDP1:/dev]# pprootdev off

bosboot: Boot image is 51228 512 byte blocks.
PowerPath boot is disabled for the next system boot.
[CAPJAUPVAPLDP1:/dev]# pprootdev fix
pprootdev: PowerPath boot is not currently enabled.
[CAPJAUPVAPLDP1:/dev]# pprootdev on

bosboot: Boot image is 55324 512 byte blocks.
PowerPath boot is enabled for the next system boot.
[CAPJAUPVAPLDP1:/dev]# pprootdev fix
you have mail in /usr/spool/mail/root
[CAPJAUPVAPLDP1:/dev]# mkszfile
[CAPJAUPVAPLDP1:/dev]#
=====================================================================================================

bosboot issues

Recently we have seen many bosboot and other issues on servers when the server is booting from SAN.

Here are some known issues which I came across and steps to fix those issues.

 

1. Issue

 

bosboot fails after running " pprootdev on " because /dev/ipldevice entry is missing.

The pprootdev on command fails.

AIX reverts back to an old device configuration after boot.

 

 

Cause

The PowerPath script  "pprootdev" has a bug where, if run, it deletes the /dev/ipldevice, but fails to recreate a new one ONLY if rootvg is an external EMC device AND mirrored using AIX LVM mirroring.

Without the /dev/ipldevice entry the bosboot command, run automatically as part of the "pprootdev on" command, fails.

 

 

Resolution

 

Note:  The commands and changes below can be done online and no reboot is required. 

 

Step 1:  Confirm you need to perform this change. However, if rootvg is not an external EMC device which is also mirrored using AIX LVM Mirroring, then you will not be affected by this problem.

If the AIX server is booting of an external EMC device, the command "lsvg -p rootvg" will list hdisks configured to EMC devices.  To check if rootvg is mirrored, run "lslv hd5" and look at the number next to the word COPIES:.  If it is a number greater then 1, rootvg is mirrored.

 

Step 2:  Recreate a new /dev/ipldevice link: Assuming you have run " pprootdev on " and are now missing the /dev/ipldevice link, you will need to recreate a new one. To do this:

a.  Get the hdisk# of current boot devices with lslv -m hd5 | fgrep hdisk | awk '{ print $3 }

b.  Create a new /dev/ipldevice entry with ln  /dev/r<hdisk#>  /dev/ipldevice

 

Optional:

Step 3:  Correct the pprootdev script /usr/sbin/pprootdev . If the script is already correct, No need to change anything and proceed with next step.

Manually edit the file by locating the line and make the two changes as shown below. 

before:    BOOT_DISK=`lslv -l hd5 | fgrep hdisk | awk '{ print $1 }' | \

after:       BOOT_DISK=`lslv -m $BLV | fgrep hdisk | awk '{ print $3 }' | \

 

Step 4:  Run the pprootdev command: Now that you have recreated the /dev/ipldevice link and fixed the 'pprootdev' script, run the command "pprootdev on" as usual and reboot to have it take effect.

 

 

2. Issue

 

Error opening disk: Permission denied when run bosboot command.

root@nzapwa*** / >

#bosboot -a

Error opening disk: Permission denied

0516-602 lslv: Logical volume name not entered.

Usage: lslv [-L] [-l | -m] [-n DescriptorPV] LVname

       lslv: [-L] [-n DescriptorPV] -p PVname [LVname]

Lists the characteristics of a logical volume.

 

0301-168 bosboot: The current boot logical volume, /dev/,

        does not exist on /dev/hdisk43.

root@nzapwa*** / >

 

Cause

Link between files /dev/rhd5 and /dev/ipl_blv is missing and Powerpath is unable to read the rootvg disk.

 

 

root@nzapwa*** /dev >

# ls -li|grep -i hd5

  102 brw-rw----    1 root     system       10,  1 Dec  4 07:36 hd5

  157 crw-rw----    1 root     system       10,  1 Nov 30 19:17 rhd5

root@nzapwa*** /dev >

# ls -li |grep -i 157

  157 crw-rw----    1 root     system       10,  1 Nov 30 19:17 rhd5   >>> Link to ipl_blv is missing.

 

 

# ./inq.aix64 _51

Inquiry utility, Version V7.3-1214 (Rev 0.1)      (SIL Version V7.3.0.1 (Edit Level 1214)

Copyright (C) by EMC Corporation, all rights reserved.

For help type inq -h.

 

...................................................................

 

----------------------------------------------------------------------------

DEVICE            :VEND    :PROD            :REV   :SER NUM    :CAP(kb)    

----------------------------------------------------------------------------

/dev/rhdiskpower0 :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdiskpower1 :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdiskpower2 :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdiskpower3 :EMC     :SYMMETRIX       :5876  :6601ccb008 :    57672000

/dev/rhdiskpower4 :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdiskpower5 :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdiskpower6 :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk0      :EMC     :SYMMETRIX       :5876  :660028c000 :        2880

/dev/rhdisk1      :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk2      :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk3      :EMC     :SYMMETRIX       :5876  :660028c000 :        2880

/dev/rhdisk4      :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk5      :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk6      :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk7      :EMC     :SYMMETRIX       :5876  :660028c000 :        2880

/dev/rhdisk8      :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk9      :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk10     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk11     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk12     :EMC     :SYMMETRIX       :5876  :660028c000 :        2880

/dev/rhdisk13     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk14     :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk15     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk16     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk17     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----     >>>>>>>. Disks are not accessible to powerpath. These are the child disks of cureent rootvg EMC disk.

/dev/rhdisk18     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk19     :EMC     :SYMMETRIX       :5876  :6601ccb008 :    57672000

/dev/rhdisk20     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk21     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk22     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk23     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk24     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk25     :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk26     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk27     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk28     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk29     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk30     :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk31     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk32     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk33     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk34     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk35     :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk36     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk37     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk38     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk39     :EMC     :SYMMETRIX       :5876  :6600c97000 :    67109760

/dev/rhdisk40     :EMC     :SYMMETRIX       :5876  :6600c98000 :    67109760

/dev/rhdisk41     :EMC     :SYMMETRIX       :5876  :6600cad000 :   134219520

/dev/rhdisk42     :EMC     :SYMMETRIX       :5876  :6601cca008 :    57672000

/dev/rhdisk43     :EMC     :SYMMETRIX       :5876  :6601ccb008 :      -----

/dev/rhdisk44     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk45     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk46     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk47     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk48     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk49     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk50     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk51     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk52     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk53     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk54     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk55     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk56     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk57     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

/dev/rhdisk58     :EMC     :SYMMETRIX       :5876  :66018cf008 :    11640000

/dev/rhdisk59     :EMC     :SYMMETRIX       :5876  :66018d0008 :    11640000

 

 

Resolution

 

Step 1. Take the current output of the /dev directory of the server.

#ls -l /dev

 

Step 2. The link of rhd5 and ipl_blv is missing on the server. Create the link.

# ln /dev/ipl_blv /dev/rhd5

Also make sure the link between /dev/rhdisk# and /dev/ipldevice is present.

 

Step 3. Run the backupos script on the server. It should not give any issues now.

#/usr/local/scripts/backupos.ksh -a

 

Step 4. Run powermt display dev=<alt_disk> and collect the child disks information.

 

Step 5. Set the correct bootlist with image_1 disk on first.

#bootlist -m normal <disk names>

 

Check the booltlist and check the image_1 disk is showing the BLV on it. If not don't proceed further.

#bootlist -om normal

#ipl_varyon -I

 

Reboot the server.

 
Note - Some of the issues are caused by improper use of pprootdev commands.

Remember the following and use these commands as required only.

 
pprootdev on : To bring the rootvg devices under powerpath control. a reboot is necessary for command to take effect.

pprootdev off : To bring back the rootvg disks back to hdisk control. a reboot is necessary for command to take effect.

pproodev fix : To temporarily bring the rootvg disks to hdisk control for running "bosboot". no reboot since the command is only valid as long as you do not reboot.

pprootdev fixback : To bring back again the rootvg disks to hdiskpower control. takes effect immediately, no reboot required.

 

Reach out to Shahbaz or me if you have any questions on this.
-----------------------------------Replication IP------------------------------------------------
Replication IP:

Data is very important and loose of which means an unrecoverable loss to business.
To keep the business running in such cases where any disaster happens on running business site
another site is created the data of critical server will be copying to this called DR(Disaster
Recovery) site in parallel
Why:
Since there is always limitation on the data transfer speed for a hardware (Network interface) if
we do assign replication ip on the same interface as public then response will be slow since
public will access server by same interface.
    
Prerequisite:-
1. Free interface with cable connection
2. Replication IP detail
3. Parameter detail.

Steps:-
1. Get the free interface detail of the servers.
lsdev –Cc adapter | grep –i ent
lsslot –c slot | grep –I ent

2.Assign the replication ip on the free available interface with smitty chinet in this case it is
en4.

3. Change the parameter as per the attached using chdev for the particular interface
chdev –l en4 –a rfc1323=1
chdev –l en4 tcp_nodelay=1
chdev –l en4 tcp_recvspace=971875
chdev –l en4 tcp_sendspace=971875
Note:-
The above parameter are changed to transfer the data at quicker rate
Below are the details of the explanation of the parameter.
tcp_recvspace, tcp_sendspace
Controls the default size for receive and send buffers for TCP/IP sockets. Internally, HPSS
servers and clients attempt to set these buffers sizes explicitly, but other utilities may not.
rfc1323
Controls whether large TCP window sizes are used. Usually set to ON for higher throughput
networks (e.g., HiPPI, SP switch) and set to OFF for lower throughput networks (e.g., ethernet,	

tcp_nodelay
The TCP Nodelay option determines whether HPSS will enable or disable the algorithm that tries
to improve performance from small network writes. This algorithm attempts to coalesce small
writes to a TCP/IP connection so they can be sent in a single packet by delaying physical writes
to the network. HPSS typically disables this algorithm so that delays are not experienced while
sending Mover Protocol and parallel data transfer headers. However, if this causes a performance
degradation on a specific network (e.g., causes smaller than optimal packet sizes for large
transfers), this can be disabled for data transfer connections.
5. Manually add the route entry also add the same in /etc/rc.local file so that if system goes for
restart it will again pick the original entry and no need to manually add.
Format
In production server
Route add “replication ip of DR” “gateway of the replication ip of the production server”
cat /etc/rc.local
route add 10.116.6.133 10.96.5.1 -if en1

In DR server
Route add “replication ip of Production” “gateway of the replication ip of DR server.”
cat /etc/rc.local
route add 10.96.5.110 10.116.6.1

6. Check the connectivity.
Ping from production system via replication ip to DR via replication ip it will work if not
working any of the above step has not correct output. Fix it and do the checks
	
******************************RESET THE ROOT PASSWORD**************************************************	
How will you log in or start the system in what mode if you don-t know the root password?	
    Resetting an unknown root password	
1	Insert the product media for the same version and level as the current installation into the appropriate drive.
2	Power on the machine.
3	When the screen of icons appears, or when you hear a double beep, press the F1 key repeatedly until the System Management Services menu appears.
4	Select Multiboot.
5	Select Install From.
6	Select the device that holds the product media and then select Install.
7	Select the AIX version icon.
8	Define your current system as the system console by pressing the F1 key and then press Enter.
9	Select the number of your preferred language and press Enter.
10	Choose Start Maintenance Mode for System Recovery by typing 3 and press Enter.
11	Select Access a Root Volume Group. A message displays explaining that you will not be able to return to the Installation menus without rebooting if you change the root volume group at this point.
12	Type 0 and press Enter.
13	Type the number of the appropriate volume group from the list and press Enter.
14	Select Access this Volume Group and start a shell by typing 1 and press Enter.
15	At the # (number sign) prompt, type the passwd command at the command line prompt to reset the root password. For example: 
16	# passwd
17	Changing password for "root"
18	root's New password: 
Enter the new password again:	
19	To write everything from the buffer to the hard disk and reboot the system, we have use the command 
sync;sync;sync;reboot
----------------------------------------------------------------------------

root password recovery if / and usr not mounted

/ , /usr mount point
1. mount /dev/hd2  /usr
2- mount /dev/hd4 /mnt or mount / /mnt
3- cp -pr /mnt/etc/passwd /etc/passwd
4- cp -pr /mnt/etc/security/passwd /etc/security/passwd
5. passwd ( reset the root password)
6. cp -pr /etc/passwd /mnt/etc/passwd
7- cp -pr /etc/security/passwd /mnt/etc/security/passwd
8.sync;sync;sync;reboot

--------------------------------------------------------------------
517 code   solution 

https://www-304.ibm.com/support/docview.wss?uid=isg3T1000131

=======================================================
if cpu utilization is high due

# powervt xcrypt -info -dev all      <–lists all hdiskpower devices, if it is encrypted or not
# /etc/rc.emcp_xcryptd stop          <–stops emc_xryptd
# rmitab rcxcrypt                    <–remove from inittab

================================================
--------------------------------------------------------------------------------
password reset by nim server


To change the password of root of the server booted through NIM mksysb: Maintenance Mode
1- define the machine

2Go to smit nim>Perform NIM Administration Tasks>Manage Machines>Perform Operations on Machines>Select Machine/maint_boot option>Provide the Spot details>Enter

Now boot the server through network and go to maintenance mode	

7	Select the AIX version icon.
8	Define your current system as the system console by pressing the F1 key and then press Enter.
9	Select the number of your preferred language and press Enter.
10	Choose Start Maintenance Mode for System Recovery by typing 3 and press Enter.
11	Select Access a Root Volume Group. A message displays explaining that you will not be able to return to the Installation menus without rebooting if you change the root volume group at this point.
12	Type 0 and press Enter.
13	Type the number of the appropriate volume group from the list and press Enter.
14	Select Access this Volume Group and start a shell by typing 1 and press Enter.
15	At the # (number sign) prompt, type the passwd command at the command line prompt to reset the root password. For example: 
16	# passwd
17	Changing password for "root"
18	root's New password: 
Enter the new password again:	
19	To write everything from the buffer to the hard disk and reboot the system, we have use the command 
sync;sync;sync;reboot

	
************************************************************************************	
	
pwdexpire	
Steps:	
1. Copy files to /tmp folder of the server -- [smon@montool:/nmon/scripts/GSD]$ scp pwexpire pwdexpire passwd_cron.sh <destination server path>/tmp	
     	
mv /tmp/passwd_cron.sh /osbkp	
mv /tmp/pwexpire /home/smon	
ln -s /home/smon/pwexpire /usr/sbin/pwexpire	
mv /tmp/pwdexpire /usr/bin	
chmod 555 /usr/bin/pwdexpire	
chown root:system /usr/bin/pwdexpire	
cp -p /var/spool/cron/crontabs/root /var/spool/cron/crontabs/root.$D	
echo "45 12 * * * sh /osbkp/passwd_cron.sh" >>/var/spool/cron/crontabs/root	
pid=`ps -eaf|grep cron|grep -v grep|awk '{print$2}'`	
kill -9 $pid	
sh /osbkp/passwd_cron.sh	
	
	
how to check the password expire date	
grep -p root /etc/security/passwd	
[root@CNDALOTSDBDP01:/tmp]$ pwdadm -q db2admin	
db2admin:	
        lastupdate = 1360852600	
[root@CNDALOTSDBDP01:/tmp]$ perl -e 'print scalar(localtime( 1407095948)), "\n"'	
Thu Feb 14 20:06:40 2013	
[root@CNDALOTSDBDP01:/tmp]$	
	
*********************************kernal*****************************************************************	
How to convert kernel

1. Convert 32 bit kernel to 64 bit kernel with JFS as default fils system
Steps: -
Creating link in root
#ln –fs /usr/lib/boot/unix_64 /unix
Creating link at unix kernel location
#ln –fs /usr/lib/boot/unix_64 /usr/lib/boot/unix
Putting image on the device from which system boots i.e at cris its hdsik3.
#bosboot –ad /dev/ipldevice
bosboot creates boot image
-d device Specifies the boot device.
-a Creates complete boot image and device.
#shutdown –Fr or reboot
**************************************************************************************************
                                         SAMBA sERVER                

Amit Bist  (18/04/2008)
SAMBA mount command
From servers, check port 445 in 10.13.20.107
#telnet 10.13.20.107 445
cifs
In client machine 10.13.20.99/100

mount -v cifs -n 10.13.20.106/appsteam/airtel@2006 -o uid:0pankaj,gid:0staff,fmode:0755 en_US /en_US
mount -v cifs -n 10.13.20.107/appsteam/airtel@2006 -o uid:0root,gid:0staff,fmode:0755 en_US /en_US1
mount -v cifs -n 10.13.20.225/intranetadmin/airtel@2007 -o uid:0wasuser,gid:0wasgroup,fmode:0755 en_US /en_US2

wasuser is effective uid (UID which is in client)
wasgroup is effective GID of client user

intranetadmin is uid in windows server 
airtel@2007 is his password


if you unmount the directory /en_US
There was an error with the unmount. if any user is logged into the server in that directory

Also check nsmb0 device is in Available state
bash-2.04# lsdev|grep nsmb0
nsmb0      Available               N/A

mount -v cifs -n 10.54.1.105/SAPServicePID/tr5ThEhe -o wrkgrp=corp,fmode=775 /sapdev /sapinterfaces_test   I mounted in csc

mount -v cifs -n 10.54.1.105/SAPServicePID/tr5ThEhe -o wrkgrp=corp,uid:3000,gid:8800,fmode=775 /sapdev /sapinterfaces_test

Mount CIFS in Linux
mount -t cifs //G2412AUPCCNAS01/bj01 -o _netdev,sec=ntlmssp,credentials=/root/cifs-jp-svc-bjp01,setuids,uid=weblogic,gid=bj01,file_mode=0775,dir_mode=0775  /bj012 



for REHL 6 servers 


1) mount -t cifs //G2412AUPCCNAS01/bj01 -o _netdev,sec=ntlmssp,credentials=/root/cifs-jp-svc-bjp01,setuids,uid=weblogic,gid=bj01,file_mode=0775,dir_mode=0775  /bj012

Mount -a
  
****************************************************************************

=======================================================
du -sm * | sort -nr

du -xam /var |sort -rn |head -n 30 
================csc========================================
========================================================
Question	
	
id:  cons "/usr/sbin/getty /dev/console"	
Console entry in /etc/inittab changes to off on reboot	
	
Cause	
	
	
	
Answer	
	
	
# cd /etc/objrepos	
	
# cp CuAt CuAt.bad	
	
# odmget -q"attribute=conslogin" CuAt > CuAtcons	
	
# vi CuAtcons	
	
Now change value = "disable" to value = "enable"	
 save file	
	
# odmdelete -o CuAt -q"attribute=conslogin"	
  Above command deletes entry from CuAt.	
	
# odmadd CuAtcons	
  Above command adds the good entry to CuAt.	
	
# odmget -q"attribute=conslogin" CuAt	
   Verify that value is set to enable.	
CuAt:	
name = "sys0"	
attribute = "conslogin"	
value = "enable"	
type = "R"	
generic = "D"	
rep = "sl"	
nls_index = 26	
	
# grep cons: /etc/inittab	
cons:0123456789:respawn:/usr/sbin/getty /dev/console	
	
If cons line is set to off then run the chitab command below	
	
# chitab "cons:0123456789:respawn:/usr/sbin/getty /dev/console"	
	
Now if you reboot the console should be set to respawn in /etc/inittab 	
**********************************************************************
odm delete
disk odm deltetion
How to delete the disk form the odm

odmdelete -q name=hdisk# -o CuAt
odmdelete -q value=hdisk# -o CuAt
odmdelete -q name=hdisk# -o CuDv
odmdelete -q value3=hdisk# -o CuDvDr
odmdelete -q name=hdisk# -o CuDep
odmdelete -q name=hdisk# -o CuVPD 

	
############ END OF TEM SERVER CONFIGURATION ###########	
	
366382	
	
the port 52314 needs to be opened from the end point to 10.5.153.232 and 10.5.153.233  bidirectional	
	
Artifact:	
	
lslpp -l|grep -i BES	
ps -ef|grep -i bes	
ifconfig -a|grep -i mask;date	
--------------------------------------------------HOW to recover remove file----------------------------------------------------	
last file
remove file
how to recover delete file
	
How to Recover Lost File (File removed using rm command) in AIX	
Hi All	
	
Hope this will be useful for all of you at some point of time. 	
	
Pre-requisites : 	
	
1. Inode # of the lost file. Can be taken with ls -li filename. 	
ls -li free_slot1.txt	
12997 -rw-r--r--    1 unmgr007 staff 599 Jun 03 14:40 free_slot1.txt	
12997 is the inode#. 	
2. File system on which this exists can be un mounted. 	
	
	
Steps : 	
	
1. Get the inode # of the file. 	
 [unmgr007@montool:/IHS]$ ls -li /IHS/amit	
  138 -rw-r--r--    1 root     system 20 Jun 04 18:15 /IHS/amit	
[unmgr007@montool:/IHS]$ cat amit	
this is a test file	
	
2. Just for testing removed the file	
[unmgr007@montool:/IHS]$ sudo rm amit	
You have mail in /usr/spool/mail/unmgr007	
[unmgr007@montool:/IHS]$ ls -lrt	
total 8	
drwxr-xr-x    2 root     system256 Feb 26 2008  lost+found	
drwx------    2 root     system256 Jan 15 2009  test	
drwx------   21 root     system         4096 May 17 12:54 HTTPServer	
[unmgr007@montool:/IHS]$ cat amit	
cat: 0652-050 Cannot open amit.	
	
	
3. Unmount the filesystem	
	
[root@montool:/tmp]$ umount /IHS	
	
4. Run fsdb command on lv 	
[root@montool:/tmp]$ fsdb /dev/IHS	
	
File System:/dev/IHS	
	
File System Size:     6290856 (512 byte blocks)	
Aggregate Block Size: 4096	
Allocation Group Size:8192    (aggregate blocks)	
	
> 	
	
You will be on a prompt type i 138  (inode # of the file)	
	
> i 138	
Inode 138 at block 173, offset 0x400:	
	
[1] di_fileset:         16    [18] di_inostamp:       0x47c3a413	
[2] di_number:138   [19] di_gen:  2878326622	
[3] di_size:    0x0000000000000014      [20] di_ixpxd.len:      4	
[4] di_nblocks: 0x0000000000000001      [21] di_ixpxd.addr1:    0x00	
[5] di_nlink: 0     [22] di_ixpxd.addr2:    0x000000ac	
[6] di_mode:  0x000081a4 di_ixpxd.address:  172	
      0100644 -rw-r--r--      [24] di_uid:  0	
[25] di_gid:  0	
[9] di_atime.tj_nsec:   0x03462325      [26] di_atime.tj_sec:0x0000000051ade165	
[10] di_ctime.tj_nsec:  0x1f9b65eb      [27] di_ctime.tj_sec:0x0000000051ade1a3	
[11] di_mtime.tj_nsec:  0x392be283      [28] di_mtime.tj_sec:0x0000000051ade15a	
[12] di_otime.tj_nsec:  0x38d0ce52      [29] di_otime.tj_sec:0x0000000051ade15a	
[13] di_ea.flag:        0x00  [30] di_ea.len:         0	
     EAv1 [31] di_ea.addr1:       0x00	
[15] di_ea.nEntry:      0x00  [32] di_ea.addr2:       0x00000000	
[16] di_ea.type:        0x0000     di_ea.address:     0	
[34] di_ea.nblocks:     0	
change_inode: [m]odify, [e]a, [t]ree, or e[x]it > 	
Type m on the next prompt.	
Please enter: field-number value >  Type - 5 1	
	
Please enter: field-number value > 5 1	
Inode 138 at block 173, offset 0x400:	
	
[1] di_fileset:         16    [18] di_inostamp:       0x47c3a413	
[2] di_number:138   [19] di_gen:  2878326622	
[3] di_size:    0x0000000000000014      [20] di_ixpxd.len:      4	
[4] di_nblocks: 0x0000000000000001      [21] di_ixpxd.addr1:    0x00	
[5] di_nlink: 1     [22] di_ixpxd.addr2:    0x000000ac	
[6] di_mode:  0x000081a4 di_ixpxd.address:  172	
      0100644 -rw-r--r--      [24] di_uid:  0	
[25] di_gid:  0	
[9] di_atime.tj_nsec:   0x03462325      [26] di_atime.tj_sec:0x0000000051ade165	
[10] di_ctime.tj_nsec:  0x1f9b65eb      [27] di_ctime.tj_sec:0x0000000051ade1a3	
[11] di_mtime.tj_nsec:  0x392be283      [28] di_mtime.tj_sec:0x0000000051ade15a	
[12] di_otime.tj_nsec:  0x38d0ce52      [29] di_otime.tj_sec:0x0000000051ade15a	
[13] di_ea.flag:        0x00  [30] di_ea.len:         0	
     EAv1 [31] di_ea.addr1:       0x00	
[15] di_ea.nEntry:      0x00  [32] di_ea.addr2:       0x00000000	
[16] di_ea.type:        0x0000     di_ea.address:     0	
[34] di_ea.nblocks:     0	
change_inode: [m]odify, [e]a, [t]ree, or e[x]it > 	
	
Type x to exit and then q to quit fsdb command. 	
	
5. Run fsck on Mount Point : 	
	
[root@montool:/tmp]$ fsck /IHS	
	
	
	
The current volume is: /dev/IHS	
--------------------------------------------------------------------------
	
	
 1  lsvg	
    2  lsvg -o	
    3  errpt|pg	
    4  smitty hacmp	
    5  lspv	
    6  bootinfo -s vpath4	
    7  ifconfig -a	
    8  cd /dev	
    9  ls -l|grep -i asm	
   10  lsvg	
   11  lsvg -o	
   12  varyonvg VG_C10_HV1	
   13  errpt|pg	
   14  lsdev -Cc disk	
   15  bootinfo -s vpath30	
   16  lquerypr -vh vpath4	
   17  lquerypr -vh /dev/vpath4	
   18  bootinfo -s vpath	
   19  lquerypr -ch /dev/vpath4	
   20  bootinfo -s vpath	
   21  bootinfo -s /dev/vpath	
   22  lquerypr -vh /dev/vpath37	
   23  lquerypr -ch /dev/vpath18	
   24  lquerypr -ch /dev/vpath19	
   25  lquerypr -ch /dev/vpath1	
   26  lquerypr -ch /dev/vpath0	
  	
   31  cfgmgr	
   32  varyonvg VG_C10_HV1	
   33  errpt|pg	
   34  ifconfig -a	
   35  lspv	
   36* 	
   37  lspv|grep -v rootvg|awk '{print $1}'	
   38  lspv|grep -v rootvg|awk '{print $1}' >> hdisk	
   39  lspv|grep -v rootvg|grep -v vpath|awk '{print $1}'  	
   40  lspv|grep -v rootvg|grep -v vpath|awk '{print $1}'  >> hdisk	
   41  lspv|grep -v rootvg|grep -v hdisk|awk '{print $1}'  >> vpath	
   42  lspv|grep -v rootvg|grep -v hdisk|awk '{print $1}'  	
   43  for i in `cat hdisk`; do rmdev -Rdl $i; done	
   44  lspv	
   45  rmdev -Rdl hdisk42	
   46  rmdev -Rdl hdisk43	
   47  rmdev -Rdl hdisk44	
   48  varyoffvg C10_RMS	
   49  lsvg -l C10_RMS	
  	
  	
   90  for i in `cat pv`; do bootinfo -s $i; done	
   91  fget_config -Av	
   92  mpio_get_config -Av	
   93  errpt|pg	
   94  ifconfig -a	
   95  for i in `cat pv`; lquerypr -vh $i	
   96  for i in `cat pv`; do ;lquerypr -vh $i; done	
   97  for i in `cat pv`; do lquerypr -vh $i; done	
   98  for i in `cat pv`; do lquerypr -vh /dev/$i; done	
   99  for i in `cat pv`; do bootinfo -s $i; done	
  100  lspv	
  101  >pv	
  102  vi pv	
  103  for i in `cat pv`; do lquerypr -vh /dev/$i; done	
  104  datapath query adapter	
  105  errpt|pg	
  106  lspath	
  107  df -g	
  108  lsvg	
  109  cat /etc/hosts	
  110  errpt|pg	
  111  errpt|pg	
  112  errpt -aj hdisk83|pg	
  113  oslevel -s	
  114  ifconfig -a	
  115  df -g	
  116  lspv	
  117  ifconfig -a	
  118  errpt -aj hdisk83|pg	
  119  errpt|pg	
  120  lsdev -Cc disk	
  121  errpt |head	
  122  lquerypr -vh /dev/hdisk83	
  123  lquerypr -vh /dev/vpath32	
  124  bootinfo -s vpath32	
  125  bootinfo -s hdisk83	
  126  addpaths 	
  127  bootinfo -s hdisk83	
  128  bootinfo -s vpath32	
  129  lspv	
  130  lsvg -o	
  131  lsvg	
  132  lsvg|grep -v rootvg |xargs -t -I {} exportvg {}	
  133  lsvg	
  134  lspv	
  135  lspv |grep None |awk '{print $1}' |xargs -t -I {} rmdev -Rdl {}	
  136  lscfg 	
  137  rmdev -Rdl fcs0	
  138  rmdev -Rdl fcs1	
  139  rmdev -Rdl fcs2	
  140  rmdev -Rdl fcs3	
  141  rmdev -Rdl fcs4	
  142  cfgmgr	
  143  datapath query adapter	
  144  lsvpcfg	
  145  bootinfo -s 	
  146  bootinfo -s vpath37	
  147  lquerypr -vh vpath37	
  148  lquerypr -vh /dev/vpath37 unlock the disk	
  149  cd /opt/ibm/dscli/profile/	
  150  lspv |grep vpath |awk '{print $1}' |xargs -t -I {} bootinfo -s {}	
  151  importvg -y C10_RMS_VG vpath38	
  152  lsvg -l C10_RMS_VG	
  153  crontab -l |grep -i bcv	
  154  cat /scripts/FX_c10_flash.sh |grep sh	
  155  cat /scripts/c10_storage_db_resync.sh	
  156  cat /opt/ibm/dscli/PAIR_INFO/C10_DB	
  157  i=`cat /opt/ibm/dscli/PAIR_INFO/C10_DB`	
  158  /opt/ibm/dscli/dscli -cfg /opt/ibm/dscli/profile/dscli.profile.Sec62DS8300-75BX670 -user ibmbharti -pwfile /opt/ibm/dscli/profile/security.dat lsflash -l -hdr off $i	
  159  ls -l 	
  160  lsvg -o	
  161  varyoffvg 	
  162  varyoffvg C10_RMS_VG	
  163  exportvg C10_RMS_VG	
  164  history |grep rmdev	
  165  lspv |grep None |awk '{print $1}' |xargs -t -I {} rmdev -Rdl {}	
  166  lspv |grep vpath25	
  167  lsvpcfg	


